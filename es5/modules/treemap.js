/*
 Highcharts JS v11.1.0 (2023-08-20)

 (c) 2014-2021 Highsoft AS
 Authors: Jon Arild Nygard / Oystein Moseng

 License: www.highcharts.com/license
*/
'use strict';(function(a){"object"===typeof module&&module.exports?(a["default"]=a,module.exports=a):"function"===typeof define&&define.amd?define("highcharts/modules/treemap",["highcharts"],function(p){a(p);a.Highcharts=p;return a}):a("undefined"!==typeof Highcharts?Highcharts:void 0)})(function(a){function p(a,c,b,e){a.hasOwnProperty(c)||(a[c]=e.apply(null,b),"function"===typeof CustomEvent&&window.dispatchEvent(new CustomEvent("HighchartsModuleLoaded",{detail:{path:c,module:a[c]}})))}a=a?a._modules:
{};p(a,"Series/ColorMapComposition.js",[a["Core/Series/SeriesRegistry.js"],a["Core/Utilities.js"]],function(a,c){var b=a.seriesTypes.column.prototype,e=c.addEvent,k=c.defined,g;(function(a){function g(d){this.moveToTopOnHover&&this.graphic&&this.graphic.attr({zIndex:d&&"hover"===d.state?1:0})}var h=[];a.pointMembers={dataLabelOnNull:!0,moveToTopOnHover:!0,isValid:function(){return null!==this.value&&Infinity!==this.value&&-Infinity!==this.value&&(void 0===this.value||!isNaN(this.value))}};a.seriesMembers=
{colorKey:"value",axisTypes:["xAxis","yAxis","colorAxis"],parallelArrays:["x","y","value"],pointArrayMap:["value"],trackerGroups:["group","markerGroup","dataLabelsGroup"],colorAttribs:function(d){var a={};!k(d.color)||d.state&&"normal"!==d.state||(a[this.colorProp||"fill"]=d.color);return a},pointAttribs:b.pointAttribs};a.compose=function(d){var a=d.prototype.pointClass;c.pushUnique(h,a)&&e(a,"afterSetState",g);return d}})(g||(g={}));return g});p(a,"Series/Treemap/TreemapAlgorithmGroup.js",[],function(){return function(){function a(a,
b,e,k){this.height=a;this.width=b;this.plot=k;this.startDirection=this.direction=e;this.lH=this.nH=this.lW=this.nW=this.total=0;this.elArr=[];this.lP={total:0,lH:0,nH:0,lW:0,nW:0,nR:0,lR:0,aspectRatio:function(a,b){return Math.max(a/b,b/a)}}}a.prototype.addElement=function(a){this.lP.total=this.elArr[this.elArr.length-1];this.total+=a;0===this.direction?(this.lW=this.nW,this.lP.lH=this.lP.total/this.lW,this.lP.lR=this.lP.aspectRatio(this.lW,this.lP.lH),this.nW=this.total/this.height,this.lP.nH=this.lP.total/
this.nW,this.lP.nR=this.lP.aspectRatio(this.nW,this.lP.nH)):(this.lH=this.nH,this.lP.lW=this.lP.total/this.lH,this.lP.lR=this.lP.aspectRatio(this.lP.lW,this.lH),this.nH=this.total/this.width,this.lP.nW=this.lP.total/this.nH,this.lP.nR=this.lP.aspectRatio(this.lP.nW,this.nH));this.elArr.push(a)};a.prototype.reset=function(){this.lW=this.nW=0;this.elArr=[];this.total=0};return a}()});p(a,"Series/DrawPointUtilities.js",[a["Core/Utilities.js"]],function(){var a=this&&this.__assign||function(){a=Object.assign||
function(a){for(var b,c=1,k=arguments.length;c<k;c++){b=arguments[c];for(var g in b)Object.prototype.hasOwnProperty.call(b,g)&&(a[g]=b[g])}return a};return a.apply(this,arguments)};return{draw:function(c,b){var e=b.animatableAttribs,k=b.onComplete,g=b.css,h=b.renderer,l=c.series&&c.series.chart.hasRendered?void 0:c.series&&c.series.options.animation,n=c.graphic;b.attribs=a(a({},b.attribs),{"class":c.getClassName()})||{};if(c.shouldDraw())n||(n="text"===b.shapeType?h.text():"image"===b.shapeType?h.image(b.imageUrl||
"").attr(b.shapeArgs||{}):h[b.shapeType](b.shapeArgs||{}),c.graphic=n,n.add(b.group)),g&&n.css(g),n.attr(b.attribs).animate(e,b.isNew?!1:l,k);else if(n){var d=function(){c.graphic=n=n&&n.destroy();"function"===typeof k&&k()};Object.keys(e).length?n.animate(e,void 0,function(){return d()}):d()}}}});p(a,"Series/Treemap/TreemapPoint.js",[a["Series/DrawPointUtilities.js"],a["Core/Series/SeriesRegistry.js"],a["Core/Utilities.js"]],function(a,c,b){var e=this&&this.__extends||function(){function d(a,b){d=
Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,a){d.__proto__=a}||function(d,a){for(var b in a)Object.prototype.hasOwnProperty.call(a,b)&&(d[b]=a[b])};return d(a,b)}return function(a,b){function c(){this.constructor=a}if("function"!==typeof b&&null!==b)throw new TypeError("Class extends value "+String(b)+" is not a constructor or null");d(a,b);a.prototype=null===b?Object.create(b):(c.prototype=b.prototype,new c)}}(),k=c.series.prototype.pointClass,g=c.seriesTypes;c=g.pie.prototype.pointClass;
var h=b.extend,l=b.isNumber,n=b.pick;b=function(d){function b(){var a=null!==d&&d.apply(this,arguments)||this;a.name=void 0;a.node=void 0;a.options=void 0;a.series=void 0;a.shapeType="rect";a.value=void 0;return a}e(b,d);b.prototype.draw=function(d){a.draw(this,d)};b.prototype.getClassName=function(){var a=k.prototype.getClassName.call(this),d=this.series,b=d.options;this.node.level<=d.nodeMap[d.rootNode].level?a+=" highcharts-above-level":this.node.isLeaf||n(b.interactByLeaf,!b.allowTraversingTree)?
this.node.isLeaf||(a+=" highcharts-internal-node"):a+=" highcharts-internal-node-interactive";return a};b.prototype.isValid=function(){return!(!this.id&&!l(this.value))};b.prototype.setState=function(a){k.prototype.setState.call(this,a);this.graphic&&this.graphic.attr({zIndex:"hover"===a?1:0})};b.prototype.shouldDraw=function(){return l(this.plotY)&&null!==this.y};return b}(g.scatter.prototype.pointClass);h(b.prototype,{setVisible:c.prototype.setVisible});return b});p(a,"Series/Treemap/TreemapUtilities.js",
[a["Core/Utilities.js"]],function(a){var c=a.objectEach,b;(function(a){function b(a,c,l){void 0===l&&(l=this);a=c.call(l,a);!1!==a&&b(a,c,l)}a.AXIS_MAX=100;a.isBoolean=function(a){return"boolean"===typeof a};a.eachObject=function(a,b,l){l=l||this;c(a,function(c,d){b.call(l,c,d,a)})};a.recursive=b})(b||(b={}));return b});p(a,"Series/TreeUtilities.js",[a["Core/Color/Color.js"],a["Core/Utilities.js"]],function(a,c){function b(a,c){var d=c.before,l=c.idRoot,h=c.mapIdToNode[l],k=c.points[a.i],g=k&&k.options||
{},r=[],t=0;a.levelDynamic=a.level-(!1!==c.levelIsConstant?0:h.level);a.name=n(k&&k.name,"");a.visible=l===a.id||!0===c.visible;"function"===typeof d&&(a=d(a,c));a.children.forEach(function(d,z){var m=e({},c);e(m,{index:z,siblings:a.children.length,visible:a.visible});d=b(d,m);r.push(d);d.visible&&(t+=d.val)});d=n(g.value,t);a.visible=0<=d&&(0<t||a.visible);a.children=r;a.childrenTotal=t;a.isLeaf=a.visible&&!t;a.val=d;return a}var e=c.extend,k=c.isArray,g=c.isNumber,h=c.isObject,l=c.merge,n=c.pick;
return{getColor:function(d,b){var c=b.index,l=b.mapOptionsToLevel,k=b.parentColor,h=b.parentColorIndex,e=b.series,g=b.colors,t=b.siblings,r=e.points,z=e.chart.options.chart,m;if(d){r=r[d.i];d=l[d.level]||{};if(l=r&&d.colorByPoint){var I=r.index%(g?g.length:z.colorCount);var A=g&&g[I]}if(!e.chart.styledMode){g=r&&r.options.color;z=d&&d.color;if(m=k)m=(m=d&&d.colorVariation)&&"brightness"===m.key&&c&&t?a.parse(k).brighten(c/t*m.to).get():k;m=n(g,z,A,m,e.color)}var L=n(r&&r.options.colorIndex,d&&d.colorIndex,
I,h,b.colorIndex)}return{color:m,colorIndex:L}},getLevelOptions:function(a){var b={};if(h(a)){var d=g(a.from)?a.from:1;var c=a.levels;var e={};var p=h(a.defaults)?a.defaults:{};k(c)&&(e=c.reduce(function(a,b){if(h(b)&&g(b.level)){var c=l({},b);var e=n(c.levelIsConstant,p.levelIsConstant);delete c.levelIsConstant;delete c.level;b=b.level+(e?0:d-1);h(a[b])?l(!0,a[b],c):a[b]=c}return a},{}));c=g(a.to)?a.to:1;for(a=0;a<=c;a++)b[a]=l({},p,h(e[a])?e[a]:{})}return b},setTreeValues:b,updateRootId:function(a){if(h(a)){var b=
h(a.options)?a.options:{};b=n(a.rootNode,b.rootId,"");h(a.userOptions)&&(a.userOptions.rootId=b);a.rootNode=b}return b}}});p(a,"Extensions/Breadcrumbs/BreadcrumbsDefaults.js",[],function(){return{lang:{mainBreadcrumb:"Main"},options:{buttonTheme:{fill:"none",height:18,padding:2,"stroke-width":0,zIndex:7,states:{select:{fill:"none"}},style:{color:"#334eff"}},buttonSpacing:5,floating:!1,format:void 0,relativeTo:"plotBox",rtl:!1,position:{align:"left",verticalAlign:"top",x:0,y:void 0},separator:{text:"/",
style:{color:"#666666",fontSize:"0.8em"}},showFullPath:!0,style:{},useHTML:!1,zIndex:7}}});p(a,"Extensions/Breadcrumbs/Breadcrumbs.js",[a["Extensions/Breadcrumbs/BreadcrumbsDefaults.js"],a["Core/Chart/Chart.js"],a["Core/Templating.js"],a["Core/Utilities.js"]],function(a,c,b,e){function k(){if(this.breadcrumbs){var a=this.resetZoomButton&&this.resetZoomButton.getBBox(),b=this.breadcrumbs.options;a&&"right"===b.position.align&&"plotBox"===b.relativeTo&&this.breadcrumbs.alignBreadcrumbsGroup(-a.width-
b.buttonSpacing)}}function g(){this.breadcrumbs&&(this.breadcrumbs.destroy(),this.breadcrumbs=void 0)}function h(){var a=this.breadcrumbs;if(a&&!a.options.floating&&a.level){var b=a.options,c=b.buttonTheme;c=(c.height||0)+2*(c.padding||0)+b.buttonSpacing;b=b.position.verticalAlign;"bottom"===b?(this.marginBottom=(this.marginBottom||0)+c,a.yOffset=c):"middle"!==b?(this.plotTop+=c,a.yOffset=-c):a.yOffset=void 0}}function l(){this.breadcrumbs&&this.breadcrumbs.redraw()}function n(a){!0===a.resetSelection&&
this.breadcrumbs&&this.breadcrumbs.alignBreadcrumbsGroup()}var d=b.format,r=e.addEvent,p=e.defined,G=e.extend,x=e.fireEvent,K=e.isString,C=e.merge,E=e.objectEach,t=e.pick,H=[];b=function(){function b(a,c){this.elementList={};this.isDirty=!0;this.level=0;this.list=[];c=C(a.options.drilldown&&a.options.drilldown.drillUpButton,b.defaultOptions,a.options.navigation&&a.options.navigation.breadcrumbs,c);this.chart=a;this.options=c||{}}b.compose=function(b,d){e.pushUnique(H,b)&&(r(c,"destroy",g),r(c,"afterShowResetZoom",
k),r(c,"getMargins",h),r(c,"redraw",l),r(c,"selection",n));e.pushUnique(H,d)&&G(d.lang,a.lang)};b.prototype.updateProperties=function(a){this.setList(a);this.setLevel();this.isDirty=!0};b.prototype.setList=function(a){this.list=a};b.prototype.setLevel=function(){this.level=this.list.length&&this.list.length-1};b.prototype.getLevel=function(){return this.level};b.prototype.getButtonText=function(a){var b=this.chart,c=this.options,m=b.options.lang,e=t(c.format,c.showFullPath?"{level.name}":"\u2190 {level.name}");
m=m&&t(m.drillUpText,m.mainBreadcrumb);a=c.formatter&&c.formatter(a)||d(e,{level:a.levelOptions},b)||"";(K(a)&&!a.length||"\u2190 "===a)&&p(m)&&(a=c.showFullPath?m:"\u2190 "+m);return a};b.prototype.redraw=function(){this.isDirty&&this.render();this.group&&this.group.align();this.isDirty=!1};b.prototype.render=function(){var a=this.chart,b=this.options;!this.group&&b&&(this.group=a.renderer.g("breadcrumbs-group").addClass("highcharts-no-tooltip highcharts-breadcrumbs").attr({zIndex:b.zIndex}).add());
b.showFullPath?this.renderFullPathButtons():this.renderSingleButton();this.alignBreadcrumbsGroup()};b.prototype.renderFullPathButtons=function(){this.destroySingleButton();this.resetElementListState();this.updateListElements();this.destroyListElements()};b.prototype.renderSingleButton=function(){var a=this.chart,b=this.list,c=this.options.buttonSpacing;this.destroyListElements();var d=this.group?this.group.getBBox().width:c;b=b[b.length-2];!a.drillUpButton&&0<this.level?a.drillUpButton=this.renderButton(b,
d,c):a.drillUpButton&&(0<this.level?this.updateSingleButton():this.destroySingleButton())};b.prototype.alignBreadcrumbsGroup=function(a){if(this.group){var b=this.options,c=b.buttonTheme,d=b.position,m="chart"===b.relativeTo||"spacingBox"===b.relativeTo?void 0:"scrollablePlotBox",e=this.group.getBBox();b=2*(c.padding||0)+b.buttonSpacing;d.width=e.width+b;d.height=e.height+b;e=C(d);a&&(e.x+=a);this.options.rtl&&(e.x+=d.width);e.y=t(e.y,this.yOffset,0);this.group.align(e,!0,m)}};b.prototype.renderButton=
function(a,b,c){var d=this,e=this.chart,m=d.options,l=C(m.buttonTheme);b=e.renderer.button(d.getButtonText(a),b,c,function(b){var c=m.events&&m.events.click,e;c&&(e=c.call(d,b,a));!1!==e&&(b.newLevel=m.showFullPath?a.level:d.level-1,x(d,"up",b))},l).addClass("highcharts-breadcrumbs-button").add(d.group);e.styledMode||b.attr(m.style);return b};b.prototype.renderSeparator=function(a,b){var c=this.chart,d=this.options.separator;a=c.renderer.label(d.text,a,b,void 0,void 0,void 0,!1).addClass("highcharts-breadcrumbs-separator").add(this.group);
c.styledMode||a.css(d.style);return a};b.prototype.update=function(a){C(!0,this.options,a);this.destroy();this.isDirty=!0};b.prototype.updateSingleButton=function(){var a=this.chart,b=this.list[this.level-1];a.drillUpButton&&a.drillUpButton.attr({text:this.getButtonText(b)})};b.prototype.destroy=function(){this.destroySingleButton();this.destroyListElements(!0);this.group&&this.group.destroy();this.group=void 0};b.prototype.destroyListElements=function(a){var b=this.elementList;E(b,function(c,d){if(a||
!b[d].updated)c=b[d],c.button&&c.button.destroy(),c.separator&&c.separator.destroy(),delete c.button,delete c.separator,delete b[d]});a&&(this.elementList={})};b.prototype.destroySingleButton=function(){this.chart.drillUpButton&&(this.chart.drillUpButton.destroy(),this.chart.drillUpButton=void 0)};b.prototype.resetElementListState=function(){E(this.elementList,function(a){a.updated=!1})};b.prototype.updateListElements=function(){function a(a,b,c){a.translate(b-a.getBBox().width,c)}function b(a,b){return k*
a.getBBox().width+k*b}for(var c=this.elementList,d=this.options.buttonSpacing,e=this.list,l=this.options.rtl,k=l?-1:1,g=this.group?b(this.group,d):d,h,n,p=0,r=e.length;p<r;++p){var t=p===r-1,B=void 0;h=void 0;n=e[p];c[n.level]?(h=c[n.level],B=h.button,h.separator||t?h.separator&&t&&(h.separator.destroy(),delete h.separator):(g+=k*d,h.separator=this.renderSeparator(g,d),l&&a(h.separator,g,d),g+=b(h.separator,d)),c[n.level].updated=!0):(B=this.renderButton(n,g,d),l&&a(B,g,d),g+=b(B,d),t||(h=this.renderSeparator(g,
d),l&&a(h,g,d),g+=b(h,d)),c[n.level]={button:B,separator:h,updated:!0});B&&B.setState(t?2:0)}};b.defaultOptions=a.options;return b}();"";return b});p(a,"Series/Treemap/TreemapComposition.js",[a["Core/Series/SeriesRegistry.js"],a["Series/Treemap/TreemapUtilities.js"],a["Core/Utilities.js"]],function(a,c,b){var e=b.addEvent,k=b.extend,g=!1;e(a.series,"afterBindAxes",function(){var a=this.xAxis,b=this.yAxis;if(a&&b)if(this.is("treemap")){var e={endOnTick:!1,gridLineWidth:0,lineWidth:0,min:0,minPadding:0,
max:c.AXIS_MAX,maxPadding:0,startOnTick:!1,title:void 0,tickPositions:[]};k(b.options,e);k(a.options,e);g=!0}else g&&(b.setOptions(b.userOptions),a.setOptions(a.userOptions),g=!1)})});p(a,"Series/Treemap/TreemapNode.js",[],function(){return function(){function a(){this.childrenTotal=0;this.visible=!1}a.prototype.init=function(a,b,e,k,g,h,l){this.id=a;this.i=b;this.children=e;this.height=k;this.level=g;this.series=h;this.parent=l;return this};return a}()});p(a,"Series/Treemap/TreemapSeries.js",[a["Core/Color/Color.js"],
a["Series/ColorMapComposition.js"],a["Core/Globals.js"],a["Core/Series/SeriesRegistry.js"],a["Series/Treemap/TreemapAlgorithmGroup.js"],a["Series/Treemap/TreemapPoint.js"],a["Series/Treemap/TreemapUtilities.js"],a["Series/TreeUtilities.js"],a["Extensions/Breadcrumbs/Breadcrumbs.js"],a["Core/Utilities.js"],a["Series/Treemap/TreemapNode.js"]],function(a,c,b,e,p,g,h,l,n,d,r){var k=this&&this.__extends||function(){function a(b,f){a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,b){a.__proto__=
b}||function(a,b){for(var f in b)Object.prototype.hasOwnProperty.call(b,f)&&(a[f]=b[f])};return a(b,f)}return function(b,f){function q(){this.constructor=b}if("function"!==typeof f&&null!==f)throw new TypeError("Class extends value "+String(f)+" is not a constructor or null");a(b,f);b.prototype=null===f?Object.create(f):(q.prototype=f.prototype,new q)}}(),G=a.parse;a=b.noop;var x=e.series;b=e.seriesTypes;var K=b.column,C=b.heatmap,E=b.scatter,t=l.getColor,H=l.getLevelOptions,z=l.updateRootId,m=d.addEvent,
I=d.correctFloat,A=d.defined,L=d.error,J=d.extend,Q=d.fireEvent,O=d.isArray,R=d.isObject,M=d.isString,y=d.merge,w=d.pick,S=d.stableSort;l=function(a){function b(){var b=null!==a&&a.apply(this,arguments)||this;b.axisRatio=void 0;b.data=void 0;b.mapOptionsToLevel=void 0;b.nodeMap=void 0;b.nodeList=void 0;b.options=void 0;b.points=void 0;b.rootNode=void 0;b.tree=void 0;b.level=void 0;return b}k(b,a);b.prototype.algorithmCalcPoints=function(a,b,c,d){var f,q,u,e,D=c.lW,g=c.lH,v=c.plot,h=0,l=c.elArr.length-
1;if(b)D=c.nW,g=c.nH;else var k=c.elArr[c.elArr.length-1];c.elArr.forEach(function(a){if(b||h<l)0===c.direction?(f=v.x,q=v.y,u=D,e=a/u):(f=v.x,q=v.y,e=g,u=a/e),d.push({x:f,y:q,width:u,height:I(e)}),0===c.direction?v.y+=e:v.x+=u;h+=1});c.reset();0===c.direction?c.width-=D:c.height-=g;v.y=v.parent.y+(v.parent.height-c.height);v.x=v.parent.x+(v.parent.width-c.width);a&&(c.direction=1-c.direction);b||c.addElement(k)};b.prototype.algorithmFill=function(a,b,c){var f=[],q,d=b.direction,u=b.x,e=b.y,g=b.width,
h=b.height,v,l,k,m;c.forEach(function(c){q=c.val/b.val*b.height*b.width;v=u;l=e;0===d?(m=h,k=q/m,g-=k,u+=k):(k=g,m=q/k,h-=m,e+=m);f.push({x:v,y:l,width:k,height:m});a&&(d=1-d)});return f};b.prototype.algorithmLowAspectRatio=function(a,b,c){var f=[],d=this,q,u={x:b.x,y:b.y,parent:b},e=0,g=c.length-1,h=new p(b.height,b.width,b.direction,u);c.forEach(function(c){q=c.val/b.val*b.height*b.width;h.addElement(q);h.lP.nR>h.lP.lR&&d.algorithmCalcPoints(a,!1,h,f,u);e===g&&d.algorithmCalcPoints(a,!0,h,f,u);
e+=1});return f};b.prototype.alignDataLabel=function(a,b,c){var f=c.style;f&&!A(f.textOverflow)&&b.text&&b.getBBox().width>b.text.textWidth&&b.css({textOverflow:"ellipsis",width:f.width+="px"});K.prototype.alignDataLabel.apply(this,arguments);a.dataLabel&&a.dataLabel.attr({zIndex:(a.node.zIndex||0)+1})};b.prototype.calculateChildrenAreas=function(a,b){var f=this,c=f.options,d=f.mapOptionsToLevel[a.level+1],q=w(f[d&&d.layoutAlgorithm]&&d.layoutAlgorithm,c.layoutAlgorithm),e=c.alternateStartingDirection,
g=[];a=a.children.filter(function(a){return!a.ignore});d&&d.layoutStartingDirection&&(b.direction="vertical"===d.layoutStartingDirection?0:1);g=f[q](b,a);a.forEach(function(a,c){c=g[c];a.values=y(c,{val:a.childrenTotal,direction:e?1-b.direction:b.direction});a.pointValues=y(c,{x:c.x/f.axisRatio,y:h.AXIS_MAX-c.y-c.height,width:c.width/f.axisRatio});a.children.length&&f.calculateChildrenAreas(a,a.values)})};b.prototype.createList=function(a){var b=this.chart,f=[];if(b.breadcrumbs){var c=0;f.push({level:c,
levelOptions:b.series[0]});b=a.target.nodeMap[a.newRootId];for(var d=[];b.parent||""===b.parent;)d.push(b),b=a.target.nodeMap[b.parent];d.reverse().forEach(function(a){f.push({level:++c,levelOptions:a})});1>=f.length&&(f.length=0)}return f};b.prototype.drawDataLabels=function(){var a=this,b=a.mapOptionsToLevel,c,d;a.points.filter(function(a){return a.node.visible}).forEach(function(f){d=b[f.node.level];c={style:{}};f.node.isLeaf||(c.enabled=!1);d&&d.dataLabels&&(c=y(c,d.dataLabels),a._hasPointLabels=
!0);f.shapeArgs&&(c.style.width=f.shapeArgs.width,f.dataLabel&&f.dataLabel.css({width:f.shapeArgs.width+"px"}));f.dlOptions=y(c,f.options.dataLabels)});x.prototype.drawDataLabels.call(this)};b.prototype.drawPoints=function(a){void 0===a&&(a=this.points);var b=this,f=b.chart,c=f.renderer,d=f.styledMode,e=b.options,g=d?{}:e.shadow,h=e.borderRadius,k=f.pointCount<e.animationLimit,l=e.allowTraversingTree;a.forEach(function(a){var f=a.node.levelDynamic,q={},N={},u={},F="level-group-"+a.node.level,P=!!a.graphic,
m=k&&P,D=a.shapeArgs;a.shouldDraw()&&(a.isInside=!0,h&&(N.r=h),y(!0,m?q:N,P?D:{},d?{}:b.pointAttribs(a,a.selected?"select":void 0)),b.colorAttribs&&d&&J(u,b.colorAttribs(a)),b[F]||(b[F]=c.g(F).attr({zIndex:1E3-(f||0)}).add(b.group),b[F].survive=!0));a.draw({animatableAttribs:q,attribs:N,css:u,group:b[F],imageUrl:a.imageUrl,renderer:c,shadow:g,shapeArgs:D,shapeType:a.shapeType});l&&a.graphic&&(a.drillId=e.interactByLeaf?b.drillToByLeaf(a):b.drillToByGroup(a))})};b.prototype.drillToByGroup=function(a){var b=
!1;1!==a.node.level-this.nodeMap[this.rootNode].level||a.node.isLeaf||(b=a.id);return b};b.prototype.drillToByLeaf=function(a){var b=!1;if(a.node.parent!==this.rootNode&&a.node.isLeaf)for(a=a.node;!b;)a=this.nodeMap[a.parent],a.parent===this.rootNode&&(b=a.id);return b};b.prototype.drillToNode=function(a,b){L(32,!1,void 0,{"treemap.drillToNode":"use treemap.setRootNode"});this.setRootNode(a,b)};b.prototype.drillUp=function(){var a=this.nodeMap[this.rootNode];a&&M(a.parent)&&this.setRootNode(a.parent,
!0,{trigger:"traverseUpButton"})};b.prototype.getExtremes=function(){var a=x.prototype.getExtremes.call(this,this.colorValueData),b=a.dataMax;this.valueMin=a.dataMin;this.valueMax=b;return x.prototype.getExtremes.call(this)};b.prototype.getListOfParents=function(a,b){a=O(a)?a:[];var c=O(b)?b:[];b=a.reduce(function(a,b,c){b=w(b.parent,"");"undefined"===typeof a[b]&&(a[b]=[]);a[b].push(c);return a},{"":[]});h.eachObject(b,function(a,b,f){""!==b&&-1===c.indexOf(b)&&(a.forEach(function(a){f[""].push(a)}),
delete f[b])});return b};b.prototype.getTree=function(){var a=this.data.map(function(a){return a.id});a=this.getListOfParents(this.data,a);this.nodeMap={};this.nodeList=[];return this.buildTree("",-1,0,a)};b.prototype.buildTree=function(a,b,c,d,e){var f=this,q=[],u=f.points[b],g=0,h;(d[a]||[]).forEach(function(b){h=f.buildTree(f.points[b].id,b,c+1,d,a);g=Math.max(h.height+1,g);q.push(h)});var k=(new f.NodeClass).init(a,b,q,g,c,f,e);q.forEach(function(a){a.parentNode=k});f.nodeMap[k.id]=k;f.nodeList.push(k);
u&&(u.node=k,k.point=u);return k};b.prototype.hasData=function(){return!!this.processedXData.length};b.prototype.init=function(a,b){var c=this,f=y(b.drillUpButton,b.breadcrumbs);var d=m(c,"setOptions",function(a){a=a.userOptions;A(a.allowDrillToNode)&&!A(a.allowTraversingTree)&&(a.allowTraversingTree=a.allowDrillToNode,delete a.allowDrillToNode);A(a.drillUpButton)&&!A(a.traverseUpButton)&&(a.traverseUpButton=a.drillUpButton,delete a.drillUpButton)});x.prototype.init.call(c,a,b);delete c.opacity;c.eventsToUnbind.push(d);
c.options.allowTraversingTree&&(c.eventsToUnbind.push(m(c,"click",c.onClickDrillToNode)),c.eventsToUnbind.push(m(c,"setRootNode",function(a){var b=c.chart;b.breadcrumbs&&b.breadcrumbs.updateProperties(c.createList(a))})),c.eventsToUnbind.push(m(c,"update",function(a){var b=this.chart.breadcrumbs;b&&a.options.breadcrumbs&&b.update(a.options.breadcrumbs)})),c.eventsToUnbind.push(m(c,"destroy",function(a){var b=this.chart;b.breadcrumbs&&(b.breadcrumbs.destroy(),a.keepEventsForUpdate||(b.breadcrumbs=
void 0))})));a.breadcrumbs||(a.breadcrumbs=new n(a,f));c.eventsToUnbind.push(m(a.breadcrumbs,"up",function(a){a=this.level-a.newLevel;for(var b=0;b<a;b++)c.drillUp()}))};b.prototype.onClickDrillToNode=function(a){var b=(a=a.point)&&a.drillId;M(b)&&(a.setState(""),this.setRootNode(b,!0,{trigger:"click"}))};b.prototype.pointAttribs=function(a,b){var c=R(this.mapOptionsToLevel)?this.mapOptionsToLevel:{},d=a&&c[a.node.level]||{};c=this.options;var f=b&&c.states&&c.states[b]||{},e=a&&a.getClassName()||
"";a={stroke:a&&a.borderColor||d.borderColor||f.borderColor||c.borderColor,"stroke-width":w(a&&a.borderWidth,d.borderWidth,f.borderWidth,c.borderWidth),dashstyle:a&&a.borderDashStyle||d.borderDashStyle||f.borderDashStyle||c.borderDashStyle,fill:a&&a.color||this.color};-1!==e.indexOf("highcharts-above-level")?(a.fill="none",a["stroke-width"]=0):-1!==e.indexOf("highcharts-internal-node-interactive")?(b=w(f.opacity,c.opacity),a.fill=G(a.fill).setOpacity(b).get(),a.cursor="pointer"):-1!==e.indexOf("highcharts-internal-node")?
a.fill="none":b&&(a.fill=G(a.fill).brighten(f.brightness).get());return a};b.prototype.setColorRecursive=function(a,b,c,d,e){var f=this,g=f&&f.chart;g=g&&g.options&&g.options.colors;if(a){var h=t(a,{colors:g,index:d,mapOptionsToLevel:f.mapOptionsToLevel,parentColor:b,parentColorIndex:c,series:f,siblings:e});if(b=f.points[a.i])b.color=h.color,b.colorIndex=h.colorIndex;(a.children||[]).forEach(function(b,c){f.setColorRecursive(b,h.color,h.colorIndex,c,a.children.length)})}};b.prototype.setPointValues=
function(){var a=this,b=a.xAxis,c=a.yAxis,d=a.chart.styledMode;a.points.forEach(function(f){var e=f.node,g=e.pointValues;e=e.visible;if(g&&e){e=g.height;var h=g.width,k=g.x,q=g.y,l=d?0:(a.pointAttribs(f)["stroke-width"]||0)%2/2;g=Math.round(b.toPixels(k,!0))-l;h=Math.round(b.toPixels(k+h,!0))-l;k=Math.round(c.toPixels(q,!0))-l;e=Math.round(c.toPixels(q+e,!0))-l;e={x:Math.min(g,h),y:Math.min(k,e),width:Math.abs(h-g),height:Math.abs(e-k)};f.plotX=e.x+e.width/2;f.plotY=e.y+e.height/2;f.shapeArgs=e}else delete f.plotX,
delete f.plotY})};b.prototype.setRootNode=function(a,b,c){a=J({newRootId:a,previousRootId:this.rootNode,redraw:w(b,!0),series:this},c);Q(this,"setRootNode",a,function(a){var b=a.series;b.idPreviousRoot=a.previousRootId;b.rootNode=a.newRootId;b.isDirty=!0;a.redraw&&b.chart.redraw()})};b.prototype.setState=function(a){this.options.inactiveOtherPoints=!0;x.prototype.setState.call(this,a,!1);this.options.inactiveOtherPoints=!1};b.prototype.setTreeValues=function(a){var b=this,c=b.options,d=b.nodeMap[b.rootNode];
c=h.isBoolean(c.levelIsConstant)?c.levelIsConstant:!0;var f=0,e=[],g=b.points[a.i];a.children.forEach(function(a){a=b.setTreeValues(a);e.push(a);a.ignore||(f+=a.val)});S(e,function(a,b){return(a.sortIndex||0)-(b.sortIndex||0)});var k=w(g&&g.options.value,f);g&&(g.value=k);J(a,{children:e,childrenTotal:f,ignore:!(w(g&&g.visible,!0)&&0<k),isLeaf:a.visible&&!f,levelDynamic:a.level-(c?0:d.level),name:w(g&&g.name,""),sortIndex:w(g&&g.sortIndex,-k),val:k});return a};b.prototype.sliceAndDice=function(a,
b){return this.algorithmFill(!0,a,b)};b.prototype.squarified=function(a,b){return this.algorithmLowAspectRatio(!0,a,b)};b.prototype.strip=function(a,b){return this.algorithmLowAspectRatio(!1,a,b)};b.prototype.stripes=function(a,b){return this.algorithmFill(!1,a,b)};b.prototype.translate=function(){var a=this,b=a.options,c=z(a);x.prototype.translate.call(a);var d=a.tree=a.getTree();var e=a.nodeMap[c];""===c||e&&e.children.length||(a.setRootNode("",!1),c=a.rootNode,e=a.nodeMap[c]);a.mapOptionsToLevel=
H({from:e.level+1,levels:b.levels,to:d.height,defaults:{levelIsConstant:a.options.levelIsConstant,colorByPoint:b.colorByPoint}});h.recursive(a.nodeMap[a.rootNode],function(b){var c=!1,d=b.parent;b.visible=!0;if(d||""===d)c=a.nodeMap[d];return c});h.recursive(a.nodeMap[a.rootNode].children,function(a){var b=!1;a.forEach(function(a){a.visible=!0;a.children.length&&(b=(b||[]).concat(a.children))});return b});a.setTreeValues(d);a.axisRatio=a.xAxis.len/a.yAxis.len;a.nodeMap[""].pointValues=c={x:0,y:0,
width:h.AXIS_MAX,height:h.AXIS_MAX};a.nodeMap[""].values=c=y(c,{width:c.width*a.axisRatio,direction:"vertical"===b.layoutStartingDirection?0:1,val:d.val});a.calculateChildrenAreas(d,c);a.colorAxis||b.colorByPoint||a.setColorRecursive(a.tree);b.allowTraversingTree&&(b=e.pointValues,a.xAxis.setExtremes(b.x,b.x+b.width,!1),a.yAxis.setExtremes(b.y,b.y+b.height,!1),a.xAxis.setScale(),a.yAxis.setScale());a.setPointValues()};b.defaultOptions=y(E.defaultOptions,{allowTraversingTree:!1,animationLimit:250,
borderRadius:0,showInLegend:!1,marker:void 0,colorByPoint:!1,dataLabels:{defer:!1,enabled:!0,formatter:function(){var a=this&&this.point?this.point:{};return M(a.name)?a.name:""},inside:!0,verticalAlign:"middle"},tooltip:{headerFormat:"",pointFormat:"<b>{point.name}</b>: {point.value}<br/>"},ignoreHiddenPoint:!0,layoutAlgorithm:"sliceAndDice",layoutStartingDirection:"vertical",alternateStartingDirection:!1,levelIsConstant:!0,traverseUpButton:{position:{align:"right",x:-10,y:10}},borderColor:"#e6e6e6",
borderWidth:1,colorKey:"colorValue",opacity:.15,states:{hover:{borderColor:"#999999",brightness:C?0:.1,halo:!1,opacity:.75,shadow:!1}},legendSymbol:"rectangle"});return b}(E);J(l.prototype,{buildKDTree:a,colorAttribs:c.seriesMembers.colorAttribs,colorKey:"colorValue",directTouch:!0,getExtremesFromAll:!0,getSymbol:a,optionalAxis:"colorAxis",parallelArrays:["x","y","value","colorValue"],pointArrayMap:["value"],pointClass:g,NodeClass:r,trackerGroups:["group","dataLabelsGroup"],utils:{recursive:h.recursive}});
c.compose(l);e.registerSeriesType("treemap",l);"";return l});p(a,"masters/modules/treemap.src.js",[a["Core/Globals.js"],a["Extensions/Breadcrumbs/Breadcrumbs.js"]],function(a,c){a.Breadcrumbs=c;c.compose(a.Chart,a.defaultOptions)})});//# sourceMappingURL=treemap.js.map