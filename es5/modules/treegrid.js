/*
 Highcharts Gantt JS v11.1.0 (2023-08-20)

 Tree Grid

 (c) 2016-2021 Jon Arild Nygard

 License: www.highcharts.com/license
*/
'use strict';(function(e){"object"===typeof module&&module.exports?(e["default"]=e,module.exports=e):"function"===typeof define&&define.amd?define("highcharts/modules/treegrid",["highcharts"],function(F){e(F);e.Highcharts=F;return e}):e("undefined"!==typeof Highcharts?Highcharts:void 0)})(function(e){function F(e,t,l,O){e.hasOwnProperty(t)||(e[t]=O.apply(null,l),"function"===typeof CustomEvent&&window.dispatchEvent(new CustomEvent("HighchartsModuleLoaded",{detail:{path:t,module:e[t]}})))}e=e?e._modules:
{};F(e,"Core/Axis/BrokenAxis.js",[e["Core/Axis/Stacking/StackItem.js"],e["Core/Utilities.js"]],function(e,t){var l=t.addEvent,G=t.find,E=t.fireEvent,x=t.isArray,r=t.isNumber,B=t.pick,y;(function(a){function z(){"undefined"!==typeof this.brokenAxis&&this.brokenAxis.setBreaks(this.options.breaks,!1)}function C(){this.brokenAxis&&this.brokenAxis.hasBreaks&&(this.options.ordinal=!1)}function I(){var a=this.brokenAxis;if(a&&a.hasBreaks){for(var b=this.tickPositions,A=this.tickPositions.info,h=[],d=0;d<
b.length;d++)a.isInAnyBreak(b[d])||h.push(b[d]);this.tickPositions=h;this.tickPositions.info=A}}function g(){this.brokenAxis||(this.brokenAxis=new y(this))}function p(){var a=this.options.connectNulls,b=this.points,A=this.xAxis,h=this.yAxis;if(this.isDirty)for(var d=b.length;d--;){var f=b[d],m=!(null===f.y&&!1===a)&&(A&&A.brokenAxis&&A.brokenAxis.isInAnyBreak(f.x,!0)||h&&h.brokenAxis&&h.brokenAxis.isInAnyBreak(f.y,!0));f.visible=m?!1:!1!==f.options.visible}}function n(){this.drawBreaks(this.xAxis,
["x"]);this.drawBreaks(this.yAxis,B(this.pointArrayMap,["y"]))}function c(a,b){var A=this,h=A.points,d,f,m,w;if(a&&a.brokenAxis&&a.brokenAxis.hasBreaks){var c=a.brokenAxis;b.forEach(function(b){d=c&&c.breakArray||[];f=a.isXAxis?a.min:B(A.options.threshold,a.min);h.forEach(function(h){w=B(h["stack"+b.toUpperCase()],h[b]);d.forEach(function(b){if(r(f)&&r(w)){m=!1;if(f<b.from&&w>b.to||f>b.from&&w<b.from)m="pointBreak";else if(f<b.from&&w>b.from&&w<b.to||f>b.from&&w>b.to&&w<b.from)m="pointInBreak";m&&
E(a,m,{point:h,brk:b})}})})})}}function q(){var a=this.currentDataGrouping,b=a&&a.gapSize;a=this.points.slice();var c=this.yAxis,h=this.options.gapSize,d=a.length-1,f;if(h&&0<d)for("value"!==this.options.gapUnit&&(h*=this.basePointRange),b&&b>h&&b>=this.basePointRange&&(h=b),f=void 0;d--;)f&&!1!==f.visible||(f=a[d+1]),b=a[d],!1!==f.visible&&!1!==b.visible&&(f.x-b.x>h&&(f=(b.x+f.x)/2,a.splice(d+1,0,{isNull:!0,x:f}),c.stacking&&this.options.stacking&&(f=c.stacking.stacks[this.stackKey][f]=new e(c,c.options.stackLabels,
!1,f,this.stack),f.total=0)),f=b);return this.getGraphPath(a)}var u=[];a.compose=function(a,b){t.pushUnique(u,a)&&(a.keepProps.push("brokenAxis"),l(a,"init",g),l(a,"afterInit",z),l(a,"afterSetTickPositions",I),l(a,"afterSetOptions",C));if(t.pushUnique(u,b)){var A=b.prototype;A.drawBreaks=c;A.gappedPath=q;l(b,"afterGeneratePoints",p);l(b,"afterRender",n)}return a};var y=function(){function a(a){this.hasBreaks=!1;this.axis=a}a.isInBreak=function(a,c){var b=a.repeat||Infinity,d=a.from,f=a.to-a.from;
c=c>=d?(c-d)%b:b-(d-c)%b;return a.inclusive?c<=f:c<f&&0!==c};a.lin2Val=function(b){var c=this.brokenAxis;c=c&&c.breakArray;if(!c||!r(b))return b;var h;for(h=0;h<c.length;h++){var d=c[h];if(d.from>=b)break;else d.to<b?b+=d.len:a.isInBreak(d,b)&&(b+=d.len)}return b};a.val2Lin=function(b){var c=this.brokenAxis;c=c&&c.breakArray;if(!c||!r(b))return b;var h=b,d;for(d=0;d<c.length;d++){var f=c[d];if(f.to<=b)h-=f.len;else if(f.from>=b)break;else if(a.isInBreak(f,b)){h-=b-f.from;break}}return h};a.prototype.findBreakAt=
function(a,c){return G(c,function(b){return b.from<a&&a<b.to})};a.prototype.isInAnyBreak=function(b,c){var h=this.axis,d=h.options.breaks||[],f=d.length,m;if(f&&r(b)){for(;f--;)if(a.isInBreak(d[f],b)){var w=!0;m||(m=B(d[f].showPoints,!h.isXAxis))}var g=w&&c?w&&!m:w}return g};a.prototype.setBreaks=function(b,c){var h=this,d=h.axis,f=x(b)&&!!b.length;d.isDirty=h.hasBreaks!==f;h.hasBreaks=f;b!==d.options.breaks&&(d.options.breaks=d.userOptions.breaks=b);d.forceRedraw=!0;d.series.forEach(function(a){a.isDirty=
!0});f||d.val2lin!==a.val2Lin||(delete d.val2lin,delete d.lin2val);f&&(d.userOptions.ordinal=!1,d.lin2val=a.lin2Val,d.val2lin=a.val2Lin,d.setExtremes=function(a,b,c,f,g){if(h.hasBreaks){for(var m=this.options.breaks||[],w;w=h.findBreakAt(a,m);)a=w.to;for(;w=h.findBreakAt(b,m);)b=w.from;b<a&&(b=a)}d.constructor.prototype.setExtremes.call(this,a,b,c,f,g)},d.setAxisTranslation=function(){d.constructor.prototype.setAxisTranslation.call(this);h.unitLength=void 0;if(h.hasBreaks){var b=d.options.breaks||
[],c=[],f=[],g=B(d.pointRangePadding,0),q=0,n,p=d.userMin||d.min,u=d.userMax||d.max,k;b.forEach(function(k){n=k.repeat||Infinity;r(p)&&r(u)&&(a.isInBreak(k,p)&&(p+=k.to%n-p%n),a.isInBreak(k,u)&&(u-=u%n-k.from%n))});b.forEach(function(a){D=a.from;n=a.repeat||Infinity;if(r(p)&&r(u)){for(;D-n>p;)D-=n;for(;D<p;)D+=n;for(k=D;k<u;k+=n)c.push({value:k,move:"in"}),c.push({value:k+a.to-a.from,move:"out",size:a.breakSize})}});c.sort(function(k,a){return k.value===a.value?("in"===k.move?0:1)-("in"===a.move?
0:1):k.value-a.value});var v=0;var D=p;c.forEach(function(k){v+="in"===k.move?1:-1;1===v&&"in"===k.move&&(D=k.value);0===v&&r(D)&&(f.push({from:D,to:k.value,len:k.value-D-(k.size||0)}),q+=k.value-D-(k.size||0))});h.breakArray=f;r(p)&&r(u)&&r(d.min)&&(h.unitLength=u-p-q+g,E(d,"afterBreaks"),d.staticScale?d.transA=d.staticScale:h.unitLength&&(d.transA*=(u-d.min+g)/h.unitLength),g&&(d.minPixelPadding=d.transA*(d.minPointOffset||0)),d.min=p,d.max=u)}});B(c,!0)&&d.chart.redraw()};return a}();a.Additions=
y})(y||(y={}));return y});F(e,"Core/Axis/GridAxis.js",[e["Core/Axis/Axis.js"],e["Core/Globals.js"],e["Core/Utilities.js"]],function(e,t,l){function G(k,a){var v={width:0,height:0};a.forEach(function(a){a=k[a];if(l.isObject(a,!0)){var b=l.isObject(a.label,!0)?a.label:{};a=b.getBBox?b.getBBox().height:0;b.textStr&&!m(b.textPxLength)&&(b.textPxLength=b.getBBox().width);var c=m(b.textPxLength)?Math.round(b.textPxLength):0;b.textStr&&(c=Math.round(b.getBBox().width));v.height=Math.max(a,v.height);v.width=
Math.max(c,v.width)}});"treegrid"===this.options.type&&this.treeGrid&&this.treeGrid.mapOfPosToGridNode&&(v.width+=this.options.labels.indentation*((this.treeGrid.mapOfPosToGridNode[-1].height||0)-1));return v}function E(){var k=this.grid;(k&&k.columns||[]).forEach(function(k){k.getOffset()})}function x(k){if(!0===(this.options.grid||{}).enabled){var a=this.axisTitle,b=this.height,c=this.horiz,m=this.left,f=this.offset,d=this.opposite,g=this.options,w=this.top,h=this.width,n=this.tickSize(),q=a&&a.getBBox().width,
p=g.title.x,H=g.title.y;g=M(g.title.margin,c?5:10);a=a?this.chart.renderer.fontMetrics(a).f:0;n=(c?w+b:m)+(c?1:-1)*(d?-1:1)*(n?n[0]/2:0)+(this.side===J.bottom?a:0);k.titlePosition.x=c?m-(q||0)/2-g+p:n+(d?h:0)+f+p;k.titlePosition.y=c?n-(d?b:0)+(d?a:-a)/2+f+H:w-g+H}}function r(){var a=this.chart,v=this.options.grid;v=void 0===v?{}:v;var b=this.userOptions;if(v.enabled){var c=this.options;c.labels.align=M(c.labels.align,"center");this.categories||(c.showLastLabel=!1);this.labelRotation=0;c.labels.rotation=
0}if(v.columns){c=this.grid.columns=[];for(var m=this.grid.columnIndex=0;++m<v.columns.length;){var d=w(b,v.columns[v.columns.length-m-1],{isInternal:!0,linkedTo:0,type:"category",scrollbar:{enabled:!1}});delete d.grid.columns;d=new e(this.chart,d,"yAxis");d.grid.isColumn=!0;d.grid.columnIndex=m;h(a.axes,d);h(a[this.coll]||[],d);c.push(d)}}}function B(){var a=this.grid,v=this.options;if(!0===(v.grid||{}).enabled){var b=this.min||0,c=this.max||0;this.maxLabelDimensions=this.getMaxLabelDimensions(this.ticks,
this.tickPositions);this.rightWall&&this.rightWall.destroy();if(this.grid&&this.grid.isOuterAxis()&&this.axisLine){var m=v.lineWidth;if(m){m=this.getLinePath(m);var d=m[0],f=m[1],g=((this.tickSize("tick")||[1])[0]-1)*(this.side===J.top||this.side===J.left?-1:1);"M"===d[0]&&"L"===f[0]&&(this.horiz?(d[2]+=g,f[2]+=g):(d[1]+=g,f[1]+=g));!this.horiz&&this.chart.marginRight&&(d=[d,["L",this.left,d[2]||0]],g=["L",this.chart.chartWidth-this.chart.marginRight,this.toPixels(c+this.tickmarkOffset)],f=[["M",
f[1]||0,this.toPixels(c+this.tickmarkOffset)],g],this.grid.upperBorder||0===b%1||(this.grid.upperBorder=this.grid.renderBorder(d)),this.grid.upperBorder&&(this.grid.upperBorder.attr({stroke:v.lineColor,"stroke-width":v.lineWidth}),this.grid.upperBorder.animate({d:d})),this.grid.lowerBorder||0===c%1||(this.grid.lowerBorder=this.grid.renderBorder(f)),this.grid.lowerBorder&&(this.grid.lowerBorder.attr({stroke:v.lineColor,"stroke-width":v.lineWidth}),this.grid.lowerBorder.animate({d:f})));this.grid.axisLineExtra?
(this.grid.axisLineExtra.attr({stroke:v.lineColor,"stroke-width":v.lineWidth}),this.grid.axisLineExtra.animate({d:m})):this.grid.axisLineExtra=this.grid.renderBorder(m);this.axisLine[this.showAxis?"show":"hide"]()}}(a&&a.columns||[]).forEach(function(a){return a.render()});if(!this.horiz&&this.chart.hasRendered&&(this.scrollbar||this.linkedParent&&this.linkedParent.scrollbar)){a=this.tickmarkOffset;v=this.tickPositions[this.tickPositions.length-1];m=this.tickPositions[0];for(d=f=void 0;(f=this.hiddenLabels.pop())&&
f.element;)f.show();for(;(d=this.hiddenMarks.pop())&&d.element;)d.show();(f=this.ticks[m].label)&&(b-m>a?this.hiddenLabels.push(f.hide()):f.show());(f=this.ticks[v].label)&&(v-c>a?this.hiddenLabels.push(f.hide()):f.show());(b=this.ticks[v].mark)&&v-c<a&&0<v-c&&this.ticks[v].isLast&&this.hiddenMarks.push(b.hide())}}}function y(){var a=this.tickPositions&&this.tickPositions.info,b=this.options,c=this.userOptions.labels||{};(b.grid||{}).enabled&&(this.horiz?(this.series.forEach(function(a){a.options.pointRange=
0}),a&&b.dateTimeLabelFormats&&b.labels&&!A(c.align)&&(!1===b.dateTimeLabelFormats[a.unitName].range||1<a.count)&&(b.labels.align="left",A(c.x)||(b.labels.x=3))):"treegrid"!==this.options.type&&this.grid&&this.grid.columns&&(this.minPointOffset=this.tickInterval))}function a(a){var k=this.options;a=a.userOptions;var b=k&&l.isObject(k.grid,!0)?k.grid:{};if(!0===b.enabled){var c=w(!0,{className:"highcharts-grid-axis "+(a.className||""),dateTimeLabelFormats:{hour:{list:["%H:%M","%H"]},day:{list:["%A, %e. %B",
"%a, %e. %b","%E"]},week:{list:["Week %W","W%W"]},month:{list:["%B","%b","%o"]}},grid:{borderWidth:1},labels:{padding:2,style:{fontSize:"0.9em"}},margin:0,title:{text:null,reserveSpace:!1,rotation:0},units:[["millisecond",[1,10,100]],["second",[1,10]],["minute",[1,5,15]],["hour",[1,6]],["day",[1]],["week",[1]],["month",[1]],["year",null]]},a);"xAxis"===this.coll&&(A(a.linkedTo)&&!A(a.tickPixelInterval)&&(c.tickPixelInterval=350),A(a.tickPixelInterval)||!A(a.linkedTo)||A(a.tickPositioner)||A(a.tickInterval)||
(c.tickPositioner=function(a,k){var b=this.linkedParent&&this.linkedParent.tickPositions&&this.linkedParent.tickPositions.info;if(b){for(var v=c.units||[],d=void 0,f=1,D="year",g=0;g<v.length;g++){var w=v[g];if(w&&w[0]===b.unitName){d=g;break}}(v=m(d)&&v[d+1])?(D=v[0]||"year",f=(f=v[1])&&f[0]||1):"year"===b.unitName&&(f=10*b.count);b=H[D];this.tickInterval=b*f;return this.chart.time.getTimeTicks({unitRange:b,count:f,unitName:D},a,k,this.options.startOfWeek)}}));w(!0,this.options,c);this.horiz&&(k.minPadding=
M(a.minPadding,0),k.maxPadding=M(a.maxPadding,0));m(k.grid.borderWidth)&&(k.tickWidth=k.lineWidth=b.borderWidth)}}function z(a){a=(a=a.userOptions)&&a.grid||{};var b=a.columns;a.enabled&&b&&w(!0,this.options,b[b.length-1])}function C(){(this.grid.columns||[]).forEach(function(a){return a.setScale()})}function I(a){var b=this.horiz,k=this.maxLabelDimensions,c=this.options.grid;c=void 0===c?{}:c;if(c.enabled&&k){var m=2*this.options.labels.distance;b=b?c.cellHeight||m+k.height:m+k.width;f(a.tickSize)?
a.tickSize[0]=b:a.tickSize=[b,0]}}function g(){this.axes.forEach(function(a){(a.grid&&a.grid.columns||[]).forEach(function(a){a.setAxisSize();a.setAxisTranslation()})})}function p(a){var b=this.grid;(b.columns||[]).forEach(function(b){return b.destroy(a.keepEvents)});b.columns=void 0}function n(a){a=a.userOptions||{};var b=a.grid||{};b.enabled&&A(b.borderColor)&&(a.tickColor=a.lineColor=b.borderColor);this.grid||(this.grid=new Q(this));this.hiddenLabels=[];this.hiddenMarks=[]}function c(a){var b=
this.label,c=this.axis,k=c.reversed,d=c.chart,f=c.options.grid||{},g=c.options.labels,w=g.align,h=J[c.side],n=a.tickmarkOffset,p=c.tickPositions,q=this.pos-n;p=m(p[a.index+1])?p[a.index+1]-n:(c.max||0)+n;var H=c.tickSize("tick");n=H?H[0]:0;H=H?H[1]/2:0;if(!0===f.enabled){if("top"===h){f=c.top+c.offset;var u=f-n}else"bottom"===h?(u=d.chartHeight-c.bottom+c.offset,f=u+n):(f=c.top+c.len-(c.translate(k?p:q)||0),u=c.top+c.len-(c.translate(k?q:p)||0));"right"===h?(h=d.chartWidth-c.right+c.offset,k=h+n):
"left"===h?(k=c.left+c.offset,h=k-n):(h=Math.round(c.left+(c.translate(k?p:q)||0))-H,k=Math.min(Math.round(c.left+(c.translate(k?q:p)||0))-H,c.left+c.len));this.slotWidth=k-h;a.pos.x="left"===w?h:"right"===w?k:h+(k-h)/2;a.pos.y=u+(f-u)/2;b&&(d=d.renderer.fontMetrics(b),b=b.getBBox().height,a.pos.y=g.useHTML?a.pos.y+(d.b+-(b/2)):a.pos.y+((d.b-(d.h-d.f))/2+-((Math.round(b/d.h)-1)*d.h/2)));a.pos.x+=c.horiz&&g.x||0}}function q(a){var b=a.axis,c=a.value;if(b.options.grid&&b.options.grid.enabled){var k=
b.tickPositions,f=(b.linkedParent||b).series[0],m=c===k[0];k=c===k[k.length-1];var g=f&&d(f.options.data,function(a){return a[b.isXAxis?"x":"y"]===c}),h=void 0;g&&f.is("gantt")&&(h=w(g),t.seriesTypes.gantt.prototype.pointClass.setGanttPointAliases(h));a.isFirst=m;a.isLast=k;a.point=h}}function u(){var a=this.options,b=this.categories,c=this.tickPositions,d=c[0],f=c[c.length-1],m=this.linkedParent&&this.linkedParent.min||this.min,g=this.linkedParent&&this.linkedParent.max||this.max,h=this.tickInterval;
!0!==(a.grid||{}).enabled||b||!this.horiz&&!this.isLinked||(d<m&&d+h>m&&!a.startOnTick&&(c[0]=m),f>g&&f-h<g&&!a.endOnTick&&(c[c.length-1]=g))}function L(a){var b=this.options.grid;return!0===(void 0===b?{}:b).enabled&&this.categories?this.tickInterval:a.apply(this,Array.prototype.slice.call(arguments,1))}var K=t.dateFormats,b=l.addEvent,A=l.defined,h=l.erase,d=l.find,f=l.isArray,m=l.isNumber,w=l.merge,M=l.pick,H=l.timeUnits,P=l.wrap,J;(function(a){a[a.top=0]="top";a[a.right=1]="right";a[a.bottom=
2]="bottom";a[a.left=3]="left"})(J||(J={}));var N=[],Q=function(){function a(a){this.axis=a}a.prototype.isOuterAxis=function(){var a=this.axis,b=a.grid.columnIndex,c=a.linkedParent&&a.linkedParent.grid.columns||a.grid.columns,d=b?a.linkedParent:a,f=-1,k=0;(a.chart[a.coll]||[]).forEach(function(b,c){b.side!==a.side||b.options.isInternal||(k=c,b===d&&(f=c))});return k===f&&(m(b)?c.length===b:!0)};a.prototype.renderBorder=function(a){var b=this.axis,c=b.chart.renderer,d=b.options;a=c.path(a).addClass("highcharts-axis-line").add(b.axisBorder);
c.styledMode||a.attr({stroke:d.lineColor,"stroke-width":d.lineWidth,zIndex:7});return a};return a}();K.E=function(a){return this.dateFormat("%a",a,!0).charAt(0)};K.W=function(a){var b=this,c=new this.Date(a);["Hours","Milliseconds","Minutes","Seconds"].forEach(function(a){b.set(a,c,0)});var d=(this.get("Day",c)+6)%7;a=new this.Date(c.valueOf());this.set("Date",a,this.get("Date",c)-d+3);d=new this.Date(this.get("FullYear",a),0,1);4!==this.get("Day",d)&&(this.set("Month",c,0),this.set("Date",c,1+(11-
this.get("Day",d))%7));return(1+Math.floor((a.valueOf()-d.valueOf())/6048E5)).toString()};"";return{compose:function(d,f,m){l.pushUnique(N,d)&&(d.keepProps.push("grid"),d.prototype.getMaxLabelDimensions=G,P(d.prototype,"unsquish",L),b(d,"init",n),b(d,"afterGetOffset",E),b(d,"afterGetTitlePosition",x),b(d,"afterInit",r),b(d,"afterRender",B),b(d,"afterSetAxisTranslation",y),b(d,"afterSetOptions",a),b(d,"afterSetOptions",z),b(d,"afterSetScale",C),b(d,"afterTickSize",I),b(d,"trimTicks",u),b(d,"destroy",
p));l.pushUnique(N,f)&&b(f,"afterSetChartSize",g);l.pushUnique(N,m)&&(b(m,"afterGetLabelPosition",c),b(m,"labelFormat",q));return d}}});F(e,"Gantt/Tree.js",[e["Core/Utilities.js"]],function(e){function t(e,l,y,a,z,C){var I=0,g=0,p=C&&C.after,n=C&&C.before;l={data:a,depth:y-1,id:e,level:y,parent:l};var c,q;"function"===typeof n&&n(l,C);n=(z[e]||[]).map(function(a){var n=t(a.id,e,y+1,a,z,C),p=a.start;a=!0===a.milestone?p:a.end;c=!E(c)||p<c?p:c;q=!E(q)||a>q?a:q;I=I+1+n.descendants;g=Math.max(n.height+
1,g);return n});a&&(a.start=x(a.start,c),a.end=x(a.end,q));G(l,{children:n,descendants:I,height:g});"function"===typeof p&&p(l,C);return l}function l(e,l){var r=e.reduce(function(a,e){var l=x(e.parent,"");"undefined"===typeof a[l]&&(a[l]=[]);a[l].push(e);return a},{});Object.keys(r).forEach(function(a,e){var z=r[a];""!==a&&-1===l.indexOf(a)&&(z.forEach(function(a){e[""].push(a)}),delete e[a])});return r}var G=e.extend,E=e.isNumber,x=e.pick;return{getListOfParents:l,getNode:t,getTree:function(e,x){var r=
e.map(function(a){return a.id});e=l(e,r);return t("",null,1,null,e,x)}}});F(e,"Core/Axis/TreeGrid/TreeGridTick.js",[e["Core/Utilities.js"]],function(e){function t(){this.treeGrid||(this.treeGrid=new C(this))}function l(a,g){a=a.treeGrid;var p=!a.labelIcon,n=g.renderer,c=g.xy,e=g.options,u=e.width||0,l=e.height||0,z=c.x-u/2-(e.padding||0);c=c.y-l/2;var b=g.collapsed?90:180,r=g.show&&B(c),h=a.labelIcon;h||(a.labelIcon=h=n.path(n.symbols[e.type](e.x||0,e.y||0,u,l)).addClass("highcharts-label-icon").add(g.group));
h[r?"show":"hide"]();n.styledMode||h.attr({cursor:"pointer",fill:y(g.color,"#666666"),"stroke-width":1,stroke:e.lineColor,strokeWidth:e.lineWidth||0});h[p?"attr":"animate"]({translateX:z,translateY:c,rotation:b})}function G(a,g,e,n,c,q,u,l,z){var b=y(this.options&&this.options.labels,q);q=this.pos;var p=this.axis,h="treegrid"===p.options.type;a=a.apply(this,[g,e,n,c,b,u,l,z]);h&&(g=b&&r(b.symbol,!0)?b.symbol:{},b=b&&B(b.indentation)?b.indentation:0,q=(q=(p=p.treeGrid.mapOfPosToGridNode)&&p[q])&&q.depth||
1,a.x+=(g.width||0)+2*(g.padding||0)+(q-1)*b);return a}function E(a){var g=this,e=g.pos,n=g.axis,c=g.label,q=n.treeGrid.mapOfPosToGridNode,u=n.options,z=y(g.options&&g.options.labels,u&&u.labels),t=z&&r(z.symbol,!0)?z.symbol:{},b=(q=q&&q[e])&&q.depth;u="treegrid"===u.type;var A=-1<n.tickPositions.indexOf(e);e=n.chart.styledMode;u&&q&&c&&c.element&&c.addClass("highcharts-treegrid-node-level-"+b);a.apply(g,Array.prototype.slice.call(arguments,1));u&&c&&c.element&&q&&q.descendants&&0<q.descendants&&
(n=n.treeGrid.isCollapsed(q),l(g,{color:!e&&c.styles&&c.styles.color||"",collapsed:n,group:c.parentGroup,options:t,renderer:c.renderer,show:A,xy:c.xy}),t="highcharts-treegrid-node-"+(n?"expanded":"collapsed"),c.addClass("highcharts-treegrid-node-"+(n?"collapsed":"expanded")).removeClass(t),e||c.css({cursor:"pointer"}),[c,g.treeGrid.labelIcon].forEach(function(a){a&&!a.attachedTreeGridEvents&&(x(a.element,"mouseover",function(){c.addClass("highcharts-treegrid-node-active");c.renderer.styledMode||c.css({textDecoration:"underline"})}),
x(a.element,"mouseout",function(){var a=r(z.style)?z.style:{};c.removeClass("highcharts-treegrid-node-active");c.renderer.styledMode||c.css({textDecoration:a.textDecoration})}),x(a.element,"click",function(){g.treeGrid.toggleCollapse()}),a.attachedTreeGridEvents=!0)}))}var x=e.addEvent,r=e.isObject,B=e.isNumber,y=e.pick,a=e.wrap,z=[],C=function(){function l(a){this.tick=a}l.compose=function(g){e.pushUnique(z,g)&&(x(g,"init",t),a(g.prototype,"getLabelPosition",G),a(g.prototype,"renderLabel",E),g.prototype.collapse=
function(a){this.treeGrid.collapse(a)},g.prototype.expand=function(a){this.treeGrid.expand(a)},g.prototype.toggleCollapse=function(a){this.treeGrid.toggleCollapse(a)})};l.prototype.collapse=function(a){var g=this.tick,e=g.axis,c=e.brokenAxis;c&&e.treeGrid.mapOfPosToGridNode&&(g=e.treeGrid.collapse(e.treeGrid.mapOfPosToGridNode[g.pos]),c.setBreaks(g,y(a,!0)))};l.prototype.destroy=function(){this.labelIcon&&this.labelIcon.destroy()};l.prototype.expand=function(a){var g=this.tick,e=g.axis,c=e.brokenAxis;
c&&e.treeGrid.mapOfPosToGridNode&&(g=e.treeGrid.expand(e.treeGrid.mapOfPosToGridNode[g.pos]),c.setBreaks(g,y(a,!0)))};l.prototype.toggleCollapse=function(a){var g=this.tick,e=g.axis,c=e.brokenAxis;c&&e.treeGrid.mapOfPosToGridNode&&(g=e.treeGrid.toggleCollapse(e.treeGrid.mapOfPosToGridNode[g.pos]),c.setBreaks(g,y(a,!0)))};return l}();return C});F(e,"Series/TreeUtilities.js",[e["Core/Color/Color.js"],e["Core/Utilities.js"]],function(e,t){function l(a,e){var r=e.before,z=e.idRoot,g=e.mapIdToNode[z],
p=e.points[a.i],n=p&&p.options||{},c=[],q=0;a.levelDynamic=a.level-(!1!==e.levelIsConstant?0:g.level);a.name=y(p&&p.name,"");a.visible=z===a.id||!0===e.visible;"function"===typeof r&&(a=r(a,e));a.children.forEach(function(g,n){var p=G({},e);G(p,{index:n,siblings:a.children.length,visible:a.visible});g=l(g,p);c.push(g);g.visible&&(q+=g.val)});r=y(n.value,q);a.visible=0<=r&&(0<q||a.visible);a.children=c;a.childrenTotal=q;a.isLeaf=a.visible&&!q;a.val=r;return a}var G=t.extend,E=t.isArray,x=t.isNumber,
r=t.isObject,B=t.merge,y=t.pick;return{getColor:function(a,l){var r=l.index,t=l.mapOptionsToLevel,g=l.parentColor,p=l.parentColorIndex,n=l.series,c=l.colors,q=l.siblings,u=n.points,z=n.chart.options.chart,x;if(a){u=u[a.i];a=t[a.level]||{};if(t=u&&a.colorByPoint){var b=u.index%(c?c.length:z.colorCount);var A=c&&c[b]}if(!n.chart.styledMode){c=u&&u.options.color;z=a&&a.color;if(x=g)x=(x=a&&a.colorVariation)&&"brightness"===x.key&&r&&q?e.parse(g).brighten(r/q*x.to).get():g;x=y(c,z,A,x,n.color)}var h=
y(u&&u.options.colorIndex,a&&a.colorIndex,b,p,l.colorIndex)}return{color:x,colorIndex:h}},getLevelOptions:function(a){var e={};if(r(a)){var l=x(a.from)?a.from:1;var t=a.levels;var g={};var p=r(a.defaults)?a.defaults:{};E(t)&&(g=t.reduce(function(a,c){if(r(c)&&x(c.level)){var e=B({},c);var g=y(e.levelIsConstant,p.levelIsConstant);delete e.levelIsConstant;delete e.level;c=c.level+(g?0:l-1);r(a[c])?B(!0,a[c],e):a[c]=e}return a},{}));t=x(a.to)?a.to:1;for(a=0;a<=t;a++)e[a]=B({},p,r(g[a])?g[a]:{})}return e},
setTreeValues:l,updateRootId:function(a){if(r(a)){var e=r(a.options)?a.options:{};e=y(a.rootNode,e.rootId,"");r(a.userOptions)&&(a.userOptions.rootId=e);a.rootNode=e}return e}}});F(e,"Core/Axis/TreeGrid/TreeGridAxis.js",[e["Core/Axis/BrokenAxis.js"],e["Core/Axis/GridAxis.js"],e["Gantt/Tree.js"],e["Core/Axis/TreeGrid/TreeGridTick.js"],e["Series/TreeUtilities.js"],e["Core/Utilities.js"]],function(e,t,l,F,E,x){function r(a,b){var c=a.collapseEnd||0;a=a.collapseStart||0;c>=b&&(a-=.5);return{from:a,to:c,
showPoints:!1}}function B(a,b,c){var d=[],e=[],f={},m="boolean"===typeof b?b:!1,g={},h=-1;a=l.getTree(a,{after:function(a){a=g[a.pos];var b=0,c=0;a.children.forEach(function(a){c+=(a.descendants||0)+1;b=Math.max((a.height||0)+1,b)});a.descendants=c;a.height=b;a.collapsed&&e.push(a)},before:function(a){function b(a){return a.name===e}var c=q(a.data,!0)?a.data:{},e=u(c.name)?c.name:"",k=f[a.parent];k=q(k,!0)?g[k.pos]:null;var w;if(m&&q(k,!0)&&(w=p(k.children,b))){var l=w.pos;w.nodes.push(a)}else l=
h++;g[l]||(g[l]=w={depth:k?k.depth+1:0,name:e,id:c.id,nodes:[a],children:[],pos:l},-1!==l&&d.push(e),q(k,!0)&&k.children.push(w));u(a.id)&&(f[a.id]=a);w&&!0===c.collapsed&&(w.collapsed=!0);a.pos=l}});g=function(a,b){function c(a,d,e){var f=d+(-1===d?0:b-1),g=(f-d)/2,m=d+g;a.nodes.forEach(function(a){var b=a.data;q(b,!0)&&(b.y=d+(b.seriesIndex||0),delete b.seriesIndex);a.pos=m});e[m]=a;a.pos=m;a.tickmarkOffset=g+.5;a.collapseStart=f+.5;a.children.forEach(function(a){c(a,f+1,e);f=(a.collapseEnd||0)-
.5});a.collapseEnd=f+.5;return e}return c(a["-1"],-1,{})}(g,c);return{categories:d,mapOfIdToNode:f,mapOfPosToGridNode:g,collapsedNodes:e,tree:a}}function y(a){a.target.axes.filter(function(a){return"treegrid"===a.options.type}).forEach(function(b){var d=b.options||{},e=d.labels,f=d.uniqueNames;d=d.max;var g=0;if(!b.treeGrid.mapOfPosToGridNode||b.series.some(function(a){return!a.hasRendered||a.isDirtyData||a.isDirty})){var m=b.series.reduce(function(a,b){b.visible&&((b.options.data||[]).forEach(function(c){b.options.keys&&
b.options.keys.length&&(c=b.pointClass.prototype.optionsToObject.call({series:b},c),b.pointClass.setGanttPointAliases(c));q(c,!0)&&(c.seriesIndex=g,a.push(c))}),!0===f&&g++);return a},[]);if(d&&m.length<d)for(var h=m.length;h<=d;h++)m.push({name:h+"\u200b"});d=B(m,f||!1,!0===f?g:1);b.categories=d.categories;b.treeGrid.mapOfPosToGridNode=d.mapOfPosToGridNode;b.hasNames=!0;b.treeGrid.tree=d.tree;b.series.forEach(function(a){var b=(a.options.data||[]).map(function(b){c(b)&&a.options.keys&&a.options.keys.length&&
m.forEach(function(a){0<=b.indexOf(a.x)&&0<=b.indexOf(a.x2)&&(b=a)});return q(b,!0)?L(b):b});a.visible&&a.setData(b,!1)});b.treeGrid.mapOptionsToLevel=G({defaults:e,from:1,levels:e&&e.levels,to:b.treeGrid.tree&&b.treeGrid.tree.height});"beforeRender"===a.type&&(b.treeGrid.collapsedNodes=d.collapsedNodes)}})}function a(a,b){var c=this.treeGrid.mapOptionsToLevel||{},d=this.ticks,e=d[b],g;if("treegrid"===this.options.type&&this.treeGrid.mapOfPosToGridNode){var f=this.treeGrid.mapOfPosToGridNode[b];(c=
c[f.depth])&&(g={labels:c});!e&&h?d[b]=new h(this,b,void 0,void 0,{category:f.name,tickmarkOffset:f.tickmarkOffset,options:g}):(e.parameters.category=f.name,e.options=g,e.addLabel())}else a.apply(this,Array.prototype.slice.call(arguments,1))}function z(a,b,c,e){var f=this,m="treegrid"===c.type;f.treeGrid||(f.treeGrid=new d(f));m&&(g(b,"beforeRender",y),g(b,"beforeRedraw",y),g(b,"addSeries",function(a){a.options.data&&(a=B(a.options.data,c.uniqueNames||!1,1),f.treeGrid.collapsedNodes=(f.treeGrid.collapsedNodes||
[]).concat(a.collapsedNodes))}),g(f,"foundExtremes",function(){f.treeGrid.collapsedNodes&&f.treeGrid.collapsedNodes.forEach(function(a){var b=f.treeGrid.collapse(a);f.brokenAxis&&(f.brokenAxis.setBreaks(b,!1),f.treeGrid.collapsedNodes&&(f.treeGrid.collapsedNodes=f.treeGrid.collapsedNodes.filter(function(b){return a.collapseStart!==b.collapseStart||a.collapseEnd!==b.collapseEnd})))})}),g(f,"afterBreaks",function(){"yAxis"===f.coll&&!f.staticScale&&f.chart.options.chart.height&&(f.isDirty=!0)}),c=L({grid:{enabled:!0},
labels:{align:"left",levels:[{level:void 0},{level:1,style:{fontWeight:"bold"}}],symbol:{type:"triangle",x:-5,y:-5,height:10,width:10,padding:5}},uniqueNames:!1},c,{reversed:!0,grid:{columns:void 0}}));a.apply(f,[b,c,e]);m&&(f.hasNames=!0,f.options.showLastLabel=!0)}function C(a){var b=this.options;"treegrid"===b.type?(this.min=K(this.userMin,b.min,this.dataMin),this.max=K(this.userMax,b.max,this.dataMax),n(this,"foundExtremes"),this.setAxisTranslation(),this.tickmarkOffset=.5,this.tickInterval=1,
this.tickPositions=this.treeGrid.mapOfPosToGridNode?this.treeGrid.getTickPositions():[]):a.apply(this,Array.prototype.slice.call(arguments,1))}var G=E.getLevelOptions,g=x.addEvent,p=x.find,n=x.fireEvent,c=x.isArray,q=x.isObject,u=x.isString,L=x.merge,K=x.pick,b=x.wrap,A=[],h,d=function(){function c(a){this.axis=a}c.compose=function(c,d,f,g){if(x.pushUnique(A,c)){-1===c.keepProps.indexOf("treeGrid")&&c.keepProps.push("treeGrid");var m=c.prototype;b(m,"generateTick",a);b(m,"init",z);b(m,"setTickInterval",
C);m.utils={getNode:l.getNode}}x.pushUnique(A,g)&&(h||(h=g));t.compose(c,d,g);e.compose(c,f);F.compose(g);return c};c.prototype.setCollapsedStatus=function(a){var b=this.axis,c=b.chart;b.series.forEach(function(b){var d=b.options.data;if(a.id&&d){var e=c.get(a.id);b=d[b.data.indexOf(e)];e&&b&&(e.collapsed=a.collapsed,b.collapsed=a.collapsed)}})};c.prototype.collapse=function(a){var b=this.axis,c=b.options.breaks||[],d=r(a,b.max);c.push(d);a.collapsed=!0;b.treeGrid.setCollapsedStatus(a);return c};
c.prototype.expand=function(a){var b=this.axis,c=b.options.breaks||[],d=r(a,b.max);a.collapsed=!1;b.treeGrid.setCollapsedStatus(a);return c.reduce(function(a,b){b.to===d.to&&b.from===d.from||a.push(b);return a},[])};c.prototype.getTickPositions=function(){var a=this.axis,b=Math.floor(a.min/a.tickInterval)*a.tickInterval,c=Math.ceil(a.max/a.tickInterval)*a.tickInterval;return Object.keys(a.treeGrid.mapOfPosToGridNode||{}).reduce(function(d,e){e=+e;!(e>=b&&e<=c)||a.brokenAxis&&a.brokenAxis.isInAnyBreak(e)||
d.push(e);return d},[])};c.prototype.isCollapsed=function(a){var b=this.axis,c=b.options.breaks||[],d=r(a,b.max);return c.some(function(a){return a.from===d.from&&a.to===d.to})};c.prototype.toggleCollapse=function(a){return this.isCollapsed(a)?this.expand(a):this.collapse(a)};return c}();return d});F(e,"masters/modules/treegrid.src.js",[e["Core/Globals.js"],e["Core/Axis/TreeGrid/TreeGridAxis.js"]],function(e,t){t.compose(e.Axis,e.Chart,e.Series,e.Tick)})});//# sourceMappingURL=treegrid.js.map