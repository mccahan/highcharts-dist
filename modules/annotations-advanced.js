/*
 Highcharts JS v11.1.0 (2023-08-20)

 Annotations module

 (c) 2009-2021 Torstein Honsi

 License: www.highcharts.com/license
*/
'use strict';(function(d){"object"===typeof module&&module.exports?(d["default"]=d,module.exports=d):"function"===typeof define&&define.amd?define("highcharts/modules/annotations-advanced",["highcharts"],function(p){d(p);d.Highcharts=p;return d}):d("undefined"!==typeof Highcharts?Highcharts:void 0)})(function(d){function p(d,l,k,h){d.hasOwnProperty(l)||(d[l]=h.apply(null,k),"function"===typeof CustomEvent&&window.dispatchEvent(new CustomEvent("HighchartsModuleLoaded",{detail:{path:l,module:d[l]}})))}
d=d?d._modules:{};p(d,"Extensions/Annotations/AnnotationChart.js",[d["Core/Utilities.js"]],function(d){function l(a,b){a=this.initAnnotation(a);this.options.annotations.push(a.options);g(b,!0)&&(a.redraw(),a.graphic.attr({opacity:1}));return a}function k(){const a=this;a.plotBoxClip=this.renderer.clipRect(this.plotBox);a.controlPointsGroup=a.renderer.g("control-points").attr({zIndex:99}).clip(a.plotBoxClip).add();a.options.annotations.forEach((b,c)=>{if(!a.annotations.some(a=>a.options===b)){const n=
a.initAnnotation(b);a.options.annotations[c]=n.options}});a.drawAnnotations();b(a,"redraw",a.drawAnnotations);b(a,"destroy",function(){a.plotBoxClip.destroy();a.controlPointsGroup.destroy()});b(a,"exportData",function(b){function c(a){let b;if(n&&(b=n(a),!1!==b))return b;b=f+" "+a;return g?{columnTitle:b,topLevelColumnTitle:b}:b}const n=(this.options.exporting&&this.options.exporting.csv||{}).columnHeaderFormatter,g=!b.dataRows[1].xValues,f=a.options.lang&&a.options.lang.exportData&&a.options.lang.exportData.annotationHeader,
r=b.dataRows[0].length,e=a.options.exporting&&a.options.exporting.csv&&a.options.exporting.csv.annotations&&a.options.exporting.csv.annotations.itemDelimiter,m=a.options.exporting&&a.options.exporting.csv&&a.options.exporting.csv.annotations&&a.options.exporting.csv.annotations.join;a.annotations.forEach(a=>{a.options.labelOptions&&a.options.labelOptions.includeInDataExport&&a.labels.forEach(a=>{if(a.options.text){const c=a.options.text;a.points.forEach(a=>{const n=a.x,g=a.series.xAxis?a.series.xAxis.index:
-1;let f=!1;if(-1===g){a=b.dataRows[0].length;var q=Array(a);for(var t=0;t<a;++t)q[t]="";q.push(c);q.xValues=[];q.xValues[g]=n;b.dataRows.push(q);f=!0}f||b.dataRows.forEach(a=>{!f&&a.xValues&&void 0!==g&&n===a.xValues[g]&&(m&&a.length>r?a[a.length-1]+=e+c:a.push(c),f=!0)});if(!f){a=b.dataRows[0].length;q=Array(a);for(t=0;t<a;++t)q[t]="";q[0]=n;q.push(c);q.xValues=[];void 0!==g&&(q.xValues[g]=n);b.dataRows.push(q)}})}})});let q=0;b.dataRows.forEach(a=>{q=Math.max(q,a.length)});const d=q-b.dataRows[0].length;
for(let a=0;a<d;a++){const n=c(a+1);g?(b.dataRows[0].push(n.topLevelColumnTitle),b.dataRows[1].push(n.columnTitle)):b.dataRows[0].push(n)}})}function h(){this.plotBoxClip.attr(this.plotBox);this.annotations.forEach(a=>{a.redraw();a.graphic.animate({opacity:1},a.animationConfig)})}function e(a){const b=this.annotations,c="annotations"===a.coll?a:f(b,function(b){return b.options.id===a});c&&(r(c,"remove"),m(this.options.annotations,c.options),m(b,c),c.destroy())}function c(){this.annotations=[];this.options.annotations||
(this.options.annotations=[])}function a(a){this.chart.hasDraggedAnnotation||a.apply(this,Array.prototype.slice.call(arguments,1))}const {addEvent:b,erase:m,find:f,fireEvent:r,pick:g,wrap:q}=d,x=[];var y;(function(g){g.compose=function(g,f,n){d.pushUnique(x,f)&&(b(f,"afterInit",c),f=f.prototype,f.addAnnotation=l,f.callbacks.push(k),f.collectionsWithInit.annotations=[l],f.collectionsWithUpdate.push("annotations"),f.drawAnnotations=h,f.removeAnnotation=e,f.initAnnotation=function(a){a=new (g.types[a.type]||
g)(this,a);this.annotations.push(a);return a});d.pushUnique(x,n)&&q(n.prototype,"onContainerMouseDown",a)}})(y||(y={}));return y});p(d,"Extensions/Annotations/AnnotationDefaults.js",[d["Core/Utilities.js"]],function(d){const {defined:l}=d;return{visible:!0,animation:{},crop:!0,draggable:"xy",labelOptions:{align:"center",allowOverlap:!1,backgroundColor:"rgba(0, 0, 0, 0.75)",borderColor:"#000000",borderRadius:3,borderWidth:1,className:"highcharts-no-tooltip",crop:!1,formatter:function(){return l(this.y)?
""+this.y:"Annotation label"},includeInDataExport:!0,overflow:"justify",padding:5,shadow:!1,shape:"callout",style:{fontSize:"0.7em",fontWeight:"normal",color:"contrast"},useHTML:!1,verticalAlign:"bottom",x:0,y:-16},shapeOptions:{stroke:"rgba(0, 0, 0, 0.75)",strokeWidth:1,fill:"rgba(0, 0, 0, 0.75)",r:0,snap:2},controlPointOptions:{events:{},style:{cursor:"pointer",fill:"#ffffff",stroke:"#000000","stroke-width":2},height:10,symbol:"circle",visible:!1,width:10},events:{},zIndex:6}});p(d,"Extensions/Annotations/EventEmitter.js",
[d["Core/Globals.js"],d["Core/Utilities.js"]],function(d,l){const {doc:k,isTouchDevice:h}=d,{addEvent:e,fireEvent:c,objectEach:a,pick:b,removeEvent:m}=l;class f{addEvents(){function b(a){e(a,h?"touchstart":"mousedown",a=>{g.onMouseDown(a)},{passive:!1})}const g=this;b(this.graphic.element);(g.labels||[]).forEach(a=>{a.options.useHTML&&a.graphic.text&&b(a.graphic.text.element)});a(g.options.events,(a,b)=>{function c(c){"click"===b&&g.cancelClick||a.call(g,g.chart.pointer.normalize(c),g.target)}if(-1===
(g.nonDOMEvents||[]).indexOf(b))g.graphic.on(b,c);else e(g,b,c,{passive:!1})});if(g.options.draggable&&(e(g,"drag",g.onDrag),!g.graphic.renderer.styledMode)){const a={cursor:{x:"ew-resize",y:"ns-resize",xy:"move"}[g.options.draggable]};g.graphic.css(a);(g.labels||[]).forEach(b=>{b.options.useHTML&&b.graphic.text&&b.graphic.text.css(a)})}g.isUpdating||c(g,"add")}destroy(){this.removeDocEvents();m(this);this.hcEvents=null}mouseMoveToRadians(a,b,c){let g=a.prevChartY-c,f=a.prevChartX-b;c=a.chartY-c;
a=a.chartX-b;this.chart.inverted&&(b=f,f=g,g=b,b=a,a=c,c=b);return Math.atan2(c,a)-Math.atan2(g,f)}mouseMoveToScale(a,b,c){b=(a.chartX-b||1)/(a.prevChartX-b||1);a=(a.chartY-c||1)/(a.prevChartY-c||1);this.chart.inverted&&(c=a,a=b,b=c);return{x:b,y:a}}mouseMoveToTranslation(a){let b=a.chartX-a.prevChartX;a=a.chartY-a.prevChartY;let c;this.chart.inverted&&(c=a,a=b,b=c);return{x:b,y:a}}onDrag(a){if(this.chart.isInsidePlot(a.chartX-this.chart.plotLeft,a.chartY-this.chart.plotTop,{visiblePlotOnly:!0})){const b=
this.mouseMoveToTranslation(a);"x"===this.options.draggable&&(b.y=0);"y"===this.options.draggable&&(b.x=0);this.points.length?this.translate(b.x,b.y):(this.shapes.forEach(a=>a.translate(b.x,b.y)),this.labels.forEach(a=>a.translate(b.x,b.y)));this.redraw(!1)}}onMouseDown(a){a.preventDefault&&a.preventDefault();if(2!==a.button){var f=this,m=f.chart.pointer;a=m.normalize(a);var d=a.chartX,r=a.chartY;f.cancelClick=!1;f.chart.hasDraggedAnnotation=!0;f.removeDrag=e(k,h?"touchmove":"mousemove",function(a){f.hasDragged=
!0;a=m.normalize(a);a.prevChartX=d;a.prevChartY=r;c(f,"drag",a);d=a.chartX;r=a.chartY},h?{passive:!1}:void 0);f.removeMouseUp=e(k,h?"touchend":"mouseup",function(a){const e=b(f.target&&f.target.annotation,f.target);e&&(e.cancelClick=f.hasDragged);f.cancelClick=f.hasDragged;f.hasDragged=!1;f.chart.hasDraggedAnnotation=!1;c(b(e,f),"afterUpdate");f.onMouseUp(a)},h?{passive:!1}:void 0)}}onMouseUp(){var a=this.chart;const b=this.target||this,c=a.options.annotations;a=a.annotations.indexOf(b);this.removeDocEvents();
c[a]=b.options}removeDocEvents(){this.removeDrag&&(this.removeDrag=this.removeDrag());this.removeMouseUp&&(this.removeMouseUp=this.removeMouseUp())}}return f});p(d,"Extensions/Annotations/ControlPoint.js",[d["Extensions/Annotations/EventEmitter.js"],d["Core/Utilities.js"]],function(d,l){const {merge:k,pick:h}=l;class e extends d{constructor(c,a,b,e){super();this.graphic=void 0;this.nonDOMEvents=["drag"];this.chart=c;this.target=a;this.options=b;this.index=h(b.index,e)}destroy(){super.destroy();this.graphic&&
(this.graphic=this.graphic.destroy());this.options=this.target=this.chart=null}redraw(c){this.graphic[c?"animate":"attr"](this.options.positioner.call(this,this.target))}render(){const c=this.chart,a=this.options;this.graphic=c.renderer.symbol(a.symbol,0,0,a.width,a.height).add(c.controlPointsGroup).css(a.style);this.setVisibility(a.visible);this.addEvents()}setVisibility(c){this.graphic[c?"show":"hide"]();this.options.visible=c}update(c){const a=this.chart,b=this.target,e=this.index;c=k(!0,this.options,
c);this.destroy();this.constructor(a,b,c,e);this.render(a.controlPointsGroup);this.redraw()}}"";return e});p(d,"Extensions/Annotations/MockPoint.js",[d["Core/Series/SeriesRegistry.js"],d["Core/Utilities.js"]],function(d,l){const {series:{prototype:k}}=d,{defined:h,fireEvent:e}=l;class c{static fromPoint(a){return new c(a.series.chart,null,{x:a.x,y:a.y,xAxis:a.series.xAxis,yAxis:a.series.yAxis})}static pointToPixels(a,b){const c=a.series,f=c.chart;let e=a.plotX||0,g=a.plotY||0;f.inverted&&(a.mock?
(e=a.plotY,g=a.plotX):(e=f.plotWidth-(a.plotY||0),g=f.plotHeight-(a.plotX||0)));c&&!b&&(a=c.getPlotBox(),e+=a.translateX,g+=a.translateY);return{x:e,y:g}}static pointToOptions(a){return{x:a.x,y:a.y,xAxis:a.series.xAxis,yAxis:a.series.yAxis}}constructor(a,b,c){this.plotY=this.plotX=void 0;this.mock=!0;this.series={visible:!0,chart:a,getPlotBox:k.getPlotBox};this.target=b||null;this.options=c;this.applyOptions(this.getOptions())}applyOptions(a){this.command=a.command;this.setAxis(a,"x");this.setAxis(a,
"y");this.refresh()}getLabelConfig(){return{x:this.x,y:this.y,point:this}}getOptions(){return this.hasDynamicOptions()?this.options(this.target):this.options}hasDynamicOptions(){return"function"===typeof this.options}isInsidePlot(){const a=this.plotX,b=this.plotY,c=this.series.xAxis,f=this.series.yAxis,d={x:a,y:b,isInsidePlot:!0,options:{}};c&&(d.isInsidePlot=h(a)&&0<=a&&a<=c.len);f&&(d.isInsidePlot=d.isInsidePlot&&h(b)&&0<=b&&b<=f.len);e(this.series.chart,"afterIsInsidePlot",d);return d.isInsidePlot}refresh(){var a=
this.series;const b=a.xAxis;a=a.yAxis;const c=this.getOptions();b?(this.x=c.x,this.plotX=b.toPixels(c.x,!0)):(this.x=void 0,this.plotX=c.x);a?(this.y=c.y,this.plotY=a.toPixels(c.y,!0)):(this.y=null,this.plotY=c.y);this.isInside=this.isInsidePlot()}refreshOptions(){var a=this.series;const b=a.xAxis;a=a.yAxis;this.x=this.options.x=b?this.options.x=b.toValue(this.plotX,!0):this.plotX;this.y=this.options.y=a?a.toValue(this.plotY,!0):this.plotY}rotate(a,b,c){if(!this.hasDynamicOptions()){const f=Math.cos(c);
c=Math.sin(c);const e=this.plotX-a,g=this.plotY-b,m=e*c+g*f;this.plotX=e*f-g*c+a;this.plotY=m+b;this.refreshOptions()}}scale(a,b,c,f){if(!this.hasDynamicOptions()){const e=this.plotY*f;this.plotX=(1-c)*a+this.plotX*c;this.plotY=(1-f)*b+e;this.refreshOptions()}}setAxis(a,b){b+="Axis";a=a[b];const c=this.series.chart;this.series[b]="object"===typeof a?a:h(a)?c[b][a]||c.get(a):null}toAnchor(){const a=[this.plotX,this.plotY,0,0];this.series.chart.inverted&&(a[0]=this.plotY,a[1]=this.plotX);return a}translate(a,
b,c,f){this.hasDynamicOptions()||(this.plotX+=c,this.plotY+=f,this.refreshOptions())}}"";return c});p(d,"Extensions/Annotations/ControlTarget.js",[d["Extensions/Annotations/ControlPoint.js"],d["Extensions/Annotations/MockPoint.js"],d["Core/Utilities.js"]],function(d,l,k){var h;(function(e){function c(){const a=this.controlPoints,b=this.options.controlPoints||[];b.forEach((c,f)=>{c=k.merge(this.options.controlPointOptions,c);c.index||(c.index=f);b[f]=c;a.push(new d(this.chart,this,c))})}function a(a){const b=
a.series.getPlotBox(),c=a.series.chart;var f=a.mock?a.toAnchor():c.tooltip&&c.tooltip.getAnchor.call({chart:a.series.chart},a)||[0,0,0,0];f={x:f[0]+(this.options.x||0),y:f[1]+(this.options.y||0),height:f[2]||0,width:f[3]||0};return{relativePosition:f,absolutePosition:k.merge(f,{x:f.x+(a.mock?b.translateX:c.plotLeft),y:f.y+(a.mock?b.translateY:c.plotTop)})}}function b(){this.controlPoints.forEach(a=>a.destroy());this.options=this.points=this.controlPoints=this.chart=null;this.annotation&&(this.annotation=
null)}function m(){const a=this.options;return a.points||a.point&&k.splat(a.point)}function f(){const a=this.getPointsOptions(),b=this.points,c=a&&a.length||0;let f,e;for(f=0;f<c;f++){e=this.point(a[f],b[f]);if(!e){b.length=0;return}e.mock&&e.refresh();b[f]=e}return b}function r(a,b){if(a&&a.series)return a;b&&null!==b.series||(k.isObject(a)?b=new l(this.chart,this,a):k.isString(a)?b=this.chart.get(a)||null:"function"===typeof a&&(b=a.call(b,this),b=b.series?b:new l(this.chart,this,a)));return b}
function g(a){this.controlPoints.forEach(b=>b.redraw(a))}function q(){this.controlPoints.forEach(a=>a.render())}function x(a,b,c,f,e){if(this.chart.inverted){const a=b;b=c;c=a}this.points.forEach((n,g)=>this.transformPoint(a,b,c,f,e,g),this)}function h(a,b,c,f,e,g){let n=this.points[g];n.mock||(n=this.points[g]=l.fromPoint(n));n[a](b,c,f,e)}function D(a,b){this.transform("translate",null,null,a,b)}function B(a,b,c){this.transformPoint("translate",null,null,a,b,c)}const v=[];e.compose=function(e){k.pushUnique(v,
e)&&k.merge(!0,e.prototype,{addControlPoints:c,anchor:a,destroyControlTarget:b,getPointsOptions:m,linkPoints:f,point:r,redrawControlPoints:g,renderControlPoints:q,transform:x,transformPoint:h,translate:D,translatePoint:B})}})(h||(h={}));return h});p(d,"Extensions/Annotations/Controllables/Controllable.js",[d["Extensions/Annotations/ControlTarget.js"],d["Core/Utilities.js"]],function(d,l){const {merge:k}=l;class h{constructor(e,c,a,b){this.graphic=void 0;this.annotation=e;this.chart=e.chart;this.collection=
"label"===b?"labels":"shapes";this.controlPoints=[];this.options=c;this.points=[];this.index=a;this.itemType=b;this.init(e,c,a)}attr(...e){this.graphic.attr.apply(this.graphic,arguments)}attrsFromOptions(e){const c=this.constructor.attrsMap,a={},b=this.chart.styledMode;let d,f;for(d in e)f=c[d],"undefined"===typeof c[d]||b&&-1!==["fill","stroke","stroke-width"].indexOf(f)||(a[f]=e[d]);return a}destroy(){this.graphic&&(this.graphic=this.graphic.destroy());this.tracker&&(this.tracker=this.tracker.destroy());
this.destroyControlTarget()}init(e,c,a){this.annotation=e;this.chart=e.chart;this.options=c;this.points=[];this.controlPoints=[];this.index=a;this.linkPoints();this.addControlPoints()}redraw(e){this.redrawControlPoints(e)}render(){this.renderControlPoints()}rotate(e,c,a){this.transform("rotate",e,c,a)}scale(e,c,a,b){this.transform("scale",e,c,a,b)}setControlPointsVisibility(e){this.controlPoints.forEach(c=>{c.setVisibility(e)})}shouldBeDrawn(){return!!this.points.length}translateShape(e,c,a){var b=
this.annotation.chart;const d=this.annotation.userOptions,f=b.annotations.indexOf(this.annotation);b=b.options.annotations[f];this.translatePoint(e,c,0);a&&this.translatePoint(e,c,1);b[this.collection][this.index].point=this.options.point;d[this.collection][this.index].point=this.options.point}update(e){var c=this.annotation;const a=k(!0,this.options,e);e=this.graphic.parentGroup;const b=this.constructor;this.destroy();c=new b(c,a,this.index,this.itemType);k(!0,this,c);this.render(e);this.redraw()}}
d.compose(h);"";return h});p(d,"Extensions/Annotations/Controllables/ControllableDefaults.js",[],function(){return{defaultMarkers:{arrow:{tagName:"marker",attributes:{id:"arrow",refY:5,refX:9,markerWidth:10,markerHeight:10},children:[{tagName:"path",attributes:{d:"M 0 0 L 10 5 L 0 10 Z","stroke-width":0}}]},"reverse-arrow":{tagName:"marker",attributes:{id:"reverse-arrow",refY:5,refX:1,markerWidth:10,markerHeight:10},children:[{tagName:"path",attributes:{d:"M 0 5 L 10 0 L 10 10 Z","stroke-width":0}}]}}}});
p(d,"Extensions/Annotations/Controllables/ControllablePath.js",[d["Extensions/Annotations/Controllables/Controllable.js"],d["Extensions/Annotations/Controllables/ControllableDefaults.js"],d["Core/Globals.js"],d["Core/Utilities.js"]],function(d,l,k,h){function e(a){return function(b){this.attr(a,"url(#"+b+")")}}function c(){this.options.defs=g(b,this.options.defs||{})}function a(a,b){const c={attributes:{id:a}},f={stroke:b.color||"none",fill:b.color||"rgba(0, 0, 0, 0.75)"};c.children=b.children&&b.children.map(function(a){return g(f,
a)});b=g(!0,{attributes:{markerWidth:20,markerHeight:20,refX:0,refY:0,orient:"auto"}},b,c);b=this.definition(b);b.id=a;return b}const {defaultMarkers:b}=l,{addEvent:m,defined:f,extend:r,merge:g,uniqueKey:q}=h,x=[],y=e("marker-end"),D=e("marker-start"),B="rgba(192,192,192,"+(k.svg?.0001:.002)+")";class v extends d{static compose(b,f){h.pushUnique(x,b)&&m(b,"afterGetContainer",c);h.pushUnique(x,f)&&(f.prototype.addMarker=a)}constructor(a,b,c){super(a,b,c,"shape");this.type="path"}toD(){var a=this.options.d;
if(a)return"function"===typeof a?a.call(this):a;a=this.points;const b=a.length,c=[];var f=b;let e=a[0],g=f&&this.anchor(e).absolutePosition,d=0;if(g)for(c.push(["M",g.x,g.y]);++d<b&&f;)e=a[d],f=e.command||"L",g=this.anchor(e).absolutePosition,"M"===f?c.push([f,g.x,g.y]):"L"===f?c.push([f,g.x,g.y]):"Z"===f&&c.push([f]),f=e.series.visible;return f&&this.graphic?this.chart.renderer.crispLine(c,this.graphic.strokeWidth()):null}shouldBeDrawn(){return super.shouldBeDrawn()||!!this.options.d}render(a){const b=
this.options,c=this.attrsFromOptions(b);this.graphic=this.annotation.chart.renderer.path([["M",0,0]]).attr(c).add(a);b.className&&this.graphic.addClass(b.className);this.tracker=this.annotation.chart.renderer.path([["M",0,0]]).addClass("highcharts-tracker-line").attr({zIndex:2}).add(a);this.annotation.chart.styledMode||this.tracker.attr({"stroke-linejoin":"round",stroke:B,fill:B,"stroke-width":this.graphic.strokeWidth()+2*b.snap});super.render();r(this.graphic,{markerStartSetter:D,markerEndSetter:y});
this.setMarkers(this)}redraw(a){if(this.graphic){const b=this.toD(),c=a?"animate":"attr";b?(this.graphic[c]({d:b}),this.tracker[c]({d:b})):(this.graphic.attr({d:"M 0 -9000000000"}),this.tracker.attr({d:"M 0 -9000000000"}));this.graphic.placed=this.tracker.placed=!!b}super.redraw(a)}setMarkers(a){const b=a.options,c=a.chart,e=c.options.defs,d=b.fill,m=f(d)&&"none"!==d?d:b.stroke;["markerStart","markerEnd"].forEach(function(f){var d=b[f];let n,r,v;if(d){for(v in e)if(n=e[v],(d===(n.attributes&&n.attributes.id)||
d===n.id)&&"marker"===n.tagName){r=n;break}r&&(d=a[f]=c.renderer.addMarker((b.id||q())+"-"+d,g(r,{color:m})),a.attr(f,d.getAttribute("id")))}})}}v.attrsMap={dashStyle:"dashstyle",strokeWidth:"stroke-width",stroke:"stroke",fill:"fill",zIndex:"zIndex"};return v});p(d,"Extensions/Annotations/Controllables/ControllableRect.js",[d["Extensions/Annotations/Controllables/Controllable.js"],d["Extensions/Annotations/Controllables/ControllablePath.js"],d["Core/Utilities.js"]],function(d,l,k){({merge:k}=k);class h extends d{constructor(e,
c,a){super(e,c,a,"shape");this.type="rect";this.translate=super.translateShape}render(e){const c=this.attrsFromOptions(this.options);this.graphic=this.annotation.chart.renderer.rect(0,-9E9,0,0).attr(c).add(e);super.render()}redraw(e){if(this.graphic){const c=this.anchor(this.points[0]).absolutePosition;if(c)this.graphic[e?"animate":"attr"]({x:c.x,y:c.y,width:this.options.width,height:this.options.height});else this.attr({x:0,y:-9E9});this.graphic.placed=!!c}super.redraw(e)}}h.attrsMap=k(l.attrsMap,
{width:"width",height:"height"});return h});p(d,"Extensions/Annotations/Controllables/ControllableCircle.js",[d["Extensions/Annotations/Controllables/Controllable.js"],d["Extensions/Annotations/Controllables/ControllablePath.js"],d["Core/Utilities.js"]],function(d,l,k){({merge:k}=k);class h extends d{constructor(e,c,a){super(e,c,a,"shape");this.type="circle";this.translate=super.translateShape}redraw(e){if(this.graphic){const c=this.anchor(this.points[0]).absolutePosition;if(c)this.graphic[e?"animate":
"attr"]({x:c.x,y:c.y,r:this.options.r});else this.graphic.attr({x:0,y:-9E9});this.graphic.placed=!!c}super.redraw.call(this,e)}render(e){const c=this.attrsFromOptions(this.options);this.graphic=this.annotation.chart.renderer.circle(0,-9E9,0).attr(c).add(e);super.render()}setRadius(e){this.options.r=e}}h.attrsMap=k(l.attrsMap,{r:"r"});return h});p(d,"Extensions/Annotations/Controllables/ControllableEllipse.js",[d["Extensions/Annotations/Controllables/Controllable.js"],d["Extensions/Annotations/Controllables/ControllablePath.js"],
d["Core/Utilities.js"]],function(d,l,k){const {merge:h,defined:e}=k;class c extends d{constructor(a,b,c){super(a,b,c,"shape");this.type="ellipse"}init(a,b,c){e(b.yAxis)&&b.points.forEach(a=>{a.yAxis=b.yAxis});e(b.xAxis)&&b.points.forEach(a=>{a.xAxis=b.xAxis});super.init(a,b,c)}render(a){this.graphic=this.annotation.chart.renderer.createElement("ellipse").attr(this.attrsFromOptions(this.options)).add(a);super.render()}translate(a,b){super.translateShape(a,b,!0)}getDistanceFromLine(a,b,c,f){return Math.abs((b.y-
a.y)*c-(b.x-a.x)*f+b.x*a.y-b.y*a.x)/Math.sqrt((b.y-a.y)*(b.y-a.y)+(b.x-a.x)*(b.x-a.x))}getAttrs(a,b){var c=a.x,f=a.y;const e=b.x,d=b.y;b=(c+e)/2;a=(f+d)/2;const q=Math.sqrt((c-e)*(c-e)/4+(f-d)*(f-d)/4);f=180*Math.atan((d-f)/(e-c))/Math.PI;b<c&&(f+=180);c=this.getRY();return{cx:b,cy:a,rx:q,ry:c,angle:f}}getRY(){const a=this.getYAxis();return e(a)?Math.abs(a.toPixels(this.options.ry)-a.toPixels(0)):this.options.ry}getYAxis(){return this.chart.yAxis[this.options.yAxis]}getAbsolutePosition(a){return this.anchor(a).absolutePosition}redraw(a){if(this.graphic){const c=
this.getAbsolutePosition(this.points[0]);var b=this.getAbsolutePosition(this.points[1]);b=this.getAttrs(c,b);if(c)this.graphic[a?"animate":"attr"]({cx:b.cx,cy:b.cy,rx:b.rx,ry:b.ry,rotation:b.angle,rotationOriginX:b.cx,rotationOriginY:b.cy});else this.graphic.attr({x:0,y:-9E9});this.graphic.placed=!!c}super.redraw(a)}setYRadius(a){const b=this.annotation.userOptions.shapes;this.options.ry=a;b&&b[0]&&(b[0].ry=a,b[0].ry=a)}}c.attrsMap=h(l.attrsMap,{ry:"ry"});return c});p(d,"Extensions/Annotations/Controllables/ControllableLabel.js",
[d["Extensions/Annotations/Controllables/Controllable.js"],d["Core/Templating.js"],d["Extensions/Annotations/MockPoint.js"],d["Core/Utilities.js"]],function(d,l,k,h){function e(a,c,f,e,d){const g=d&&d.anchorX;d=d&&d.anchorY;let q,n,m=f/2;b(g)&&b(d)&&(q=[["M",g,d]],n=c-d,0>n&&(n=-e-n),n<f&&(m=g<a+f/2?n:f-n),d>c+e?q.push(["L",a+m,c+e]):d<c?q.push(["L",a+m,c]):g<a?q.push(["L",a,c+e/2]):g>a+f&&q.push(["L",a+f,c+e/2]));return q||[]}const {format:c}=l,{extend:a,isNumber:b,pick:m}=h,f=[];class r extends d{static alignedPosition(a,
b){const c=a.align,f=a.verticalAlign;let e=(b.x||0)+(a.x||0),d=(b.y||0)+(a.y||0),g,q;"right"===c?g=1:"center"===c&&(g=2);g&&(e+=(b.width-(a.width||0))/g);"bottom"===f?q=1:"middle"===f&&(q=2);q&&(d+=(b.height-(a.height||0))/q);return{x:Math.round(e),y:Math.round(d)}}static compose(a){h.pushUnique(f,a)&&(a.prototype.symbols.connector=e)}static justifiedOptions(a,b,c,f){const e=c.align,d=c.verticalAlign,g=b.box?0:b.padding||0,n=b.getBBox();b={align:e,verticalAlign:d,x:c.x,y:c.y,width:b.width,height:b.height};
c=(f.x||0)-a.plotLeft;f=(f.y||0)-a.plotTop;let m;m=c+g;0>m&&("right"===e?b.align="left":b.x=(b.x||0)-m);m=c+n.width-g;m>a.plotWidth&&("left"===e?b.align="right":b.x=(b.x||0)+a.plotWidth-m);m=f+g;0>m&&("bottom"===d?b.verticalAlign="top":b.y=(b.y||0)-m);m=f+n.height-g;m>a.plotHeight&&("top"===d?b.verticalAlign="bottom":b.y=(b.y||0)+a.plotHeight-m);return b}constructor(a,b,c){super(a,b,c,"label")}translatePoint(a,b){super.translatePoint(a,b,0)}translate(a,b){var c=this.annotation.chart;const f=this.annotation.userOptions;
var e=c.annotations.indexOf(this.annotation);e=c.options.annotations[e];c.inverted&&(c=a,a=b,b=c);this.options.x+=a;this.options.y+=b;e[this.collection][this.index].x=this.options.x;e[this.collection][this.index].y=this.options.y;f[this.collection][this.index].x=this.options.x;f[this.collection][this.index].y=this.options.y}render(a){const b=this.options,c=this.attrsFromOptions(b),f=b.style;this.graphic=this.annotation.chart.renderer.label("",0,-9999,b.shape,null,null,b.useHTML,null,"annotation-label").attr(c).add(a);
this.annotation.chart.styledMode||("contrast"===f.color&&(f.color=this.annotation.chart.renderer.getContrast(-1<r.shapesWithoutBackground.indexOf(b.shape)?"#FFFFFF":b.backgroundColor)),this.graphic.css(b.style).shadow(b.shadow));b.className&&this.graphic.addClass(b.className);this.graphic.labelrank=b.labelrank;super.render()}redraw(a){var b=this.options,f=this.text||b.format||b.text;const e=this.graphic,d=this.points[0];e?(e.attr({text:f?c(String(f),d.getLabelConfig(),this.annotation.chart):b.formatter.call(d,
this)}),b=this.anchor(d),(f=this.position(b))?(e.alignAttr=f,f.anchorX=b.absolutePosition.x,f.anchorY=b.absolutePosition.y,e[a?"animate":"attr"](f)):e.attr({x:0,y:-9999}),e.placed=!!f,super.redraw(a)):this.redraw(a)}anchor(a){const b=super.anchor.apply(this,arguments),c=this.options.x||0,f=this.options.y||0;b.absolutePosition.x-=c;b.absolutePosition.y-=f;b.relativePosition.x-=c;b.relativePosition.y-=f;return b}position(b){var c=this.graphic;const f=this.annotation.chart;var e=f.tooltip;const d=this.points[0];
var g=this.options;const v=b.absolutePosition,n=b.relativePosition;let t;b=d.series.visible&&k.prototype.isInsidePlot.call(d);if(c&&b){const {width:q=0,height:h=0}=c;g.distance&&e?t=e.getPosition.call({chart:f,distance:m(g.distance,16),getPlayingField:e.getPlayingField},q,h,{plotX:n.x,plotY:n.y,negative:d.negative,ttBelow:d.ttBelow,h:n.height||n.width}):g.positioner?t=g.positioner.call(this):(e={x:v.x,y:v.y,width:0,height:0},t=r.alignedPosition(a(g,{width:q,height:h}),e),"justify"===this.options.overflow&&
(t=r.alignedPosition(r.justifiedOptions(f,c,g,t),e)));g.crop&&(c=t.x-f.plotLeft,g=t.y-f.plotTop,b=f.isInsidePlot(c,g)&&f.isInsidePlot(c+q,g+h))}return b?t:null}}r.attrsMap={backgroundColor:"fill",borderColor:"stroke",borderWidth:"stroke-width",zIndex:"zIndex",borderRadius:"r",padding:"padding"};r.shapesWithoutBackground=["connector"];return r});p(d,"Extensions/Annotations/Controllables/ControllableImage.js",[d["Extensions/Annotations/Controllables/Controllable.js"],d["Extensions/Annotations/Controllables/ControllableLabel.js"]],
function(d,l){class k extends d{constructor(d,e,c){super(d,e,c,"shape");this.type="image";this.translate=super.translateShape}render(d){const e=this.attrsFromOptions(this.options),c=this.options;this.graphic=this.annotation.chart.renderer.image(c.src,0,-9E9,c.width,c.height).attr(e).add(d);this.graphic.width=c.width;this.graphic.height=c.height;super.render()}redraw(d){if(this.graphic){var e=this.anchor(this.points[0]);if(e=l.prototype.position.call(this,e))this.graphic[d?"animate":"attr"]({x:e.x,
y:e.y});else this.graphic.attr({x:0,y:-9E9});this.graphic.placed=!!e}super.redraw(d)}}k.attrsMap={width:"width",height:"height",zIndex:"zIndex"};return k});p(d,"Core/Chart/ChartNavigationComposition.js",[],function(){var d;(function(d){d.compose=function(d){d.navigation||(d.navigation=new k(d));return d};class k{constructor(d){this.updates=[];this.chart=d}addUpdate(d){this.chart.navigation.updates.push(d)}update(d,e){this.updates.forEach(c=>{c.call(this.chart,d,e)})}}d.Additions=k})(d||(d={}));return d});
p(d,"Extensions/Annotations/NavigationBindingsUtilities.js",[d["Core/Utilities.js"]],function(d){const {defined:l,isNumber:k,pick:h}=d,e={backgroundColor:"string",borderColor:"string",borderRadius:"string",color:"string",fill:"string",fontSize:"string",labels:"string",name:"string",stroke:"string",title:"string"};return{annotationsFieldsTypes:e,getAssignedAxis:function(c){return c.filter(a=>{var b=a.axis.getExtremes();const c=b.min;b=b.max;const f=h(a.axis.minPointOffset,0);return k(c)&&k(b)&&a.value>=
c-f&&a.value<=b+f&&!a.axis.options.isInternal})[0]},getFieldType:function(c,a){c=e[c];a=typeof a;l(c)&&(a=c);return{string:"text",number:"number","boolean":"checkbox"}[a]}}});p(d,"Extensions/Annotations/NavigationBindingsDefaults.js",[d["Extensions/Annotations/NavigationBindingsUtilities.js"],d["Core/Utilities.js"]],function(d,l){const {getAssignedAxis:k}=d,{isNumber:h,merge:e}=l;return{lang:{navigation:{popup:{simpleShapes:"Simple shapes",lines:"Lines",circle:"Circle",ellipse:"Ellipse",rectangle:"Rectangle",
label:"Label",shapeOptions:"Shape options",typeOptions:"Details",fill:"Fill",format:"Text",strokeWidth:"Line width",stroke:"Line color",title:"Title",name:"Name",labelOptions:"Label options",labels:"Labels",backgroundColor:"Background color",backgroundColors:"Background colors",borderColor:"Border color",borderRadius:"Border radius",borderWidth:"Border width",style:"Style",padding:"Padding",fontSize:"Font size",color:"Color",height:"Height",shapes:"Shape options"}}},navigation:{bindingsClassName:"highcharts-bindings-container",
bindings:{circleAnnotation:{className:"highcharts-circle-annotation",start:function(c){var a=this.chart.pointer.getCoordinates(c);c=k(a.xAxis);a=k(a.yAxis);const b=this.chart.options.navigation;if(c&&a)return this.chart.addAnnotation(e({langKey:"circle",type:"basicAnnotation",shapes:[{type:"circle",point:{x:c.value,y:a.value,xAxis:c.axis.index,yAxis:a.axis.index},r:5}]},b.annotationsOptions,b.bindings.circleAnnotation.annotationsOptions))},steps:[function(c,a){var b=a.options.shapes;b=b&&b[0]&&b[0].point||
{};if(h(b.xAxis)&&h(b.yAxis)){var e=this.chart.inverted;const a=this.chart.xAxis[b.xAxis].toPixels(b.x);b=this.chart.yAxis[b.yAxis].toPixels(b.y);e=Math.max(Math.sqrt(Math.pow(e?b-c.chartX:a-c.chartX,2)+Math.pow(e?a-c.chartY:b-c.chartY,2)),5)}a.update({shapes:[{r:e}]})}]},ellipseAnnotation:{className:"highcharts-ellipse-annotation",start:function(c){var a=this.chart.pointer.getCoordinates(c);c=k(a.xAxis);a=k(a.yAxis);const b=this.chart.options.navigation;if(c&&a)return this.chart.addAnnotation(e({langKey:"ellipse",
type:"basicAnnotation",shapes:[{type:"ellipse",xAxis:c.axis.index,yAxis:a.axis.index,points:[{x:c.value,y:a.value},{x:c.value,y:a.value}],ry:1}]},b.annotationsOptions,b.bindings.ellipseAnnotation.annotationOptions))},steps:[function(c,a){a=a.shapes[0];const b=a.getAbsolutePosition(a.points[1]);a.translatePoint(c.chartX-b.x,c.chartY-b.y,1);a.redraw(!1)},function(c,a){a=a.shapes[0];var b=a.getAbsolutePosition(a.points[0]);const e=a.getAbsolutePosition(a.points[1]);c=a.getDistanceFromLine(b,e,c.chartX,
c.chartY);b=a.getYAxis();c=Math.abs(b.toValue(0)-b.toValue(c));a.setYRadius(c);a.redraw(!1)}]},rectangleAnnotation:{className:"highcharts-rectangle-annotation",start:function(c){c=this.chart.pointer.getCoordinates(c);var a=k(c.xAxis),b=k(c.yAxis);if(a&&b){c=a.value;var d=b.value;a=a.axis.index;b=b.axis.index;var f=this.chart.options.navigation;return this.chart.addAnnotation(e({langKey:"rectangle",type:"basicAnnotation",shapes:[{type:"path",points:[{xAxis:a,yAxis:b,x:c,y:d},{xAxis:a,yAxis:b,x:c,y:d},
{xAxis:a,yAxis:b,x:c,y:d},{xAxis:a,yAxis:b,x:c,y:d},{command:"Z"}]}]},f.annotationsOptions,f.bindings.rectangleAnnotation.annotationsOptions))}},steps:[function(c,a){var b=a.options.shapes;b=b&&b[0]&&b[0].points||[];var e=this.chart.pointer.getCoordinates(c);c=k(e.xAxis);e=k(e.yAxis);c&&e&&(c=c.value,e=e.value,b[1].x=c,b[2].x=c,b[2].y=e,b[3].y=e,a.update({shapes:[{points:b}]}))}]},labelAnnotation:{className:"highcharts-label-annotation",start:function(c){var a=this.chart.pointer.getCoordinates(c);
c=k(a.xAxis);a=k(a.yAxis);const b=this.chart.options.navigation;if(c&&a)return this.chart.addAnnotation(e({langKey:"label",type:"basicAnnotation",labelOptions:{format:"{y:.2f}",overflow:"none",crop:!0},labels:[{point:{xAxis:c.axis.index,yAxis:a.axis.index,x:c.value,y:a.value}}]},b.annotationsOptions,b.bindings.labelAnnotation.annotationsOptions))}}},events:{},annotationsOptions:{animation:{defer:0}}}}});p(d,"Extensions/Annotations/NavigationBindings.js",[d["Core/Chart/ChartNavigationComposition.js"],
d["Core/Defaults.js"],d["Core/Templating.js"],d["Core/Globals.js"],d["Extensions/Annotations/NavigationBindingsDefaults.js"],d["Extensions/Annotations/NavigationBindingsUtilities.js"],d["Core/Utilities.js"]],function(d,l,k,h,e,c,a){function b(a,b){const c=n.Element.prototype,f=c.matches||c.msMatchesSelector||c.webkitMatchesSelector;let e=null;if(c.closest)e=c.closest.call(a,b);else{do{if(f.call(a,b))return a;a=a.parentElement||a.parentNode}while(null!==a&&1===a.nodeType)}return e}function m(){this.chart.navigationBindings&&
this.chart.navigationBindings.deselectAnnotation()}function f(){this.navigationBindings&&this.navigationBindings.destroy()}function r(){const a=this.options;a&&a.navigation&&a.navigation.bindings&&(this.navigationBindings=new F(this,a.navigation),this.navigationBindings.initEvents(),this.navigationBindings.initUpdate())}function g(){const a=this.navigationBindings;if(this&&a){let b=!1;this.series.forEach(a=>{!a.options.isInternal&&a.visible&&(b=!0)});if(this.navigationBindings&&this.navigationBindings.container&&
this.navigationBindings.container[0]){const c=this.navigationBindings.container[0];E(a.boundClassNames,(a,f)=>{if(f=c.querySelectorAll("."+f))for(let c=0;c<f.length;c++){const e=f[c],d=e.className;"normal"===a.noDataState?-1!==d.indexOf("highcharts-disabled-btn")&&e.classList.remove("highcharts-disabled-btn"):b?-1!==d.indexOf("highcharts-disabled-btn")&&e.classList.remove("highcharts-disabled-btn"):-1===d.indexOf("highcharts-disabled-btn")&&(e.className+=" highcharts-disabled-btn")}})}}}function q(){this.deselectAnnotation()}
function x(){this.selectedButtonElement=null}function y(a){function b(a){const b=this,f=b.chart.navigationBindings,e=f.activeAnnotation;c&&c.call(b,a);e!==b?(f.deselectAnnotation(),f.activeAnnotation=b,b.setControlPointsVisibility(!0),u(f,"showPopup",{annotation:b,formType:"annotation-toolbar",options:f.annotationToFields(b),onSubmit:function(a){if("remove"===a.actionType)f.activeAnnotation=!1,f.chart.removeAnnotation(b);else{const c={};f.fieldsToOptions(a.fields,c);f.deselectAnnotation();a=c.typeOptions;
"measure"===b.options.type&&(a.crosshairY.enabled=0!==a.crosshairY.strokeWidth,a.crosshairX.enabled=0!==a.crosshairX.strokeWidth);b.update(c)}}})):u(f,"closePopup");a.activeAnnotation=!0}const c=a.prototype.defaultOptions.events&&a.prototype.defaultOptions.events.click;let f,e;K(!0,a.prototype.defaultOptions.events,{click:b,touchstart:function(a){f=a.touches[0].clientX;e=a.touches[0].clientY},touchend:function(a){f&&4<=Math.sqrt(Math.pow(f-a.changedTouches[0].clientX,2)+Math.pow(e-a.changedTouches[0].clientY,
2))||b.call(this,a)}})}const {setOptions:D}=l,{format:B}=k,{doc:v,win:n}=h,{getFieldType:t}=c,{addEvent:w,attr:H,defined:C,fireEvent:u,isArray:p,isFunction:A,isNumber:z,isObject:G,merge:K,objectEach:E,pick:L}=a,J=[];class F{static compose(b,c){a.pushUnique(J,b)&&(w(b,"remove",m),y(b),E(b.types,a=>{y(a)}));a.pushUnique(J,c)&&(w(c,"destroy",f),w(c,"load",r),w(c,"render",g));a.pushUnique(J,F)&&(w(F,"closePopup",q),w(F,"deselectButton",x));a.pushUnique(J,D)&&D(e)}constructor(a,b){this.selectedButton=
this.boundClassNames=void 0;this.chart=a;this.options=b;this.eventsToUnbind=[];this.container=this.chart.container.getElementsByClassName(this.options.bindingsClassName||"");this.container.length||(this.container=v.getElementsByClassName(this.options.bindingsClassName||""))}initEvents(){const a=this,b=a.chart,c=a.container,f=a.options;a.boundClassNames={};E(f.bindings||{},b=>{a.boundClassNames[b.className]=b});[].forEach.call(c,b=>{a.eventsToUnbind.push(w(b,"click",c=>{const f=a.getButtonEvents(b,
c);f&&!f.button.classList.contains("highcharts-disabled-btn")&&a.bindingsButtonClick(f.button,f.events,c)}))});E(f.events||{},(b,c)=>{A(b)&&a.eventsToUnbind.push(w(a,c,b,{passive:!1}))});a.eventsToUnbind.push(w(b.container,"click",function(c){!b.cancelClick&&b.isInsidePlot(c.chartX-b.plotLeft,c.chartY-b.plotTop,{visiblePlotOnly:!0})&&a.bindingsChartClick(this,c)}));a.eventsToUnbind.push(w(b.container,h.isTouchDevice?"touchmove":"mousemove",function(b){a.bindingsContainerMouseMove(this,b)},h.isTouchDevice?
{passive:!1}:void 0))}initUpdate(){const a=this;d.compose(this.chart).navigation.addUpdate(b=>{a.update(b)})}bindingsButtonClick(a,b,c){const f=this.chart,e=f.renderer.boxWrapper;let d=!0;this.selectedButtonElement&&(this.selectedButtonElement.classList===a.classList&&(d=!1),u(this,"deselectButton",{button:this.selectedButtonElement}),this.nextEvent&&(this.currentUserDetails&&"annotations"===this.currentUserDetails.coll&&f.removeAnnotation(this.currentUserDetails),this.mouseMoveEvent=this.nextEvent=
!1));d?(this.selectedButton=b,this.selectedButtonElement=a,u(this,"selectButton",{button:a}),b.init&&b.init.call(this,a,c),(b.start||b.steps)&&f.renderer.boxWrapper.addClass("highcharts-draw-mode")):(f.stockTools&&f.stockTools.toggleButtonActiveClass(a),e.removeClass("highcharts-draw-mode"),this.mouseMoveEvent=this.nextEvent=!1,this.selectedButton=null)}bindingsChartClick(a,c){a=this.chart;const f=this.activeAnnotation,e=this.selectedButton;a=a.renderer.boxWrapper;f&&(f.cancelClick||c.activeAnnotation||
!c.target.parentNode||b(c.target,".highcharts-popup")?f.cancelClick&&setTimeout(()=>{f.cancelClick=!1},0):u(this,"closePopup"));e&&e.start&&(this.nextEvent?(this.nextEvent(c,this.currentUserDetails),this.steps&&(this.stepIndex++,e.steps[this.stepIndex]?this.mouseMoveEvent=this.nextEvent=e.steps[this.stepIndex]:(u(this,"deselectButton",{button:this.selectedButtonElement}),a.removeClass("highcharts-draw-mode"),e.end&&e.end.call(this,c,this.currentUserDetails),this.mouseMoveEvent=this.nextEvent=!1,this.selectedButton=
null))):(this.currentUserDetails=e.start.call(this,c))&&e.steps?(this.stepIndex=0,this.steps=!0,this.mouseMoveEvent=this.nextEvent=e.steps[this.stepIndex]):(u(this,"deselectButton",{button:this.selectedButtonElement}),a.removeClass("highcharts-draw-mode"),this.steps=!1,this.selectedButton=null,e.end&&e.end.call(this,c,this.currentUserDetails)))}bindingsContainerMouseMove(a,b){this.mouseMoveEvent&&this.mouseMoveEvent(b,this.currentUserDetails)}fieldsToOptions(a,b){E(a,(a,c)=>{const f=parseFloat(a),
e=c.split("."),d=e.length-1;!z(f)||a.match(/px|em/g)||c.match(/format/g)||(a=f);if("undefined"!==a){let c=b;e.forEach((b,f)=>{const g=L(e[f+1],"");d===f?c[b]=a:(c[b]||(c[b]=g.match(/\d/g)?[]:{}),c=c[b])})}});return b}deselectAnnotation(){this.activeAnnotation&&(this.activeAnnotation.setControlPointsVisibility(!1),this.activeAnnotation=!1)}annotationToFields(a){function b(c,f,d,n,r){let m;d&&C(c)&&-1===g.indexOf(f)&&(0<=(d.indexOf&&d.indexOf(f))||d[f]||!0===d)&&(p(c)?(n[f]=[],c.forEach((a,c)=>{G(a)?
(n[f][c]={},E(a,(a,d)=>{b(a,d,e[f],n[f][c],f)})):b(a,0,e[f],n[f],f)})):G(c)?(m={},p(n)?(n.push(m),m[f]={},m=m[f]):n[f]=m,E(c,(a,c)=>{b(a,c,0===f?d:e[f],m,f)})):"format"===f?n[f]=[B(c,a.labels[0].points[0]).toString(),"text"]:p(n)?n.push([c,t(r,c)]):n[f]=[c,t(f,c)])}const c=a.options,f=F.annotationsEditable,e=f.nestedOptions,d=L(c.type,c.shapes&&c.shapes[0]&&c.shapes[0].type,c.labels&&c.labels[0]&&c.labels[0].type,"label"),g=F.annotationsNonEditable[c.langKey]||[],n={langKey:c.langKey,type:d};E(c,
(a,g)=>{"typeOptions"===g?(n[g]={},E(c[g],(a,c)=>{b(a,c,e,n[g],c)})):b(a,g,f[d],n,g)});return n}getClickedClassNames(a,b){let c=b.target;b=[];let f;for(;c&&c.tagName&&((f=H(c,"class"))&&(b=b.concat(f.split(" ").map(a=>[a,c]))),c=c.parentNode,c!==a););return b}getButtonEvents(a,b){const c=this;let f;this.getClickedClassNames(a,b).forEach(a=>{c.boundClassNames[a[0]]&&!f&&(f={events:c.boundClassNames[a[0]],button:a[1]})});return f}update(a){this.options=K(!0,this.options,a);this.removeEvents();this.initEvents()}removeEvents(){this.eventsToUnbind.forEach(a=>
a())}destroy(){this.removeEvents()}}F.annotationsEditable={nestedOptions:{labelOptions:["style","format","backgroundColor"],labels:["style"],label:["style"],style:["fontSize","color"],background:["fill","strokeWidth","stroke"],innerBackground:["fill","strokeWidth","stroke"],outerBackground:["fill","strokeWidth","stroke"],shapeOptions:["fill","strokeWidth","stroke"],shapes:["fill","strokeWidth","stroke"],line:["strokeWidth","stroke"],backgroundColors:[!0],connector:["fill","strokeWidth","stroke"],
crosshairX:["strokeWidth","stroke"],crosshairY:["strokeWidth","stroke"]},circle:["shapes"],ellipse:["shapes"],verticalLine:[],label:["labelOptions"],measure:["background","crosshairY","crosshairX"],fibonacci:[],tunnel:["background","line","height"],pitchfork:["innerBackground","outerBackground"],rect:["shapes"],crookedLine:[],basicAnnotation:["shapes","labelOptions"]};F.annotationsNonEditable={rectangle:["crosshairX","crosshairY","labelOptions"],ellipse:["labelOptions"],circle:["labelOptions"]};"";
return F});p(d,"Shared/BaseForm.js",[d["Core/Renderer/HTML/AST.js"],d["Core/Utilities.js"]],function(d,l){const {addEvent:k,createElement:h}=l;class e{constructor(c,a){this.iconsURL=a;this.container=this.createPopupContainer(c);this.closeButton=this.addCloseButton()}createPopupContainer(c,a="highcharts-popup highcharts-no-tooltip"){return h("div",{className:a},void 0,c)}addCloseButton(c="highcharts-popup-close"){const a=this,b=this.iconsURL,e=h("div",{className:c},void 0,this.container);e.style["background-image"]=
"url("+(b.match(/png|svg|jpeg|jpg|gif/ig)?b:b+"close.svg")+")";["click","touchstart"].forEach(b=>{k(e,b,a.closeButtonEvents.bind(a))});return e}closeButtonEvents(){this.closePopup()}showPopup(c="highcharts-annotation-toolbar"){const a=this.container,b=this.closeButton;this.type=void 0;a.innerHTML=d.emptyHTML;0<=a.className.indexOf(c)&&(a.classList.remove(c),a.removeAttribute("style"));a.appendChild(b);a.style.display="block";a.style.height=""}closePopup(){this.container.style.display="none"}}return e});
p(d,"Extensions/Annotations/Popup/PopupAnnotations.js",[d["Core/Globals.js"],d["Core/Utilities.js"]],function(d,l){function k(f,d,l,y,u,B){if(d){var g=this.addInput,n=this.lang,q,w;m(y,(c,e)=>{q=""!==l?l+"."+e:e;b(c)&&(!a(c)||a(c)&&b(c[0])?(w=n[e]||e,w.match(/\d/g)||u.push([!0,w,f]),k.call(this,f,d,q,c,u,!1)):u.push([this,q,"annotation",f,c]))});B&&(r(u,a=>a[1].match(/format/g)?-1:1),e&&u.reverse(),u.forEach(a=>{!0===a[0]?c("span",{className:"highcharts-annotation-title"},void 0,a[2]).appendChild(h.createTextNode(a[1])):
(a[4]={value:a[4][0],type:a[4][1]},g.apply(a[0],a.splice(1)))}))}}const {doc:h,isFirefox:e}=d,{createElement:c,isArray:a,isObject:b,objectEach:m,pick:f,stableSort:r}=l;return{addForm:function(a,b,f,e){if(a){var d=this.container,g=this.lang,r=c("h2",{className:"highcharts-popup-main-title"},void 0,d);r.appendChild(h.createTextNode(g[b.langKey]||b.langKey||""));r=c("div",{className:"highcharts-popup-lhs-col highcharts-popup-lhs-full"},void 0,d);var n=c("div",{className:"highcharts-popup-bottom-row"},
void 0,d);k.call(this,r,a,"",b,[],!0);this.addButton(n,e?g.addButton||"Add":g.saveButton||"Save",e?"add":"save",d,f)}},addToolbar:function(a,b,e){const d=this.lang,g=this.container,r=this.showForm;-1===g.className.indexOf("highcharts-annotation-toolbar")&&(g.className+=" highcharts-annotation-toolbar");a&&(g.style.top=a.plotTop+10+"px");c("span",void 0,void 0,g).appendChild(h.createTextNode(f(d[b.langKey]||b.langKey,b.shapes&&b.shapes[0].type,"")));let m=this.addButton(g,d.removeButton||"Remove",
"remove",g,e);m.className+=" highcharts-annotation-remove-button";m.style["background-image"]="url("+this.iconsURL+"destroy.svg)";m=this.addButton(g,d.editButton||"Edit","edit",g,()=>{r.call(this,"annotation-edit",a,b,e)});m.className+=" highcharts-annotation-edit-button";m.style["background-image"]="url("+this.iconsURL+"edit.svg)"}}});p(d,"Extensions/Annotations/Popup/PopupIndicators.js",[d["Core/Renderer/HTML/AST.js"],d["Core/Globals.js"],d["Extensions/Annotations/NavigationBindingsUtilities.js"],
d["Core/Series/SeriesRegistry.js"],d["Core/Utilities.js"]],function(d,l,k,h,e){function c(a){const b=n("div",{className:"highcharts-popup-lhs-col"},void 0,a);a=n("div",{className:"highcharts-popup-rhs-col"},void 0,a);n("div",{className:"highcharts-popup-rhs-col-wrapper"},void 0,a);return{lhsCol:b,rhsCol:a}}function a(a,c,f,e){const m=this,r=m.lang,z=c.querySelectorAll(".highcharts-popup-lhs-col")[0];c=c.querySelectorAll(".highcharts-popup-rhs-col")[0];const t="edit"===f;f=t?a.series:a.options.plotOptions||
{};if(a||!f){var G,k=[];t||w(f)?w(f)&&(k=q.call(this,f)):k=g.call(this,f,e);M(k,(a,b)=>{a=a.indicatorFullName.toLowerCase();b=b.indicatorFullName.toLowerCase();return a<b?-1:a>b?1:0});z.children[1]&&z.children[1].remove();var h=n("ul",{className:"highcharts-indicator-list"},void 0,z),l=c.querySelectorAll(".highcharts-popup-rhs-col-wrapper")[0];k.forEach(c=>{const {indicatorFullName:f,indicatorType:e,series:g}=c;G=n("li",{className:"highcharts-indicator-list"},void 0,h);G.appendChild(p.createTextNode(f));
["click","touchstart"].forEach(c=>{v(G,c,function(){const c=l.parentNode.children[1];{const c=g.params||g.options.params;l.innerHTML=d.emptyHTML;n("h3",{className:"highcharts-indicator-title"},void 0,l).appendChild(p.createTextNode(x(g,e).indicatorFullName));n("input",{type:"hidden",name:"highcharts-type-"+e,value:e},void 0,l);u.call(m,e,"series",a,l,g,g.linkedParent&&g.linkedParent.options.id);c.volumeSeriesID&&u.call(m,e,"volume",a,l,g,g.linkedParent&&c.volumeSeriesID);b.call(m,a,"params",c,e,l)}c&&
(c.style.display="block");t&&g.options&&n("input",{type:"hidden",name:"highcharts-id-"+e,value:g.options.id},void 0,l).setAttribute("highcharts-data-series-id",g.options.id)})})});0<h.childNodes.length?h.childNodes[0].click():t||(d.setElementHTML(l.parentNode.children[0],r.noFilterMatch||""),l.parentNode.children[1].style.display="none")}}function b(a,c,e,d,g){if(a){var n=this.addInput;C(e,(e,m)=>{var z=c+"."+m;t(e)&&z&&(H(e)&&(n.call(this,z,d,g,{}),b.call(this,a,z,e,d,g)),z in I?(z=f.call(this,d,
z,g),r.call(this,a,c,z,d,m,e)):"params.volumeSeriesID"===z||w(e)||n.call(this,z,d,g,{value:e,type:"number"}))})}}function m(b,c){const f=this;var e=c.querySelectorAll(".highcharts-popup-lhs-col")[0];c=this.lang.clearFilter;e=n("div",{className:"highcharts-input-wrapper"},void 0,e);const d=this.addInput("searchIndicators","input",e,{value:"",type:"text",htmlFor:"search-indicators",labelClassName:"highcharts-input-search-indicators-label"}),g=n("a",{textContent:c},void 0,e);d.classList.add("highcharts-input-search-indicators");
g.classList.add("clear-filter-button");v(d,"input",function(){a.call(f,b,f.container,"add",this.value);g.style.display=this.value.length?"inline-block":"none"});["click","touchstart"].forEach(c=>{v(g,c,function(){d.value="";a.call(f,b,f.container,"add","");g.style.display="none"})})}function f(a,b,c){var f=b.split(".");f=f[f.length-1];a="highcharts-"+b+"-type-"+a;const e=this.lang;n("label",{htmlFor:a},null,c).appendChild(p.createTextNode(e[f]||b));c=n("select",{name:a,className:"highcharts-popup-field",
id:"highcharts-select-"+b},null,c);c.setAttribute("id","highcharts-select-"+b);return c}function r(a,b,c,f,e,d,g){"series"===b||"volume"===b?a.series.forEach(a=>{const f=a.options,e=f.name||f.params?a.name:f.id||"";"highcharts-navigator-series"!==f.id&&f.id!==(g&&g.options&&g.options.id)&&(t(d)||"volume"!==b||"column"!==a.type||(d=f.id),n("option",{value:f.id},void 0,c).appendChild(p.createTextNode(e)))}):f&&e&&A[e+"-"+f].forEach(a=>{n("option",{value:a},void 0,c).appendChild(p.createTextNode(a))});
t(d)&&(c.value=d)}function g(a,b){const c=this.chart&&this.chart.options.lang,f=c&&c.navigation&&c.navigation.popup&&c.navigation.popup.indicatorAliases,e=[];let d;C(a,(a,c)=>{var g=a&&a.options;if(a.params||g&&g.params){const {indicatorFullName:n,indicatorType:m}=x(a,c);if(b){if(c=b.replace(/[.*+?^${}()|[\]\\]/g,"\\$&"),c=new RegExp(c,"i"),g=f&&f[m]&&f[m].join(" ")||"",n.match(c)||g.match(c))d={indicatorFullName:n,indicatorType:m,series:a},e.push(d)}else d={indicatorFullName:n,indicatorType:m,series:a},
e.push(d)}});return e}function q(a){const b=[];a.forEach(a=>{a.is("sma")&&b.push({indicatorFullName:a.name,indicatorType:a.type,series:a})});return b}function x(a,b){const c=a.options;let f=B[b]&&B[b].prototype.nameBase||b.toUpperCase();c&&c.type&&(b=a.options.type,f=a.name);return{indicatorFullName:f,indicatorType:b}}function u(a,b,c,e,d,g){c&&(a=f.call(this,a,b,e),r.call(this,c,b,a,void 0,void 0,void 0,d),t(g)&&(a.value=g))}const {doc:p}=l,{seriesTypes:B}=h,{addEvent:v,createElement:n,defined:t,
isArray:w,isObject:H,objectEach:C,stableSort:M}=e;var I;(function(a){a[a["params.algorithm"]=0]="params.algorithm";a[a["params.average"]=1]="params.average"})(I||(I={}));const A={"algorithm-pivotpoints":["standard","fibonacci","camarilla"],"average-disparityindex":["sma","ema","dema","tema","wma"]};return{addForm:function(b,f,e){f=this.lang;let d;if(b){this.tabs.init.call(this,b);var g=this.container.querySelectorAll(".highcharts-tab-item-content");c(g[0]);m.call(this,b,g[0]);a.call(this,b,g[0],"add");
d=g[0].querySelectorAll(".highcharts-popup-rhs-col")[0];this.addButton(d,f.addButton||"add","add",d,e);c(g[1]);a.call(this,b,g[1],"edit");d=g[1].querySelectorAll(".highcharts-popup-rhs-col")[0];this.addButton(d,f.saveButton||"save","edit",d,e);this.addButton(d,f.removeButton||"remove","remove",d,e)}},getAmount:function(){let a=0;this.series.forEach(b=>{(b.params||b.options.params)&&a++});return a}}});p(d,"Extensions/Annotations/Popup/PopupTabs.js",[d["Core/Globals.js"],d["Core/Utilities.js"]],function(d,
l){function k(){return m("div",{className:"highcharts-tab-item-content highcharts-no-mousewheel"},void 0,this.container)}function h(b,c){const f=this.container,e=this.lang;let d="highcharts-tab-item";0===c&&(d+=" highcharts-tab-disabled");c=m("span",{className:d},void 0,f);c.appendChild(a.createTextNode(e[b+"Button"]||b));c.setAttribute("highcharts-data-tab-type",b);return c}function e(a,b){const c=this.container.querySelectorAll(".highcharts-tab-item-content");a.className+=" highcharts-tab-item-active";
c[b].className+=" highcharts-tab-item-show"}function c(a){const c=this;this.container.querySelectorAll(".highcharts-tab-item").forEach((f,d)=>{0===a&&"edit"===f.getAttribute("highcharts-data-tab-type")||["click","touchstart"].forEach(a=>{b(f,a,function(){{var a=c.container;const b=a.querySelectorAll(".highcharts-tab-item");a=a.querySelectorAll(".highcharts-tab-item-content");for(let c=0;c<b.length;c++)b[c].classList.remove("highcharts-tab-item-active"),a[c].classList.remove("highcharts-tab-item-show")}e.call(c,
this,d)})})})}const {doc:a}=d,{addEvent:b,createElement:m}=l;return{init:function(a){if(a){a=this.indicators.getAmount.call(a);var b=h.call(this,"add");h.call(this,"edit",a);k.call(this);k.call(this);c.call(this,a);e.call(this,b,0)}}}});p(d,"Extensions/Annotations/Popup/Popup.js",[d["Shared/BaseForm.js"],d["Core/Globals.js"],d["Core/Defaults.js"],d["Extensions/Annotations/Popup/PopupAnnotations.js"],d["Extensions/Annotations/Popup/PopupIndicators.js"],d["Extensions/Annotations/Popup/PopupTabs.js"],
d["Core/Utilities.js"]],function(d,l,k,h,e,c,a){function b(a,b){const c=Array.prototype.slice.call(a.querySelectorAll("input")),f=Array.prototype.slice.call(a.querySelectorAll("select")),e=a.querySelectorAll("#highcharts-select-series > option:checked")[0];a=a.querySelectorAll("#highcharts-select-volume > option:checked")[0];const d={actionType:b,linkedTo:e&&e.getAttribute("value")||"",fields:{}};c.forEach(a=>{const b=a.getAttribute("highcharts-data-name");a.getAttribute("highcharts-data-series-id")?
d.seriesId=a.value:b?d.fields[b]=a.value:d.type=a.value});f.forEach(a=>{var b=a.id;"highcharts-select-series"!==b&&"highcharts-select-volume"!==b&&(b=b.split("highcharts-select-")[1],d.fields[b]=a.value)});a&&(d.fields["params.volumeSeriesID"]=a.getAttribute("value")||"");return d}const {doc:m}=l,{getOptions:f}=k,{addEvent:r,createElement:g,extend:q,fireEvent:x,pick:u}=a;class p extends d{constructor(a,b,c){super(a,b);this.chart=c;this.lang=(f().lang.navigation||{}).popup||{};r(this.container,"mousedown",
()=>{const a=c&&c.navigationBindings&&c.navigationBindings.activeAnnotation;if(a){a.cancelClick=!0;const b=r(m,"click",()=>{setTimeout(()=>{a.cancelClick=!1},0);b()})}})}addInput(a,b,c,f){var e=a.split(".");e=e[e.length-1];const d=this.lang;b="highcharts-"+b+"-"+u(f.htmlFor,e);e.match(/^\d+$/)||g("label",{htmlFor:b,className:f.labelClassName},void 0,c).appendChild(m.createTextNode(d[e]||e));c=g("input",{name:b,value:f.value,type:f.type,className:"highcharts-popup-field"},void 0,c);c.setAttribute("highcharts-data-name",
a);return c}closeButtonEvents(){if(this.chart){const a=this.chart.navigationBindings;x(a,"closePopup");a&&a.selectedButtonElement&&x(a,"deselectButton",{button:a.selectedButtonElement})}else super.closeButtonEvents()}addButton(a,c,f,e,d){const n=g("button",void 0,void 0,a);n.appendChild(m.createTextNode(c));d&&["click","touchstart"].forEach(a=>{r(n,a,()=>{this.closePopup();return d(b(e,f))})});return n}showForm(a,b,c,f){b&&(this.showPopup(),"indicators"===a&&this.indicators.addForm.call(this,b,c,
f),"annotation-toolbar"===a&&this.annotations.addToolbar.call(this,b,c,f),"annotation-edit"===a&&this.annotations.addForm.call(this,b,c,f),"flag"===a&&this.annotations.addForm.call(this,b,c,f,!0),this.type=a,this.container.style.height=this.container.offsetHeight+"px")}}q(p.prototype,{annotations:h,indicators:e,tabs:c});return p});p(d,"Extensions/Annotations/Popup/PopupComposition.js",[d["Extensions/Annotations/Popup/Popup.js"],d["Core/Utilities.js"]],function(d,l){function k(){this.popup&&this.popup.closePopup()}
function h(a){this.popup||(this.popup=new d(this.chart.container,this.chart.options.navigation.iconsURL||this.chart.options.stockTools&&this.chart.options.stockTools.gui.iconsURL||"https://code.highcharts.com/11.1.0/gfx/stock-icons/",this.chart));this.popup.showForm(a.formType,this.chart,a.options,a.onSubmit)}function e(a,b){this.inClass(b.target,"highcharts-popup")||a.apply(this,Array.prototype.slice.call(arguments,1))}const {addEvent:c,wrap:a}=l,b=[];return{compose:function(d,f){l.pushUnique(b,
d)&&(c(d,"closePopup",k),c(d,"showPopup",h));l.pushUnique(b,f)&&a(f.prototype,"onContainerMouseDown",e)}}});p(d,"Extensions/Annotations/Annotation.js",[d["Core/Animation/AnimationUtilities.js"],d["Extensions/Annotations/AnnotationChart.js"],d["Extensions/Annotations/AnnotationDefaults.js"],d["Extensions/Annotations/Controllables/ControllableRect.js"],d["Extensions/Annotations/Controllables/ControllableCircle.js"],d["Extensions/Annotations/Controllables/ControllableEllipse.js"],d["Extensions/Annotations/Controllables/ControllablePath.js"],
d["Extensions/Annotations/Controllables/ControllableImage.js"],d["Extensions/Annotations/Controllables/ControllableLabel.js"],d["Extensions/Annotations/ControlPoint.js"],d["Extensions/Annotations/ControlTarget.js"],d["Extensions/Annotations/EventEmitter.js"],d["Extensions/Annotations/MockPoint.js"],d["Extensions/Annotations/NavigationBindings.js"],d["Extensions/Annotations/Popup/PopupComposition.js"],d["Core/Utilities.js"]],function(d,l,k,h,e,c,a,b,m,f,r,g,q,x,p,D){function u(a){const b=a.graphic;
a=a.points.some(a=>!1!==a.series.visible&&!1!==a.visible);b&&(a?"hidden"===b.visibility&&b.show():b.hide())}function v(a,b){const c={};["labels","shapes"].forEach(f=>{const e=a[f];e&&(c[f]=b[f]?I(b[f]).map(function(a,b){return C(e[b],a)}):a[f])});return c}const {getDeferredAnimation:n}=d,{destroyObjectProperties:t,erase:w,fireEvent:H,merge:C,pick:y,splat:I}=D;class A extends g{static compose(b,c,f){l.compose(A,b,c);m.compose(f);a.compose(b,f);x.compose(A,b);p.compose(x,c)}constructor(a,b){super();
this.shapesGroup=this.labelsGroup=this.labelCollector=this.group=this.graphic=this.animationConfig=void 0;this.chart=a;this.points=[];this.controlPoints=[];this.coll="annotations";this.index=-1;this.labels=[];this.shapes=[];this.options=C(this.defaultOptions,b);this.userOptions=b;b=v(this.options,b);this.options.labels=b.labels;this.options.shapes=b.shapes;this.init(a,this.options)}addClipPaths(){this.setClipAxes();this.clipXAxis&&this.clipYAxis&&this.options.crop&&(this.clipRect=this.chart.renderer.clipRect(this.getClipBox()))}addLabels(){const a=
this.options.labels||[];a.forEach((b,c)=>{b=this.initLabel(b,c);C(!0,a[c],b.options)})}addShapes(){const a=this.options.shapes||[];a.forEach((b,c)=>{b=this.initShape(b,c);C(!0,a[c],b.options)})}destroy(){function a(a){a.destroy()}const b=this.chart;this.labels.forEach(a);this.shapes.forEach(a);this.clipYAxis=this.clipXAxis=null;w(b.labelCollectors,this.labelCollector);super.destroy();this.destroyControlTarget();t(this,b)}destroyItem(a){w(this[a.itemType+"s"],a);a.destroy()}getClipBox(){if(this.clipXAxis&&
this.clipYAxis)return{x:this.clipXAxis.left,y:this.clipYAxis.top,width:this.clipXAxis.width,height:this.clipYAxis.height}}initProperties(a,b){this.setOptions(b);const c=v(this.options,b);this.options.labels=c.labels;this.options.shapes=c.shapes;this.chart=a;this.points=[];this.controlPoints=[];this.coll="annotations";this.userOptions=b;this.labels=[];this.shapes=[]}init(a,b,c=this.index){a=this.chart;b=this.options.animation;this.index=c;this.linkPoints();this.addControlPoints();this.addShapes();
this.addLabels();this.setLabelCollector();this.animationConfig=n(a,b)}initLabel(a,b){a=C(this.options.labelOptions,{controlPointOptions:this.options.controlPointOptions},a);b=new m(this,a,b);b.itemType="label";this.labels.push(b);return b}initShape(a,b){a=C(this.options.shapeOptions,{controlPointOptions:this.options.controlPointOptions},a);b=new A.shapesMap[a.type](this,a,b);b.itemType="shape";this.shapes.push(b);return b}redraw(a){this.linkPoints();this.graphic||this.render();this.clipRect&&this.clipRect.animate(this.getClipBox());
this.redrawItems(this.shapes,a);this.redrawItems(this.labels,a);this.redrawControlPoints(a)}redrawItem(a,b){a.linkPoints();a.shouldBeDrawn()?(a.graphic||this.renderItem(a),a.redraw(y(b,!0)&&a.graphic.placed),a.points.length&&u(a)):this.destroyItem(a)}redrawItems(a,b){let c=a.length;for(;c--;)this.redrawItem(a[c],b)}remove(){return this.chart.removeAnnotation(this)}render(){const a=this.chart.renderer;this.graphic=a.g("annotation").attr({opacity:0,zIndex:this.options.zIndex,visibility:this.options.visible?
"inherit":"hidden"}).add();this.shapesGroup=a.g("annotation-shapes").add(this.graphic);this.options.crop&&this.shapesGroup.clip(this.chart.plotBoxClip);this.labelsGroup=a.g("annotation-labels").attr({translateX:0,translateY:0}).add(this.graphic);this.addClipPaths();this.clipRect&&this.graphic.clip(this.clipRect);this.renderItems(this.shapes);this.renderItems(this.labels);this.addEvents();this.renderControlPoints()}renderItem(a){a.render("label"===a.itemType?this.labelsGroup:this.shapesGroup)}renderItems(a){let b=
a.length;for(;b--;)this.renderItem(a[b])}setClipAxes(){const a=this.chart.xAxis,b=this.chart.yAxis,c=(this.options.labels||[]).concat(this.options.shapes||[]).reduce((c,f)=>{f=f&&(f.point||f.points&&f.points[0]);return[a[f&&f.xAxis]||c[0],b[f&&f.yAxis]||c[1]]},[]);this.clipXAxis=c[0];this.clipYAxis=c[1]}setControlPointsVisibility(a){function b(b){b.setControlPointsVisibility(a)}this.controlPoints.forEach(b=>{b.setVisibility(a)});this.shapes.forEach(b);this.labels.forEach(b)}setLabelCollector(){const a=
this;a.labelCollector=function(){return a.labels.reduce(function(a,b){b.options.allowOverlap||a.push(b.graphic);return a},[])};a.chart.labelCollectors.push(a.labelCollector)}setOptions(a){this.options=C(this.defaultOptions,a)}setVisibility(a){const b=this.options,c=this.chart.navigationBindings,f=y(a,!b.visible);this.graphic.attr("visibility",f?"inherit":"hidden");f||(a=function(a){a.setControlPointsVisibility(f)},this.shapes.forEach(a),this.labels.forEach(a),c.activeAnnotation===this&&c.popup&&"annotation-toolbar"===
c.popup.type&&H(c,"closePopup"));b.visible=f}update(a,b){const c=this.chart,f=v(this.userOptions,a),e=c.annotations.indexOf(this);a=C(!0,this.userOptions,a);a.labels=f.labels;a.shapes=f.shapes;this.destroy();this.initProperties(c,a);this.init(c,a);c.options.annotations[e]=a;this.isUpdating=!0;y(b,!0)&&c.redraw();H(this,"afterUpdate");this.isUpdating=!1}}A.ControlPoint=f;A.MockPoint=q;A.shapesMap={rect:h,circle:e,ellipse:c,path:a,image:b};A.types={};A.prototype.defaultOptions=k;A.prototype.nonDOMEvents=
["add","afterUpdate","drag","remove"];r.compose(A);"";return A});p(d,"Extensions/Annotations/Types/BasicAnnotation.js",[d["Extensions/Annotations/Annotation.js"],d["Extensions/Annotations/MockPoint.js"],d["Core/Utilities.js"]],function(d,l,k){({merge:k}=k);class h extends d{addControlPoints(){const e=this.options,c=h.basicControlPoints,a=this.basicType;(e.labels||e.shapes||[]).forEach(b=>{b.controlPoints=c[a]})}init(){var e=this.options;e.shapes?(delete e.labelOptions,this.basicType=(e=e.shapes[0].type)&&
"path"!==e?e:"rectangle"):(delete e.shapes,this.basicType="label");super.init.apply(this,arguments)}}h.basicControlPoints={label:[{symbol:"triangle-down",positioner:function(e){if(!e.graphic.placed)return{x:0,y:-9E7};e=l.pointToPixels(e.points[0]);return{x:e.x-this.graphic.width/2,y:e.y-this.graphic.height/2}},events:{drag:function(e,c){e=this.mouseMoveToTranslation(e);c.translatePoint(e.x,e.y);c.annotation.userOptions.labels[0].point=c.options.point;c.redraw(!1)}}},{symbol:"square",positioner:function(e){return e.graphic.placed?
{x:e.graphic.alignAttr.x-this.graphic.width/2,y:e.graphic.alignAttr.y-this.graphic.height/2}:{x:0,y:-9E7}},events:{drag:function(e,c){e=this.mouseMoveToTranslation(e);c.translate(e.x,e.y);c.annotation.userOptions.labels[0].point=c.options.point;c.redraw(!1)}}}],rectangle:[{positioner:function(e){e=l.pointToPixels(e.points[2]);return{x:e.x-4,y:e.y-4}},events:{drag:function(e,c){var a,b;const d=c.annotation;var f=this.chart.pointer.getCoordinates(e);e=c.options.points;const r=d.userOptions.shapes,g=
(null===(a=d.clipXAxis)||void 0===a?void 0:a.index)||0;a=(null===(b=d.clipYAxis)||void 0===b?void 0:b.index)||0;b=f.xAxis[g].value;f=f.yAxis[a].value;e[1].x=b;e[2].x=b;e[2].y=f;e[3].y=f;r&&r[0]&&(r[0].points=c.options.points);d.redraw(!1)}}}],circle:[{positioner:function(e){const c=l.pointToPixels(e.points[0]);e=e.options.r;return{x:c.x+e*Math.cos(Math.PI/4)-this.graphic.width/2,y:c.y+e*Math.sin(Math.PI/4)-this.graphic.height/2}},events:{drag:function(e,c){var a=c.annotation;e=this.mouseMoveToTranslation(e);
a=a.userOptions.shapes;c.setRadius(Math.max(c.options.r+e.y/Math.sin(Math.PI/4),5));a&&a[0]&&(a[0].r=c.options.r,a[0].point=c.options.point);c.redraw(!1)}}}],ellipse:[{positioner:function(e){e=e.getAbsolutePosition(e.points[0]);return{x:e.x-this.graphic.width/2,y:e.y-this.graphic.height/2}},events:{drag:function(e,c){const a=c.getAbsolutePosition(c.points[0]);c.translatePoint(e.chartX-a.x,e.chartY-a.y,0);c.redraw(!1)}}},{positioner:function(e){e=e.getAbsolutePosition(e.points[1]);return{x:e.x-this.graphic.width/
2,y:e.y-this.graphic.height/2}},events:{drag:function(e,c){const a=c.getAbsolutePosition(c.points[1]);c.translatePoint(e.chartX-a.x,e.chartY-a.y,1);c.redraw(!1)}}},{positioner:function(e){const c=e.getAbsolutePosition(e.points[0]),a=e.getAbsolutePosition(e.points[1]);e=e.getAttrs(c,a);return{x:e.cx-this.graphic.width/2+e.ry*Math.sin(e.angle*Math.PI/180),y:e.cy-this.graphic.height/2-e.ry*Math.cos(e.angle*Math.PI/180)}},events:{drag:function(e,c){var a=c.getAbsolutePosition(c.points[0]);const b=c.getAbsolutePosition(c.points[1]);
e=c.getDistanceFromLine(a,b,e.chartX,e.chartY);a=c.getYAxis();e=Math.abs(a.toValue(0)-a.toValue(e));c.setYRadius(e);c.redraw(!1)}}}]};h.prototype.defaultOptions=k(d.prototype.defaultOptions,{});return d.types.basicAnnotation=h});p(d,"Extensions/Annotations/Types/CrookedLine.js",[d["Extensions/Annotations/Annotation.js"],d["Extensions/Annotations/ControlPoint.js"],d["Extensions/Annotations/MockPoint.js"],d["Core/Utilities.js"]],function(d,l,k,h){const {merge:e}=h;class c extends d{setClipAxes(){this.clipXAxis=
this.chart.xAxis[this.options.typeOptions.xAxis];this.clipYAxis=this.chart.yAxis[this.options.typeOptions.yAxis]}getPointsOptions(){const a=this.options.typeOptions;return(a.points||[]).map(b=>{b.xAxis=a.xAxis;b.yAxis=a.yAxis;return b})}getControlPointsOptions(){return this.getPointsOptions()}addControlPoints(){this.getControlPointsOptions().forEach(function(a,b){b=new l(this.chart,this,e(this.options.controlPointOptions,a.controlPoint),b);this.controlPoints.push(b);a.controlPoint=b.options},this)}addShapes(){const a=
this.options.typeOptions,b=this.initShape(e(a.line,{type:"path",points:this.points.map((a,b)=>function(a){return a.annotation.points[b]})}),0);a.line=b.options}}c.prototype.defaultOptions=e(d.prototype.defaultOptions,{typeOptions:{xAxis:0,yAxis:0,line:{fill:"none"}},controlPointOptions:{positioner:function(a){const b=this.graphic;a=k.pointToPixels(a.points[this.index]);return{x:a.x-b.width/2,y:a.y-b.height/2}},events:{drag:function(a,b){if(b.chart.isInsidePlot(a.chartX-b.chart.plotLeft,a.chartY-b.chart.plotTop,
{visiblePlotOnly:!0})){a=this.mouseMoveToTranslation(a);const c=b.options.typeOptions;b.translatePoint(a.x,a.y,this.index);c.points[this.index].x=b.points[this.index].x;c.points[this.index].y=b.points[this.index].y;b.redraw(!1)}}}}});return d.types.crookedLine=c});p(d,"Extensions/Annotations/Types/ElliottWave.js",[d["Extensions/Annotations/Annotation.js"],d["Extensions/Annotations/Types/CrookedLine.js"],d["Core/Utilities.js"]],function(d,l,k){const {merge:h}=k;class e extends l{addLabels(){this.getPointsOptions().forEach((c,
a)=>{const b=this.initLabel(h(c.label,{text:this.options.typeOptions.labels[a],point:function(b){return b.annotation.points[a]}}),!1);c.label=b.options})}}e.prototype.defaultOptions=h(l.prototype.defaultOptions,{typeOptions:{labels:"(0) (A) (B) (C) (D) (E)".split(" "),line:{strokeWidth:1}},labelOptions:{align:"center",allowOverlap:!0,crop:!0,overflow:"none",type:"rect",backgroundColor:"none",borderWidth:0,y:-5}});return d.types.elliottWave=e});p(d,"Extensions/Annotations/Types/Tunnel.js",[d["Extensions/Annotations/Annotation.js"],
d["Extensions/Annotations/ControlPoint.js"],d["Extensions/Annotations/Types/CrookedLine.js"],d["Extensions/Annotations/MockPoint.js"],d["Core/Utilities.js"]],function(d,l,k,h,e){const {merge:c}=e;class a extends k{getPointsOptions(){const a=k.prototype.getPointsOptions.call(this);a[2]=this.heightPointOptions(a[1]);a[3]=this.heightPointOptions(a[0]);return a}getControlPointsOptions(){return this.getPointsOptions().slice(0,2)}heightPointOptions(a){a=c(a);a.y+=this.options.typeOptions.height;return a}addControlPoints(){k.prototype.addControlPoints.call(this);
var a=this.options;const e=a.typeOptions;a=new l(this.chart,this,c(a.controlPointOptions,e.heightControlPoint),2);this.controlPoints.push(a);e.heightControlPoint=a.options}addShapes(){this.addLine();this.addBackground()}addLine(){const a=this.initShape(c(this.options.typeOptions.line,{type:"path",points:[this.points[0],this.points[1],function(a){a=h.pointToOptions(a.annotation.points[2]);a.command="M";return a},this.points[3]]}),0);this.options.typeOptions.line=a.options}addBackground(){const a=this.initShape(c(this.options.typeOptions.background,
{type:"path",points:this.points.slice()}),1);this.options.typeOptions.background=a.options}translateSide(a,c,f){f=Number(f);const b=0===f?3:2;this.translatePoint(a,c,f);this.translatePoint(a,c,b)}translateHeight(a){this.translatePoint(0,a,2);this.translatePoint(0,a,3);this.options.typeOptions.height=this.points[3].y-this.points[0].y;this.userOptions.typeOptions.height=this.options.typeOptions.height}}a.prototype.defaultOptions=c(k.prototype.defaultOptions,{typeOptions:{background:{fill:"rgba(130, 170, 255, 0.4)",
strokeWidth:0},line:{strokeWidth:1},height:-2,heightControlPoint:{positioner:function(a){const b=h.pointToPixels(a.points[2]);a=h.pointToPixels(a.points[3]);const c=(b.x+a.x)/2;return{x:c-this.graphic.width/2,y:(a.y-b.y)/(a.x-b.x)*(c-b.x)+b.y-this.graphic.height/2}},events:{drag:function(a,c){c.chart.isInsidePlot(a.chartX-c.chart.plotLeft,a.chartY-c.chart.plotTop,{visiblePlotOnly:!0})&&(c.translateHeight(this.mouseMoveToTranslation(a).y),c.redraw(!1))}}}},controlPointOptions:{events:{drag:function(a,
c){c.chart.isInsidePlot(a.chartX-c.chart.plotLeft,a.chartY-c.chart.plotTop,{visiblePlotOnly:!0})&&(a=this.mouseMoveToTranslation(a),c.translateSide(a.x,a.y,!!this.index),c.redraw(!1))}}}});return d.types.tunnel=a});p(d,"Extensions/Annotations/Types/InfinityLine.js",[d["Extensions/Annotations/Annotation.js"],d["Extensions/Annotations/Types/CrookedLine.js"],d["Extensions/Annotations/MockPoint.js"],d["Core/Utilities.js"]],function(d,l,k,h){const {merge:e}=h;class c extends l{static edgePoint(a,b){return function(e){e=
e.annotation;const f=e.options.typeOptions.type;let d=e.points;if("horizontalLine"===f||"verticalLine"===f)d=[d[0],new k(e.chart,d[0].target,{x:d[0].x+ +("horizontalLine"===f),y:d[0].y+ +("verticalLine"===f),xAxis:d[0].options.xAxis,yAxis:d[0].options.yAxis})];return c.findEdgePoint(d[a],d[b])}}static findEdgeCoordinate(a,b,c,f){const e="x"===c?"y":"x";return(b[c]-a[c])*(f-a[e])/(b[e]-a[e])+a[c]}static findEdgePoint(a,b){const e=a.series.chart;var f=a.series.xAxis,d=b.series.yAxis,g=k.pointToPixels(a);
b=k.pointToPixels(b);var q=b.x-g.x;const l=b.y-g.y;var h=f.left,p=h+f.width;f=d.top;d=f+d.height;p=0>q?h:p;const u=0>l?f:d;h={x:0===q?g.x:p,y:0===l?g.y:u};0!==q&&0!==l&&(q=c.findEdgeCoordinate(g,b,"y",p),g=c.findEdgeCoordinate(g,b,"x",u),q>=f&&q<=d?(h.x=p,h.y=q):(h.x=g,h.y=u));h.x-=e.plotLeft;h.y-=e.plotTop;a.series.chart.inverted&&(a=h.x,h.x=h.y,h.y=a);return h}addShapes(){const a=this.options.typeOptions;var b=[this.points[0],c.endEdgePoint];a.type.match(/line/gi)&&(b[0]=c.startEdgePoint);b=this.initShape(e(a.line,
{type:"path",points:b}),0);a.line=b.options}}c.endEdgePoint=c.edgePoint(0,1);c.startEdgePoint=c.edgePoint(1,0);c.prototype.defaultOptions=e(l.prototype.defaultOptions,{});d.types.infinityLine=c;"";return c});p(d,"Extensions/Annotations/Types/TimeCycles.js",[d["Extensions/Annotations/Annotation.js"],d["Extensions/Annotations/Types/CrookedLine.js"],d["Extensions/Annotations/ControlPoint.js"],d["Core/Utilities.js"]],function(d,l,k,h){function e(a,b,c,e){const f=[];for(let d=1;d<=b;d++)f.push(["A",a/
2,a/2,0,1,1,c+d*a,e]);return f}const {merge:c,isNumber:a,defined:b}=h;class m extends l{init(a,c,e){b(c.yAxis)&&c.points.forEach(a=>{a.yAxis=c.yAxis});b(c.xAxis)&&c.points.forEach(a=>{a.xAxis=c.xAxis});super.init(a,c,e)}setPath(){this.shapes[0].options.d=this.getPath()}getPath(){return[["M",this.startX,this.y]].concat(e(this.pixelInterval,this.numberOfCircles,this.startX,this.y))}addShapes(){const a=this.options.typeOptions;this.setPathProperties();const b=this.initShape(c(a.line,{type:"path",d:this.getPath(),
points:this.options.points}),0);a.line=b.options}addControlPoints(){const a=this.options,b=a.typeOptions;a.controlPointOptions.style.cursor=this.chart.inverted?"ns-resize":"ew-resize";b.controlPointOptions.forEach(b=>{b=c(a.controlPointOptions,b);b=new k(this.chart,this,b,0);this.controlPoints.push(b)})}setPathProperties(){var b=this.options.typeOptions,c=b.points;if(c){var e=c[0],d=this.chart.xAxis[b.xAxis||0],m=this.chart.yAxis[b.yAxis||0];b=e.x;var h=e.y;e=c[1].x;b&&e&&(c=a(h)?m.toPixels(h):m.top+
m.height,b=a(b)?d.toPixels(b):d.left,m=a(e)?d.toPixels(e):d.left+30,m=Math.round(Math.max(Math.abs(m-b),2)),e=Math.floor(d.len/m)+2,this.startX=b-(Math.floor((b-d.left)/m)+1)*m,this.y=c,this.pixelInterval=m,this.numberOfCircles=e)}}redraw(a){this.setPathProperties();this.setPath();super.redraw(a)}}m.prototype.defaultOptions=c(l.prototype.defaultOptions,{typeOptions:{controlPointOptions:[{positioner:function(a){return{x:a.anchor(a.points[0]).absolutePosition.x-this.graphic.width/2,y:a.y-this.graphic.height}},
events:{drag:function(a,b){const c=b.anchor(b.points[0]).absolutePosition;b.translatePoint(a.chartX-c.x,0,0);b.redraw(!1)}}},{positioner:function(a){return{x:a.anchor(a.points[1]).absolutePosition.x-this.graphic.width/2,y:a.y-this.graphic.height}},events:{drag:function(a,b){const c=b.anchor(b.points[1]).absolutePosition;b.translatePoint(a.chartX-c.x,0,1);b.redraw(!1)}}}]}});return d.types.timeCycles=m});p(d,"Extensions/Annotations/Types/Fibonacci.js",[d["Extensions/Annotations/Annotation.js"],d["Extensions/Annotations/MockPoint.js"],
d["Extensions/Annotations/Types/Tunnel.js"],d["Core/Utilities.js"]],function(d,l,k,h){function e(a,c){return function(){var b=this.annotation;if(!b.startRetracements||!b.endRetracements)return[];var e=this.anchor(b.startRetracements[a]).absolutePosition,d=this.anchor(b.endRetracements[a]).absolutePosition;e=[["M",Math.round(e.x),Math.round(e.y)],["L",Math.round(d.x),Math.round(d.y)]];c&&(d=this.anchor(b.endRetracements[a-1]).absolutePosition,b=this.anchor(b.startRetracements[a-1]).absolutePosition,
e.push(["L",Math.round(d.x),Math.round(d.y)],["L",Math.round(b.x),Math.round(b.y)]));return e}}const {merge:c}=h;class a extends k{linkPoints(){super.linkPoints();this.linkRetracementsPoints()}linkRetracementsPoints(){const b=this.points,c=b[0].y-b[3].y,e=b[1].y-b[2].y,d=b[0].x,g=b[1].x;a.levels.forEach((a,f)=>{const m=b[0].y-c*a;a=b[1].y-e*a;this.startRetracements=this.startRetracements||[];this.endRetracements=this.endRetracements||[];this.linkRetracementPoint(f,d,m,this.startRetracements);this.linkRetracementPoint(f,
g,a,this.endRetracements)})}linkRetracementPoint(a,c,e,d){const b=d[a],f=this.options.typeOptions;b?(b.options.x=c,b.options.y=e,b.refresh()):d[a]=new l(this.chart,this,{x:c,y:e,xAxis:f.xAxis,yAxis:f.yAxis})}addShapes(){a.levels.forEach(function(a,c){const {backgroundColors:b,lineColor:d,lineColors:g}=this.options.typeOptions;this.initShape({type:"path",d:e(c),stroke:g[c]||d},c);0<c&&this.initShape({type:"path",fill:b[c-1],strokeWidth:0,d:e(c,!0)})},this)}addLabels(){a.levels.forEach(function(a,e){const b=
this.options.typeOptions;a=this.initLabel(c(b.labels[e],{point:function(a){return l.pointToOptions(a.annotation.startRetracements[e])},text:a.toString()}));b.labels[e]=a.options},this)}}a.levels=[0,.236,.382,.5,.618,.786,1];a.prototype.defaultOptions=c(k.prototype.defaultOptions,{typeOptions:{height:2,backgroundColors:"rgba(130, 170, 255, 0.4);rgba(139, 191, 216, 0.4);rgba(150, 216, 192, 0.4);rgba(156, 229, 161, 0.4);rgba(162, 241, 130, 0.4);rgba(169, 255, 101, 0.4)".split(";"),lineColor:"#999999",
lineColors:[],labels:[]},labelOptions:{allowOverlap:!0,align:"right",backgroundColor:"none",borderWidth:0,crop:!1,overflow:"none",shape:"rect",style:{color:"grey"},verticalAlign:"middle",y:0}});return d.types.fibonacci=a});p(d,"Extensions/Annotations/Types/FibonacciTimeZones.js",[d["Extensions/Annotations/Annotation.js"],d["Extensions/Annotations/ControlPoint.js"],d["Extensions/Annotations/Types/CrookedLine.js"],d["Extensions/Annotations/Types/InfinityLine.js"],d["Extensions/Annotations/MockPoint.js"],
d["Core/Utilities.js"]],function(d,l,k,h,e,c){function a(a,b,c){return function(d){const f=d.annotation.chart;d=d.annotation.points;const g=d[0].series.xAxis.toValue(d[0].plotX+(f.inverted?f.plotTop:f.plotLeft)+c*(1<d.length?d[1].plotX-d[0].plotX:0));d=[new e(f,d[0].target,{x:g,y:0,xAxis:d[0].options.xAxis,yAxis:d[0].options.yAxis}),new e(f,d[0].target,{x:g,y:1,xAxis:d[0].options.xAxis,yAxis:d[0].options.yAxis})];return h.findEdgePoint(d[a],d[b])}}const {merge:b}=c;class m extends k{addShapes(){let c=
1,d=1;for(let f=0;11>f;f++){var e=f?c:0;e=[a(1,0,e),a(0,1,e)];d=c+d;c=d-c;1===f&&(this.secondLineEdgePoints=[e[0],e[1]]);this.initShape(b(this.options.typeOptions.line,{type:"path",points:e}),f)}}addControlPoints(){var a=this.options;const c=a.typeOptions;a=new l(this.chart,this,b(a.controlPointOptions,c.controlPointOptions),0);this.controlPoints.push(a);c.controlPointOptions=a.options}}m.prototype.defaultOptions=b(k.prototype.defaultOptions,{typeOptions:{line:{stroke:"rgba(0, 0, 0, 0.75)",strokeWidth:1,
fill:void 0},controlPointOptions:{positioner:function(){var a=this.target;const b=this.graphic;var c=a.secondLineEdgePoints;const d={annotation:a};var e=c[0](d).y;const h=c[1](d).y;a=this.chart.plotLeft;const m=this.chart.plotTop;c=c[0](d).x;e=(e+h)/2;this.chart.inverted&&([c,e]=[e,c]);return{x:a+c-b.width/2,y:m+e-b.height/2}},events:{drag:function(a,b){b.chart.isInsidePlot(a.chartX-b.chart.plotLeft,a.chartY-b.chart.plotTop,{visiblePlotOnly:!0})&&(a=this.mouseMoveToTranslation(a),b.translatePoint(a.x,
0,1),b.redraw(!1))}}}}});return d.types.fibonacciTimeZones=m});p(d,"Extensions/Annotations/Types/Pitchfork.js",[d["Extensions/Annotations/Annotation.js"],d["Extensions/Annotations/Types/InfinityLine.js"],d["Extensions/Annotations/MockPoint.js"],d["Core/Utilities.js"]],function(d,l,k,h){const {merge:e}=h;class c extends l{static outerLineEdgePoint(a){return function(b){const d=b.annotation,e=d.points;return c.findEdgePoint(e[a],e[0],new k(d.chart,b,d.midPointOptions()))}}static findEdgePoint(a,b,c){b=
Math.atan2(c.plotY-b.plotY,c.plotX-b.plotX);return{x:a.plotX+1E7*Math.cos(b),y:a.plotY+1E7*Math.sin(b)}}static middleLineEdgePoint(a){const b=a.annotation;return l.findEdgePoint(b.points[0],new k(b.chart,a,b.midPointOptions()))}midPointOptions(){const a=this.points;return{x:(a[1].x+a[2].x)/2,y:(a[1].y+a[2].y)/2,xAxis:a[0].series.xAxis,yAxis:a[0].series.yAxis}}addShapes(){this.addLines();this.addBackgrounds()}addLines(){this.initShape({type:"path",points:[this.points[0],c.middleLineEdgePoint]},0);
this.initShape({type:"path",points:[this.points[1],c.topLineEdgePoint]},1);this.initShape({type:"path",points:[this.points[2],c.bottomLineEdgePoint]},2)}addBackgrounds(){var a=this.shapes;const b=this.options.typeOptions,c=this.initShape(e(b.innerBackground,{type:"path",points:[function(a){var b=a.annotation;a=b.points;b=b.midPointOptions();return{x:(a[1].x+b.x)/2,y:(a[1].y+b.y)/2,xAxis:b.xAxis,yAxis:b.yAxis}},a[1].points[1],a[2].points[1],function(a){var b=a.annotation;a=b.points;b=b.midPointOptions();
return{x:(b.x+a[2].x)/2,y:(b.y+a[2].y)/2,xAxis:b.xAxis,yAxis:b.yAxis}}]}),3);a=this.initShape(e(b.outerBackground,{type:"path",points:[this.points[1],a[1].points[1],a[2].points[1],this.points[2]]}),4);b.innerBackground=c.options;b.outerBackground=a.options}}c.topLineEdgePoint=c.outerLineEdgePoint(1);c.bottomLineEdgePoint=c.outerLineEdgePoint(0);c.prototype.defaultOptions=e(l.prototype.defaultOptions,{typeOptions:{innerBackground:{fill:"rgba(130, 170, 255, 0.4)",strokeWidth:0},outerBackground:{fill:"rgba(156, 229, 161, 0.4)",
strokeWidth:0}}});return d.types.pitchfork=c});p(d,"Extensions/Annotations/Types/VerticalLine.js",[d["Extensions/Annotations/Annotation.js"],d["Extensions/Annotations/MockPoint.js"],d["Core/Utilities.js"]],function(d,l,k){const {merge:h,pick:e}=k;class c extends d{static connectorFirstPoint(a){var b=a.annotation;a=b.chart;const c=a.inverted,d=b.points[0],h=e(d.series.yAxis&&d.series.yAxis.left,0),g=e(d.series.yAxis&&d.series.yAxis.top,0);b=b.options.typeOptions.label.offset;const k=l.pointToPixels(d,
!0)[c?"x":"y"];return{x:d.x,xAxis:d.series.xAxis,y:k+b+(c?h-a.plotLeft:g-a.plotTop)}}static connectorSecondPoint(a){var b=a.annotation;a=b.chart;const c=a.inverted,d=b.options.typeOptions;b=b.points[0];const h=e(b.series.yAxis&&b.series.yAxis.left,0),g=e(b.series.yAxis&&b.series.yAxis.top,0),k=l.pointToPixels(b,!0)[c?"x":"y"];let p=d.yOffset;0>d.label.offset&&(p*=-1);return{x:b.x,xAxis:b.series.xAxis,y:k+p+(c?h-a.plotLeft:g-a.plotTop)}}getPointsOptions(){return[this.options.typeOptions.point]}addShapes(){const a=
this.options.typeOptions,b=this.initShape(h(a.connector,{type:"path",points:[c.connectorFirstPoint,c.connectorSecondPoint]}),0);a.connector=b.options;this.userOptions.typeOptions.point=a.point}addLabels(){const a=this.options.typeOptions;var b=a.label;let c=0,d=b.offset,e=0>b.offset?"bottom":"top",g="center";this.chart.inverted&&(c=b.offset,d=0,e="middle",g=0>b.offset?"right":"left");b=this.initLabel(h(b,{verticalAlign:e,align:g,x:c,y:d}));a.label=b.options}}c.prototype.defaultOptions=h(d.prototype.defaultOptions,
{typeOptions:{yOffset:10,label:{offset:-40,point:function(a){return a.annotation.points[0]},allowOverlap:!0,backgroundColor:"none",borderWidth:0,crop:!0,overflow:"none",shape:"rect",text:"{y:.2f}"},connector:{strokeWidth:1,markerEnd:"arrow"}}});return d.types.verticalLine=c});p(d,"Extensions/Annotations/Types/Measure.js",[d["Extensions/Annotations/Annotation.js"],d["Extensions/Annotations/ControlPoint.js"],d["Core/Utilities.js"]],function(d,l,k){function h(){const a=this.chart.series,b=c(this.xAxisMin,
this.xAxisMax,this.yAxisMin,this.yAxisMax);let d=0,e=!1;a.forEach(a=>{a.visible&&"highcharts-navigator-series"!==a.options.id&&a.points.forEach(a=>{!a.isNull&&a.x>b.xAxisMin&&a.x<=b.xAxisMax&&a.y>b.yAxisMin&&a.y<=b.yAxisMax&&(d++,e=!0)})});e||(d="");return d}function e(){return"Min: "+this.min+"<br>Max: "+this.max+"<br>Average: "+this.average+"<br>Bins: "+this.bins}function c(a,b,c,d){return{xAxisMin:Math.min(b,a),xAxisMax:Math.max(b,a),yAxisMin:Math.min(d,c),yAxisMax:Math.max(d,c)}}function a(a,
b,c){return a.toValue(a.toPixels(b)+c)}function b(){const a=this.chart.series,b=c(this.xAxisMin,this.xAxisMax,this.yAxisMin,this.yAxisMax);let d=-Infinity,e=!1;a.forEach(a=>{a.visible&&"highcharts-navigator-series"!==a.options.id&&a.points.forEach(a=>{!a.isNull&&a.y>d&&a.x>b.xAxisMin&&a.x<=b.xAxisMax&&a.y>b.yAxisMin&&a.y<=b.yAxisMax&&(d=a.y,e=!0)})});e||(d="");return d}function m(){const a=this.chart.series,b=c(this.xAxisMin,this.xAxisMax,this.yAxisMin,this.yAxisMax);let d=Infinity,e=!1;a.forEach(a=>
{a.visible&&"highcharts-navigator-series"!==a.options.id&&a.points.forEach(a=>{!a.isNull&&a.y<d&&a.x>b.xAxisMin&&a.x<=b.xAxisMax&&a.y>b.yAxisMin&&a.y<=b.yAxisMax&&(d=a.y,e=!0)})});e||(d="");return d}function f(c){var d=this.options.typeOptions,e=this.chart.xAxis[d.xAxis];d=this.chart.yAxis[d.yAxis];const f=this.offsetX,g=this.offsetY;this.xAxisMin=a(e,this.startXMin,f);this.xAxisMax=a(e,this.startXMax,f);this.yAxisMin=a(d,this.startYMin,g);this.yAxisMax=a(d,this.startYMax,g);this.min=m.call(this);
this.max=b.call(this);e="";""!==this.max&&""!==this.min&&(e=(this.max+this.min)/2);this.average=e;this.bins=h.call(this);c&&this.resize(0,0)}function p(b,c,d,e,f){var g=this.options.typeOptions;const n=g.selectType,h=this.chart.xAxis[g.xAxis];g=this.chart.yAxis[g.yAxis];const k=this.startXMin,l=this.startXMax,m=this.startYMin,v=this.startYMax,t=this.offsetX,p=this.offsetY;c&&("x"===n?0===d?this.startXMin=a(h,k,e):this.startXMax=a(h,l,e):"y"===n?0===d?this.startYMin=a(g,m,f):this.startYMax=a(g,v,f):
(this.startXMax=a(h,l,e),this.startYMax=a(g,v,f)));b&&(this.startXMin=a(h,k,t),this.startXMax=a(h,l,t),this.startYMin=a(g,m,p),this.startYMax=a(g,v,p),this.offsetY=this.offsetX=0);this.options.typeOptions.point={x:this.startXMin,y:this.startYMin};this.userOptions.typeOptions.point={x:this.startXMin,y:this.startYMin}}const {defined:g,extend:q,isNumber:u,merge:y,pick:D}=k;class B extends d{init(b,c,d){super.init(b,c,d);this.resizeY=this.resizeX=this.offsetY=this.offsetX=0;{b=this.options.typeOptions;
var e=this.chart;d=e.inverted;c=e.xAxis[b.xAxis];e=e.yAxis[b.yAxis];var f=b.background;const g=d?f.height:f.width;f=d?f.width:f.height;const n=b.selectType,h=d?c.left:e.top;d=d?e.top:c.left;this.startXMin=b.point.x;this.startYMin=b.point.y;u(g)?this.startXMax=this.startXMin+g:this.startXMax=a(c,this.startXMin,parseFloat(g));u(f)?this.startYMax=this.startYMin-f:this.startYMax=a(e,this.startYMin,parseFloat(f));"x"===n?(this.startYMin=e.toValue(h),this.startYMax=e.toValue(h+e.len)):"y"===n&&(this.startXMin=
c.toValue(d),this.startXMax=c.toValue(d+c.len))}this.addValues();this.addShapes()}setClipAxes(){this.clipXAxis=this.chart.xAxis[this.options.typeOptions.xAxis];this.clipYAxis=this.chart.yAxis[this.options.typeOptions.yAxis]}pointsOptions(){return this.options.points}shapePointsOptions(){var a=this.options.typeOptions;const b=a.xAxis;a=a.yAxis;return[{x:this.xAxisMin,y:this.yAxisMin,xAxis:b,yAxis:a},{x:this.xAxisMax,y:this.yAxisMin,xAxis:b,yAxis:a},{x:this.xAxisMax,y:this.yAxisMax,xAxis:b,yAxis:a},
{x:this.xAxisMin,y:this.yAxisMax,xAxis:b,yAxis:a}]}addControlPoints(){var a=this.chart.inverted;const b=this.options.controlPointOptions,c=this.options.typeOptions.selectType;g(this.userOptions.controlPointOptions&&this.userOptions.controlPointOptions.style.cursor)||("x"===c?b.style.cursor=a?"ns-resize":"ew-resize":"y"===c&&(b.style.cursor=a?"ew-resize":"ns-resize"));a=new l(this.chart,this,this.options.controlPointOptions,0);this.controlPoints.push(a);"xy"!==c&&(a=new l(this.chart,this,this.options.controlPointOptions,
1),this.controlPoints.push(a))}addValues(a){const b=this.options.typeOptions,c=b.label.formatter;f.call(this,a);b.label.enabled&&(0<this.labels.length?this.labels[0].text=c&&c.call(this)||e.call(this):this.initLabel(q({shape:"rect",backgroundColor:"none",color:"black",borderWidth:0,dashStyle:"Dash",overflow:"allow",align:"left",y:0,x:0,verticalAlign:"top",crop:!0,xAxis:0,yAxis:0,point:function(a){const c=a.annotation;a=a.options;return{x:c.xAxisMin,y:c.yAxisMin,xAxis:D(b.xAxis,a.xAxis),yAxis:D(b.yAxis,
a.yAxis)}},text:c&&c.call(this)||e.call(this)},b.label),void 0))}addShapes(){this.addCrosshairs();this.addBackground()}addBackground(){"undefined"!==typeof this.shapePointsOptions()[0].x&&this.initShape(q({type:"path",points:this.shapePointsOptions()},this.options.typeOptions.background),2)}addCrosshairs(){var a=this.chart,b=this.options.typeOptions,c=a.xAxis[b.xAxis],d=a.yAxis[b.yAxis],e=a.inverted;a={point:this.options.typeOptions.point,type:"path"};var f=c.toPixels(this.xAxisMin);let g=c.toPixels(this.xAxisMax),
h=d.toPixels(this.yAxisMin),k=d.toPixels(this.yAxisMax);d=[];c=[];e&&(e=f,f=h,h=e,e=g,g=k,k=e);b.crosshairX.enabled&&(d=[["M",f,h+(k-h)/2],["L",g,h+(k-h)/2]]);b.crosshairY.enabled&&(c=[["M",f+(g-f)/2,h],["L",f+(g-f)/2,k]]);0<this.shapes.length?(this.shapes[0].options.d=d,this.shapes[1].options.d=c):(f=y(a,b.crosshairX),b=y(a,b.crosshairY),this.initShape(q({d},f),0),this.initShape(q({d:c},b),1))}onDrag(a){var b=this.mouseMoveToTranslation(a);const c=this.options.typeOptions.selectType;a="y"===c?0:
b.x;b="x"===c?0:b.y;this.translate(a,b);this.offsetX+=a;this.offsetY+=b;this.redraw(!1,!1,!0)}resize(a,b,c,d){const e=this.shapes[2];"x"===d?0===c?(e.translatePoint(a,0,0),e.translatePoint(a,b,3)):(e.translatePoint(a,0,1),e.translatePoint(a,b,2)):"y"===d?0===c?(e.translatePoint(0,b,0),e.translatePoint(0,b,1)):(e.translatePoint(0,b,2),e.translatePoint(0,b,3)):(e.translatePoint(a,0,1),e.translatePoint(a,b,2),e.translatePoint(0,b,3));p.call(this,!1,!0,c,a,b);this.options.typeOptions.background.height=
Math.abs(this.startYMax-this.startYMin);this.options.typeOptions.background.width=Math.abs(this.startXMax-this.startXMin)}redraw(a,b,c){this.linkPoints();this.graphic||this.render();c&&p.call(this,!0,!1);this.clipRect&&this.clipRect.animate(this.getClipBox());this.addValues(b);this.addCrosshairs();this.redrawItems(this.shapes,a);this.redrawItems(this.labels,a);this.controlPoints.forEach(a=>a.redraw())}translate(a,b){this.shapes.forEach(c=>c.translate(a,b))}}B.prototype.defaultOptions=y(d.prototype.defaultOptions,
{typeOptions:{selectType:"xy",xAxis:0,yAxis:0,background:{fill:"rgba(130, 170, 255, 0.4)",strokeWidth:0,stroke:void 0},crosshairX:{enabled:!0,zIndex:6,dashStyle:"Dash",markerEnd:"arrow"},crosshairY:{enabled:!0,zIndex:6,dashStyle:"Dash",markerEnd:"arrow"},label:{enabled:!0,style:{fontSize:"0.7em",color:"#666666"},formatter:void 0}},controlPointOptions:{positioner:function(a){var b=this.index,d=a.chart,e=a.options,f=e.typeOptions;const g=f.selectType;e=e.controlPointOptions;const h=d.inverted,k=d.xAxis[f.xAxis];
d=d.yAxis[f.yAxis];const l=c(a.xAxisMin,a.xAxisMax,a.yAxisMin,a.yAxisMax);f=a.xAxisMax;let m=a.yAxisMax;"x"===g&&(m=(l.yAxisMax+l.yAxisMin)/2,0===b&&(f=a.xAxisMin));"y"===g&&(f=l.xAxisMin+(l.xAxisMax-l.xAxisMin)/2,0===b&&(m=a.yAxisMin));h?(a=d.toPixels(m),b=k.toPixels(f)):(a=k.toPixels(f),b=d.toPixels(m));return{x:a-e.width/2,y:b-e.height/2}},events:{drag:function(a,b){var c=this.mouseMoveToTranslation(a);a=b.options.typeOptions.selectType;const d="y"===a?0:c.x;c="x"===a?0:c.y;b.resize(d,c,this.index,
a);b.resizeX+=d;b.resizeY+=c;b.redraw(!1,!0)}}}});return d.types.measure=B});p(d,"masters/modules/annotations-advanced.src.js",[d["Core/Globals.js"],d["Extensions/Annotations/Annotation.js"]],function(d,l){d.Annotation=l;l.compose(d.Chart,d.Pointer,d.SVGRenderer)})});//# sourceMappingURL=annotations-advanced.js.map