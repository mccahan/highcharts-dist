/*
 Highcharts JS v11.1.0 (2023-08-20)

 (c) 2009-2021 Torstein Honsi

 License: www.highcharts.com/license
*/
'use strict';(function(e){"object"===typeof module&&module.exports?(e["default"]=e,module.exports=e):"function"===typeof define&&define.amd?define("highcharts/modules/draggable-points",["highcharts"],function(v){e(v);e.Highcharts=v;return e}):e("undefined"!==typeof Highcharts?Highcharts:void 0)})(function(e){function v(e,w,v,z){e.hasOwnProperty(w)||(e[w]=z.apply(null,v),"function"===typeof CustomEvent&&window.dispatchEvent(new CustomEvent("HighchartsModuleLoaded",{detail:{path:w,module:e[w]}})))}
e=e?e._modules:{};v(e,"Extensions/DraggablePoints.js",[e["Core/Animation/AnimationUtilities.js"],e["Core/Chart/Chart.js"],e["Core/Globals.js"],e["Core/Series/Point.js"],e["Core/Series/Series.js"],e["Core/Series/SeriesRegistry.js"],e["Core/Utilities.js"]],function(e,w,v,z,G,D,P){function H(a){a=a.shapeArgs||a.graphic.getBBox();const b=a.r||0,c=a.height/2;return[["M",0,b],["L",0,c-5],["A",1,1,0,0,0,0,c+5],["A",1,1,0,0,0,0,c-5],["M",0,c+5],["L",0,a.height-b]]}function I(a){return{left:"right",right:"left",
top:"bottom",bottom:"top"}[a]}function Q(a){const b=["draggableX","draggableY"];x(a.dragDropProps,function(a){a.optionName&&b.push(a.optionName)});let c=b.length;for(;c--;)if(a.options.dragDrop[b[c]])return!0}function R(a){let b=a.series?a.series.length:0;if(a.hasCartesianSeries&&!a.polar||a.mapView)for(;b--;)if(a.series[b].options.dragDrop&&Q(a.series[b]))return!0}function S(a){const b=a.series,c=b.chart,d=b.options.dragDrop||{};a=a.options&&a.options.dragDrop;let f,m;x(b.dragDropProps,function(a){"x"===
a.axis&&a.move?f=!0:"y"===a.axis&&a.move&&(m=!0)});return(d.draggableX&&f||d.draggableY&&m)&&!(a&&!1===a.draggableX&&!1===a.draggableY)&&(b.yAxis&&b.xAxis||c.mapView)}function A(a,b){return"undefined"===typeof a.chartX||"undefined"===typeof a.chartY?b.pointer.normalize(a):a}function B(a,b,c,d){const f=b.map(function(b){return y(a,b,c,d)});return function(){f.forEach(function(a){a()})}}function T(a,b,c){var d=b.dragDropData.origin;b=d.chartX;d=d.chartY;const f=a.chartX;a=a.chartY;return Math.sqrt((f-
b)*(f-b)+(a-d)*(a-d))>c}function U(a,b,c){const d={chartX:a.chartX,chartY:a.chartY,guideBox:c&&{x:c.attr("x"),y:c.attr("y"),width:c.attr("width"),height:c.attr("height")},points:{}};b.forEach(function(b){const c={};x(b.series.dragDropProps,function(d,f){d=b.series[d.axis+"Axis"];c[f]=b[f];c[f+"Offset"]=b.series.chart.mapView&&b.plotX&&b.plotY?"x"===f?b.plotX:b.plotY:d.toPixels(b[f])-(d.horiz?a.chartX:a.chartY)});c.point=b;d.points[b.id]=c});return d}function V(a){const b=a.series,c=b.options.dragDrop.groupBy;
let d=[];b.boosted?b.options.data.forEach(function(a,c){d.push((new b.pointClass).init(b,a));d[d.length-1].index=c}):d=b.points;return a.options[c]?d.filter(function(b){return b.options[c]===a.options[c]}):[a]}function J(a,b){const c=V(b),d=b.series,f=d.chart;let m;p(d.options.dragDrop&&d.options.dragDrop.liveRedraw,!0)||(f.dragGuideBox=m=d.getGuideBox(c),f.setGuideBoxState("default",d.options.dragDrop.guideBox).add(d.group));f.dragDropData={origin:U(a,c,m),point:b,groupedPoints:c,isDragging:!0}}
function W(a,b){const c=a.point,d=c.series,f=d.chart,m=q(d.options.dragDrop,c.options.dragDrop),k={},e=a.updateProp,C={};x(c.series.dragDropProps,function(a,b){if(!e||e===b&&a.resize&&(!a.optionName||!1!==m[a.optionName]))if(e||a.move&&("x"===a.axis&&m.draggableX||"y"===a.axis&&m.draggableY))f.mapView?k["x"===b?"lon":"lat"]=a:k[b]=a});(e?[c]:a.groupedPoints).forEach(function(c){C[c.id]={point:c,newValues:c.getDropValues(a.origin,b,k)}});return C}function K(a,b){const c=a.dragDropData.newPoints;b=
X(b);a.isDragDropAnimating=!0;x(c,function(a){a.point.update(a.newValues,!1)});a.redraw(b);setTimeout(function(){delete a.isDragDropAnimating;a.hoverPoint&&!a.dragHandles&&a.hoverPoint.showDragHandles()},b.duration)}function L(a){const b=a.series&&a.series.chart,c=b&&b.dragDropData;!b||!b.dragHandles||c&&(c.isDragging&&c.draggedPastSensitivity||c.isHoveringHandle===a.id)||b.hideDragHandles()}function M(a){let b=0;for(const c in a)Object.hasOwnProperty.call(a,c)&&b++;return b}function N(a){for(const b in a)if(Object.hasOwnProperty.call(a,
b))return a[b]}function Y(a,b){if(!b.zoomOrPanKeyPressed(a)){var c=b.dragDropData;var d=0;if(c&&c.isDragging&&c.point.series){var f=c.point;d=f.series.options.dragDrop;a.preventDefault();c.draggedPastSensitivity||(c.draggedPastSensitivity=T(a,b,p(f.options.dragDrop&&f.options.dragDrop.dragSensitivity,d&&d.dragSensitivity,2)));c.draggedPastSensitivity&&(c.newPoints=W(c,a),b=c.newPoints,d=M(b),b=1===d?N(b):null,f.firePointEvent("drag",{origin:c.origin,newPoints:c.newPoints,newPoint:b&&b.newValues,newPointId:b&&
b.point.id,numNewPoints:d,chartX:a.chartX,chartY:a.chartY},function(){{var b=f.series,c=b.chart,d=c.dragDropData,e=q(b.options.dragDrop,f.options.dragDrop),u=e.draggableX,g=e.draggableY;b=d.origin;var h=d.updateProp;d=a.chartX-b.chartX;let m=a.chartY-b.chartY;var n=d;c.inverted&&(d=-m,m=-n);if(p(e.liveRedraw,!0))K(c,!1),f.showDragHandles();else if(h){{g=d;c=m;n=f.series;h=n.chart;e=h.dragDropData;u=n.dragDropProps[e.updateProp];const a=e.newPoints[f.id].newValues,b="function"===typeof u.resizeSide?
u.resizeSide(a,f):u.resizeSide;u.beforeResize&&u.beforeResize(h.dragGuideBox,a,f);{h=h.dragGuideBox;n="x"===u.axis&&n.xAxis.reversed||"y"===u.axis&&n.yAxis.reversed?I(b):b;g="x"===u.axis?g-(e.origin.prevdX||0):0;c="y"===u.axis?c-(e.origin.prevdY||0):0;let a;switch(n){case "left":a={x:h.attr("x")+g,width:Math.max(1,h.attr("width")-g)};break;case "right":a={width:Math.max(1,h.attr("width")+g)};break;case "top":a={y:h.attr("y")+c,height:Math.max(1,h.attr("height")-c)};break;case "bottom":a={height:Math.max(1,
h.attr("height")+c)}}h.attr(a)}}}else c.dragGuideBox.translate(u?d:0,g?m:0);b.prevdX=d;b.prevdY=m}}))}}}function E(a,b){const c=b.dragDropData;if(c&&c.isDragging&&c.draggedPastSensitivity&&c.point.series){const d=c.point,f=c.newPoints,e=M(f),k=1===e?N(f):null;b.dragHandles&&b.hideDragHandles();a.preventDefault();b.cancelClick=!0;d.firePointEvent("drop",{origin:c.origin,chartX:a.chartX,chartY:a.chartY,newPoints:f,numNewPoints:e,newPoint:k&&k.newValues,newPointId:k&&k.point.id},function(){K(b)})}delete b.dragDropData;
b.dragGuideBox&&(b.dragGuideBox.destroy(),delete b.dragGuideBox)}function Z(a){const b=a.container,c=v.doc;R(a)&&(B(b,["mousedown","touchstart"],function(b){{b=A(b,a);const d=a.hoverPoint;var c=q(d&&d.series.options.dragDrop,d&&d.options.dragDrop);const f=c.draggableX||!1;c=c.draggableY||!1;a.cancelClick=!1;!f&&!c||a.zoomOrPanKeyPressed(b)||a.hasDraggedAnnotation||(a.dragDropData&&a.dragDropData.isDragging?E(b,a):d&&S(d)&&(a.mouseIsDown=!1,J(b,d),d.firePointEvent("dragStart",b)))}}),B(b,["mousemove",
"touchmove"],function(b){Y(A(b,a),a)},{passive:!1}),y(b,"mouseleave",function(b){E(A(b,a),a)}),a.unbindDragDropMouseUp=B(c,["mouseup","touchend"],function(b){E(A(b,a),a)},{passive:!1}),a.hasAddedDragDropEvents=!0,y(a,"destroy",function(){a.unbindDragDropMouseUp&&a.unbindDragDropMouseUp()}))}const {animObject:X}=e,{seriesTypes:g}=D,{addEvent:y,clamp:O,isNumber:F,merge:q,objectEach:x,pick:p}=P;e=G.prototype.dragDropProps={x:{axis:"x",move:!0},y:{axis:"y",move:!0}};g.flags&&(g.flags.prototype.dragDropProps=
e);const l=g.column.prototype.dragDropProps={x:{axis:"x",move:!0},y:{axis:"y",move:!1,resize:!0,beforeResize:function(a,b,c){const d=p(c.yBottom,c.series.translatedThreshold),f=a.attr("y"),e=F(c.stackY)?c.stackY-(c.y||0):c.series.options.threshold||0;b=e+b.y;(c.series.yAxis.reversed?b<e:b>=e)?(c=a.attr("height"),a.attr({height:Math.max(0,Math.round(c+(d?d-f-c:0)))})):a.attr({y:Math.round(f+(d?d-f:0))})},resizeSide:function(a,b){const c=b.series.chart.dragHandles;a=a.y>=(b.series.options.threshold||
0)?"top":"bottom";b=I(a);c&&c[b]&&(c[b].destroy(),delete c[b]);return a},handlePositioner:function(a){const b=a.shapeArgs||a.graphic&&a.graphic.getBBox()||{},c=a.series.yAxis.reversed,d=a.series.options.threshold||0;a=a.y||0;return{x:b.x||0,y:!c&&a>=d||c&&a<d?b.y||0:(b.y||0)+(b.height||0)}},handleFormatter:function(a){var b=a.shapeArgs||{};a=b.r||0;b=b.width||0;const c=b/2;return[["M",a,0],["L",c-5,0],["A",1,1,0,0,0,c+5,0],["A",1,1,0,0,0,c-5,0],["M",c+5,0],["L",b-a,0]]}}};g.bullet&&(g.bullet.prototype.dragDropProps=
{x:l.x,y:l.y,target:{optionName:"draggableTarget",axis:"y",move:!0,resize:!0,resizeSide:"top",handlePositioner:function(a){const b=a.targetGraphic.getBBox();return{x:a.barX,y:b.y+b.height/2}},handleFormatter:l.y.handleFormatter}});g.columnrange&&(g.columnrange.prototype.dragDropProps={x:{axis:"x",move:!0},low:{optionName:"draggableLow",axis:"y",move:!0,resize:!0,resizeSide:"bottom",handlePositioner:function(a){a=a.shapeArgs||a.graphic.getBBox();return{x:a.x||0,y:(a.y||0)+(a.height||0)}},handleFormatter:l.y.handleFormatter,
propValidate:function(a,b){return a<=b.high}},high:{optionName:"draggableHigh",axis:"y",move:!0,resize:!0,resizeSide:"top",handlePositioner:function(a){a=a.shapeArgs||a.graphic.getBBox();return{x:a.x||0,y:a.y||0}},handleFormatter:l.y.handleFormatter,propValidate:function(a,b){return a>=b.low}}});g.boxplot&&(g.boxplot.prototype.dragDropProps={x:l.x,low:{optionName:"draggableLow",axis:"y",move:!0,resize:!0,resizeSide:"bottom",handlePositioner:function(a){return{x:a.shapeArgs.x||0,y:a.lowPlot}},handleFormatter:l.y.handleFormatter,
propValidate:function(a,b){return a<=b.q1}},q1:{optionName:"draggableQ1",axis:"y",move:!0,resize:!0,resizeSide:"bottom",handlePositioner:function(a){return{x:a.shapeArgs.x||0,y:a.q1Plot}},handleFormatter:l.y.handleFormatter,propValidate:function(a,b){return a<=b.median&&a>=b.low}},median:{axis:"y",move:!0},q3:{optionName:"draggableQ3",axis:"y",move:!0,resize:!0,resizeSide:"top",handlePositioner:function(a){return{x:a.shapeArgs.x||0,y:a.q3Plot}},handleFormatter:l.y.handleFormatter,propValidate:function(a,
b){return a<=b.high&&a>=b.median}},high:{optionName:"draggableHigh",axis:"y",move:!0,resize:!0,resizeSide:"top",handlePositioner:function(a){return{x:a.shapeArgs.x||0,y:a.highPlot}},handleFormatter:l.y.handleFormatter,propValidate:function(a,b){return a>=b.q3}}});g.ohlc&&(g.ohlc.prototype.dragDropProps={x:l.x,low:{optionName:"draggableLow",axis:"y",move:!0,resize:!0,resizeSide:"bottom",handlePositioner:function(a){return{x:a.shapeArgs.x,y:a.plotLow}},handleFormatter:l.y.handleFormatter,propValidate:function(a,
b){return a<=b.open&&a<=b.close}},high:{optionName:"draggableHigh",axis:"y",move:!0,resize:!0,resizeSide:"top",handlePositioner:function(a){return{x:a.shapeArgs.x,y:a.plotHigh}},handleFormatter:l.y.handleFormatter,propValidate:function(a,b){return a>=b.open&&a>=b.close}},open:{optionName:"draggableOpen",axis:"y",move:!0,resize:!0,resizeSide:function(a){return a.open>=a.close?"top":"bottom"},handlePositioner:function(a){return{x:a.shapeArgs.x,y:a.plotOpen}},handleFormatter:l.y.handleFormatter,propValidate:function(a,
b){return a<=b.high&&a>=b.low}},close:{optionName:"draggableClose",axis:"y",move:!0,resize:!0,resizeSide:function(a){return a.open>=a.close?"bottom":"top"},handlePositioner:function(a){return{x:a.shapeArgs.x,y:a.plotClose}},handleFormatter:l.y.handleFormatter,propValidate:function(a,b){return a<=b.high&&a>=b.low}}});g.arearange&&(e=g.columnrange.prototype.dragDropProps,D=function(a){a=a.graphic?a.graphic.getBBox().width/2+1:4;return[["M",0-a,0],["a",a,a,0,1,0,2*a,0],["a",a,a,0,1,0,-2*a,0]]},g.arearange.prototype.dragDropProps=
{x:e.x,low:{optionName:"draggableLow",axis:"y",move:!0,resize:!0,resizeSide:"bottom",handlePositioner:function(a){return(a=a.graphics&&a.graphics[0]&&a.graphics[0].getBBox())?{x:a.x+a.width/2,y:a.y+a.height/2}:{x:-999,y:-999}},handleFormatter:D,propValidate:e.low.propValidate},high:{optionName:"draggableHigh",axis:"y",move:!0,resize:!0,resizeSide:"top",handlePositioner:function(a){return(a=a.graphics&&a.graphics[1]&&a.graphics[1].getBBox())?{x:a.x+a.width/2,y:a.y+a.height/2}:{x:-999,y:-999}},handleFormatter:D,
propValidate:e.high.propValidate}});g.waterfall&&(g.waterfall.prototype.dragDropProps={x:l.x,y:q(l.y,{handleFormatter:function(a){return a.isSum||a.isIntermediateSum?null:l.y.handleFormatter(a)}})});if(g.xrange){const a=function(a,c){var b=a.series;const f=b.xAxis,e=b.yAxis,k=b.chart.inverted;b=b.columnMetrics?b.columnMetrics.offset:-a.shapeArgs.height/2;c=f.toPixels(a[c],!0);a=e.toPixels(a.y,!0);k&&(c=f.len-c,a=e.len-a);return{x:Math.round(c),y:Math.round(a+b)}};e=g.xrange.prototype.dragDropProps=
{y:{axis:"y",move:!0},x:{optionName:"draggableX1",axis:"x",move:!0,resize:!0,resizeSide:"left",handlePositioner:function(b){return a(b,"x")},handleFormatter:H,propValidate:function(a,c){return a<=c.x2}},x2:{optionName:"draggableX2",axis:"x",move:!0,resize:!0,resizeSide:"right",handlePositioner:function(b){return a(b,"x2")},handleFormatter:H,propValidate:function(a,c){return a>=c.x}}};g.gantt&&(g.gantt.prototype.dragDropProps={y:e.y,start:q(e.x,{optionName:"draggableStart",validateIndividualDrag:function(a){return!a.milestone}}),
end:q(e.x2,{optionName:"draggableEnd",validateIndividualDrag:function(a){return!a.milestone}})})}"gauge pie sunburst wordcloud sankey histogram pareto vector windbarb treemap bellcurve sma map mapline".split(" ").forEach(function(a){g[a]&&(g[a].prototype.dragDropProps=null)});const aa={"default":{className:"highcharts-drag-box-default",lineWidth:1,lineColor:"#888",color:"rgba(0, 0, 0, 0.1)",cursor:"move",zIndex:900}},ba={className:"highcharts-drag-handle",color:"#fff",lineColor:"rgba(0, 0, 0, 0.6)",
lineWidth:1,zIndex:901};w.prototype.setGuideBoxState=function(a,b){const c=this.dragGuideBox;b=q(aa,b);a=q(b["default"],b[a]);return c.attr({"class":a.className,stroke:a.lineColor,strokeWidth:a.lineWidth,fill:a.color,cursor:a.cursor,zIndex:a.zIndex}).css({pointerEvents:"none"})};z.prototype.getDropValues=function(a,b,c){const d=this,e=d.series,m=e.chart,k=m.mapView,g=q(e.options.dragDrop,d.options.dragDrop),C={},u=a.points[d.id];let l;for(const a in c)if(Object.hasOwnProperty.call(c,a)){if("undefined"!==
typeof l){l=!1;break}l=!0}x(c,function(a,c){const f=u.point[c];var h=e[a.axis+"Axis"];if(k){var n=a.axis.toUpperCase();if(k){h=p(g["dragPrecision"+n],0);var r=k.pixelsToLonLat({x:0,y:0}),t=k.pixelsToLonLat({x:m.plotBox.width,y:m.plotBox.height});r=p(g["dragMin"+n],r&&r[c],-Infinity);n=p(g["dragMax"+n],t&&t[c],Infinity);t=b[c];if("Orthographic"===k.projection.options.name)h=t;else{if("lat"===c){if(isNaN(r)||r>k.projection.maxLatitude)r=k.projection.maxLatitude;if(isNaN(n)||n<-1*k.projection.maxLatitude)n=
-1*k.projection.maxLatitude;var q=n;n=r;r=q}k.projection.hasCoordinates||(q=k.pixelsToLonLat({x:b.chartX-m.plotLeft,y:m.plotHeight-b.chartY+m.plotTop}))&&(t=q[c]);h&&(t=Math.round(t/h)*h);h=O(t,r,n)}}else h=void 0}else h=h.toValue((h.horiz?b.chartX:b.chartY)+u[c+"Offset"]),t=a.axis.toUpperCase(),r=e[t.toLowerCase()+"Axis"].categories?1:0,r=p(g["dragPrecision"+t],r),n=p(g["dragMin"+t],-Infinity),t=p(g["dragMax"+t],Infinity),r&&(h=Math.round(h/r)*r),h=O(h,n,t);!F(h)||l&&a.propValidate&&!a.propValidate(h,
d)||"undefined"===typeof f||(C[c]=h)});return C};G.prototype.getGuideBox=function(a){const b=this.chart;let c=Infinity,d=-Infinity,e=Infinity,g=-Infinity,k;a.forEach(function(a){const b=a.graphic&&a.graphic.getBBox()||a.shapeArgs;if(b){let m;var f=a.x2;F(f)&&(m=a.series.xAxis.translate(f,!1,!1,!1,!0));f=!(b.width||b.height||b.x||b.y);k=!0;c=Math.min(a.plotX||0,m||0,f?Infinity:b.x||0,c);d=Math.max(a.plotX||0,m||0,(b.x||0)+(b.width||0),d);e=Math.min(a.plotY||0,f?Infinity:b.y||0,e);g=Math.max((b.y||
0)+(b.height||0),g)}});return k?b.renderer.rect(c,e,d-c,g-e):b.renderer.g()};z.prototype.showDragHandles=function(){const a=this,b=a.series,c=b.chart,{inverted:d,renderer:e}=c,g=q(b.options.dragDrop,a.options.dragDrop);x(b.dragDropProps,function(f,m){var k=q(ba,f.handleOptions,g.dragHandle);const l={"class":k.className,"stroke-width":k.lineWidth,fill:k.color,stroke:k.lineColor};var p=k.pathFormatter||f.handleFormatter,h=f.handlePositioner,n=f.validateIndividualDrag?f.validateIndividualDrag(a):!0;
f.resize&&n&&f.resizeSide&&p&&(g["draggable"+f.axis.toUpperCase()]||g[f.optionName])&&!1!==g[f.optionName]&&(c.dragHandles||(c.dragHandles={group:e.g("drag-drop-handles").add(b.markerGroup||b.group)}),c.dragHandles.point=a.id,h=h(a),l.d=p=p(a),n=a.series.xAxis.categories?-.5:0,!p||h.x<n||0>h.y||(l.cursor=k.cursor||("x"===f.axis!==!!d?"ew-resize":"ns-resize"),(k=c.dragHandles[f.optionName])||(k=c.dragHandles[f.optionName]=e.path().add(c.dragHandles.group)),l.translateX=d?b.yAxis.len-h.y:h.x,l.translateY=
d?b.xAxis.len-h.x:h.y,d&&(l.rotation=-90),k.attr(l),B(k.element,["touchstart","mousedown"],function(b){{b=A(b,c);const d=a.series.chart;d.zoomOrPanKeyPressed(b)||(d.mouseIsDown=!1,J(b,a),d.dragDropData.updateProp=b.updateProp=m,a.firePointEvent("dragStart",b),b.stopPropagation(),b.preventDefault())}},{passive:!1}),y(c.dragHandles.group.element,"mouseover",function(){c.dragDropData=c.dragDropData||{};c.dragDropData.isHoveringHandle=a.id}),B(c.dragHandles.group.element,["touchend","mouseout"],function(){{const b=
a.series.chart;b.dragDropData&&a.id===b.dragDropData.isHoveringHandle&&delete b.dragDropData.isHoveringHandle;b.hoverPoint||L(a)}})))})};w.prototype.hideDragHandles=function(){this.dragHandles&&(x(this.dragHandles,function(a,b){"group"!==b&&a.destroy&&a.destroy()}),this.dragHandles.group&&this.dragHandles.group.destroy&&this.dragHandles.group.destroy(),delete this.dragHandles)};y(z,"mouseOver",function(){const a=this;setTimeout(function(){{const b=a.series,c=b&&b.chart,d=c&&c.dragDropData,e=c&&c.is3d&&
c.is3d();!c||d&&d.isDragging&&d.draggedPastSensitivity||c.isDragDropAnimating||!b.options.dragDrop||e||(c.dragHandles&&c.hideDragHandles(),a.showDragHandles())}},12)});y(z,"mouseOut",function(){const a=this;setTimeout(function(){a.series&&L(a)},10)});y(z,"remove",function(){const a=this.series.chart,b=a.dragHandles;b&&b.point===this.id&&a.hideDragHandles()});w.prototype.zoomOrPanKeyPressed=function(a){var b=this.options.chart||{};b=b.panKey&&b.panKey+"Key";return a[this.zooming.key&&this.zooming.key+
"Key"]||a[b]};y(w,"render",function(){this.hasAddedDragDropEvents||Z(this)});""});v(e,"masters/modules/draggable-points.src.js",[],function(){})});//# sourceMappingURL=draggable-points.js.map